(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u});var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService({instanceIdentifier:i});if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(a){if(n)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=Object(r.g)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(Object(r.f)([],Object(r.e)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),Object(r.e)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){void 0===t&&(t={});var e=t.instanceIdentifier,n=t.options,r=void 0===n?{}:n,i=this.normalizeInstanceIdentifier(void 0===e?s:e);if(this.isInitialized(i))throw Error(this.name+"("+i+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");return this.getOrInitializeService({instanceIdentifier:i,options:r})},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);return!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o)),o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=n("3N8a");const i=new(n("IjjT").a)(r.a),o=i},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a}),r.a.registerVersion("firebase","8.3.1","app")},KqfI:function(t,e,n){"use strict";function r(){}n.d(e,"a",function(){return r})},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},WMd4:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("EY2u"),i=n("LRne"),o=n("HDdC");let s=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(i.a)(this.value);case"E":return t=this.error,new o.a(e=>e.error(t));case"C":return Object(r.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})()},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Y7HM:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("DH7j");function i(t){return!Object(r.a)(t)&&t-parseFloat(t)+1>=0}},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return Bc}),n.d(e,"b",function(){return qc}),n.d(e,"c",function(){return Uc}),n.d(e,"d",function(){return Pl}),n.d(e,"e",function(){return kl}),n.d(e,"f",function(){return Vu}),n.d(e,"g",function(){return cu}),n.d(e,"h",function(){return Yc}),n.d(e,"i",function(){return du}),n.d(e,"j",function(){return Er}),n.d(e,"k",function(){return bc}),n.d(e,"l",function(){return Io}),n.d(e,"m",function(){return un}),n.d(e,"n",function(){return Vo}),n.d(e,"o",function(){return ju}),n.d(e,"p",function(){return Ru}),n.d(e,"q",function(){return $c}),n.d(e,"r",function(){return $u}),n.d(e,"s",function(){return Tl}),n.d(e,"t",function(){return al}),n.d(e,"u",function(){return xn}),n.d(e,"v",function(){return Kc}),n.d(e,"w",function(){return Gc}),n.d(e,"x",function(){return mu}),n.d(e,"y",function(){return yu}),n.d(e,"z",function(){return xr}),n.d(e,"A",function(){return vu}),n.d(e,"B",function(){return gr}),n.d(e,"C",function(){return Gu}),n.d(e,"D",function(){return pl}),n.d(e,"E",function(){return wu}),n.d(e,"F",function(){return bu}),n.d(e,"G",function(){return Ju}),n.d(e,"H",function(){return L}),n.d(e,"I",function(){return Sl}),n.d(e,"J",function(){return Il}),n.d(e,"K",function(){return d}),n.d(e,"L",function(){return El}),n.d(e,"M",function(){return Nl}),n.d(e,"N",function(){return gl}),n.d(e,"O",function(){return Qc}),n.d(e,"P",function(){return To}),n.d(e,"Q",function(){return oa}),n.d(e,"R",function(){return yr}),n.d(e,"S",function(){return Jn}),n.d(e,"T",function(){return Vn}),n.d(e,"U",function(){return Un}),n.d(e,"V",function(){return Gn}),n.d(e,"W",function(){return Hn}),n.d(e,"X",function(){return Bn}),n.d(e,"Y",function(){return zn}),n.d(e,"Z",function(){return ea}),n.d(e,"ab",function(){return jl}),n.d(e,"bb",function(){return na}),n.d(e,"cb",function(){return ra}),n.d(e,"db",function(){return qn}),n.d(e,"eb",function(){return U}),n.d(e,"fb",function(){return $o}),n.d(e,"gb",function(){return ys}),n.d(e,"hb",function(){return ds}),n.d(e,"ib",function(){return ps}),n.d(e,"jb",function(){return ta}),n.d(e,"kb",function(){return St}),n.d(e,"lb",function(){return l}),n.d(e,"mb",function(){return Fn}),n.d(e,"nb",function(){return Uo}),n.d(e,"ob",function(){return wt}),n.d(e,"pb",function(){return su}),n.d(e,"qb",function(){return Oi}),n.d(e,"rb",function(){return ts}),n.d(e,"sb",function(){return Ns}),n.d(e,"tb",function(){return $s}),n.d(e,"ub",function(){return js}),n.d(e,"vb",function(){return Nc}),n.d(e,"wb",function(){return Z}),n.d(e,"xb",function(){return st}),n.d(e,"yb",function(){return _}),n.d(e,"zb",function(){return E}),n.d(e,"Ab",function(){return rt}),n.d(e,"Bb",function(){return at}),n.d(e,"Cb",function(){return is}),n.d(e,"Db",function(){return cs}),n.d(e,"Eb",function(){return hs}),n.d(e,"Fb",function(){return ls}),n.d(e,"Gb",function(){return us}),n.d(e,"Hb",function(){return as}),n.d(e,"Ib",function(){return fs}),n.d(e,"Jb",function(){return nn}),n.d(e,"Kb",function(){return Ys}),n.d(e,"Lb",function(){return Ya}),n.d(e,"Mb",function(){return Xa}),n.d(e,"Nb",function(){return Ja}),n.d(e,"Ob",function(){return On}),n.d(e,"Pb",function(){return on}),n.d(e,"Qb",function(){return Vc}),n.d(e,"Rb",function(){return ms}),n.d(e,"Sb",function(){return Rc}),n.d(e,"Tb",function(){return bs}),n.d(e,"Ub",function(){return gc}),n.d(e,"Vb",function(){return vc}),n.d(e,"Wb",function(){return Es}),n.d(e,"Xb",function(){return _s}),n.d(e,"Yb",function(){return os}),n.d(e,"Zb",function(){return Is}),n.d(e,"ac",function(){return Os}),n.d(e,"bc",function(){return fc}),n.d(e,"cc",function(){return dc}),n.d(e,"dc",function(){return pc}),n.d(e,"ec",function(){return Dc}),n.d(e,"fc",function(){return rs}),n.d(e,"gc",function(){return Kt}),n.d(e,"hc",function(){return vr}),n.d(e,"ic",function(){return it}),n.d(e,"jc",function(){return Ds}),n.d(e,"kc",function(){return ns}),n.d(e,"lc",function(){return Fc}),n.d(e,"mc",function(){return Gs}),n.d(e,"nc",function(){return Ks}),n.d(e,"oc",function(){return Ws}),n.d(e,"pc",function(){return Qs}),n.d(e,"qc",function(){return jc});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function u(t){for(let e in t)if(t[e]===u)return e;throw Error("Could not find renamed property on target object.")}function c(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function l(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(l).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function h(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const f=u({__forward_ref__:u});function d(t){return t.__forward_ref__=d,t.toString=function(){return l(this())},t}function p(t){return y(t)?t():t}function y(t){return"function"==typeof t&&t.hasOwnProperty(f)&&t.__forward_ref__===d}class m extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function g(t){return"string"==typeof t?t:null==t?"":String(t)}function v(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():g(t)}function b(t,e){const n=e?` in ${e}`:"";throw new m("201",`No provider for ${v(t)} found${n}`)}function w(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function _(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function E(t){return{providers:t.providers||[],imports:t.imports||[]}}function I(t){return O(t,S)||O(t,x)}function O(t,e){return t.hasOwnProperty(e)?t[e]:null}function T(t){return t&&(t.hasOwnProperty(C)||t.hasOwnProperty(A))?t[C]:null}const S=u({"\u0275prov":u}),C=u({"\u0275inj":u}),x=u({ngInjectableDef:u}),A=u({ngInjectorDef:u});var k=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let D;function j(t){const e=D;return D=t,e}function N(t,e,n){const r=I(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&k.Optional?null:void 0!==e?e:void b(l(t),"Injector")}function R(t){return{toString:t}.toString()}var P=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),L=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const M="undefined"!=typeof globalThis&&globalThis,F="undefined"!=typeof window&&window,V="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,q="undefined"!=typeof global&&global,U=M||q||F||V,B={},H=[],z=[],G=u({"\u0275cmp":u}),K=u({"\u0275dir":u}),W=u({"\u0275pipe":u}),Q=u({"\u0275mod":u}),$=u({"\u0275loc":u}),Y=u({"\u0275fac":u}),J=u({__NG_ELEMENT_ID__:u});let X=0;function Z(t){return R(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===P.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||z,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||L.Emulated,id:"c",styles:t.styles||z,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=X++,n.inputs=ot(t.inputs,e),n.outputs=ot(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(tt):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(et):null,n})}function tt(t){return ut(t)||function(t){return t[K]||null}(t)}function et(t){return function(t){return t[W]||null}(t)}const nt={};function rt(t){const e={type:t.type,bootstrap:t.bootstrap||z,declarations:t.declarations||z,imports:t.imports||z,exports:t.exports||z,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&R(()=>{nt[t.id]=t.type}),e}function it(t,e){return R(()=>{const n=ct(t,!0);n.declarations=e.declarations||z,n.imports=e.imports||z,n.exports=e.exports||z})}function ot(t,e){if(null==t)return B;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const st=Z;function at(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function ut(t){return t[G]||null}function ct(t,e){const n=t[Q]||null;if(!n&&!0===e)throw new Error(`Type ${l(t)} does not have '\u0275mod' property.`);return n}const lt=20,ht=10;function ft(t){return Array.isArray(t)&&"object"==typeof t[1]}function dt(t){return Array.isArray(t)&&!0===t[1]}function pt(t){return 0!=(8&t.flags)}function yt(t){return 2==(2&t.flags)}function mt(t){return 1==(1&t.flags)}function gt(t){return null!==t.template}function vt(t,e){return t.hasOwnProperty(Y)?t[Y]:null}class bt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function wt(){return _t}function _t(t){return t.type.prototype.ngOnChanges&&(t.setInput=It),Et}function Et(){const t=Ot(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===B)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function It(t,e,n,r){const i=Ot(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:B,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new bt(u&&u.currentValue,e,s===B),t[r]=e}function Ot(t){return t.__ngSimpleChanges__||null}let Tt;function St(t){Tt=t}function Ct(){return void 0!==Tt?Tt:"undefined"!=typeof document?document:void 0}function xt(t){return!!t.listen}wt.ngInherit=!0;const At={createRenderer:(t,e)=>Ct()};function kt(t){for(;Array.isArray(t);)t=t[0];return t}function Dt(t,e){return kt(e[t])}function jt(t,e){return kt(e[t.index])}function Nt(t,e){return t.data[e]}function Rt(t,e){return t[e]}function Pt(t,e){const n=e[t];return ft(n)?n:n[0]}function Lt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Mt(t){return 4==(4&t[2])}function Ft(t){return 128==(128&t[2])}function Vt(t,e){return null==e?null:t[e]}function qt(t){t[18]=0}function Ut(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Bt={lFrame:pe(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ht(){return Bt.bindingsEnabled}function zt(){return Bt.lFrame.lView}function Gt(){return Bt.lFrame.tView}function Kt(t){Bt.lFrame.contextLView=t}function Wt(){let t=Qt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Qt(){return Bt.lFrame.currentTNode}function $t(){const t=Bt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Yt(t,e){const n=Bt.lFrame;n.currentTNode=t,n.isParent=e}function Jt(){return Bt.lFrame.isParent}function Xt(){Bt.lFrame.isParent=!1}function Zt(){return Bt.isInCheckNoChangesMode}function te(t){Bt.isInCheckNoChangesMode=t}function ee(){const t=Bt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function ne(){return Bt.lFrame.bindingIndex}function re(){return Bt.lFrame.bindingIndex++}function ie(t){const e=Bt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function oe(t){Bt.lFrame.inI18n=t}function se(t,e){const n=Bt.lFrame;n.bindingIndex=n.bindingRootIndex=t,ae(e)}function ae(t){Bt.lFrame.currentDirectiveIndex=t}function ue(){return Bt.lFrame.currentQueryIndex}function ce(t){Bt.lFrame.currentQueryIndex=t}function le(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function he(t,e,n){if(n&k.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&k.Host||(r=le(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Bt.lFrame=de();return r.currentTNode=e,r.lView=t,!0}function fe(t){const e=de(),n=t[1];Bt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function de(){const t=Bt.lFrame,e=null===t?null:t.child;return null===e?pe(t):e}function pe(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ye(){const t=Bt.lFrame;return Bt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const me=ye;function ge(){const t=ye();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ve(){return Bt.lFrame.selectedIndex}function be(t){Bt.lFrame.selectedIndex=t}function we(){const t=Bt.lFrame;return Nt(t.tView,t.selectedIndex)}function _e(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function Ee(t,e,n){Te(t,e,3,n)}function Ie(t,e,n,r){(3&t[2])===n&&Te(t,e,n,r)}function Oe(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Te(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(Se(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function Se(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}const Ce=-1;class xe{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Ae(t,e,n){const r=xt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];De(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function ke(t){return 3===t||4===t||6===t}function De(t){return 64===t.charCodeAt(0)}function je(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Ne(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Ne(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Re(t){return t!==Ce}function Pe(t){return 32767&t}function Le(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Me=!0;function Fe(t){const e=Me;return Me=t,e}let Ve=0;function qe(t,e){const n=Be(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Ue(r.data,t),Ue(e,null),Ue(r.blueprint,null));const i=He(t,e),o=t.injectorIndex;if(Re(i)){const t=Pe(i),n=Le(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Ue(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Be(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function He(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return Ce;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Ce}function ze(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(J)&&(r=n[J]),null==r&&(r=n[J]=Ve++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Ge(t,e,n){if(n&k.Optional)return t;b(e,"NodeInjector")}function Ke(t,e,n,r){if(n&k.Optional&&void 0===r&&(r=null),0==(n&(k.Self|k.Host))){const i=t[9],o=j(void 0);try{return i?i.get(e,r,n&k.Optional):N(e,r,n&k.Optional)}finally{j(o)}}return Ge(r,e,n)}function We(t,e,n,r=k.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(J)?t[J]:void 0;return"number"==typeof e?e>=0?255&e:$e:e}(n);if("function"==typeof o){if(!he(e,t,r))return r&k.Host?Ge(i,n,r):Ke(e,n,r,i);try{const t=o();if(null!=t||r&k.Optional)return t;b(n)}finally{me()}}else if("number"==typeof o){let i=null,s=Be(t,e),a=Ce,u=r&k.Host?e[16][6]:null;for((-1===s||r&k.SkipSelf)&&(a=-1===s?He(t,e):e[s+8],a!==Ce&&tn(r,!1)?(i=e[1],s=Pe(a),e=Le(a,e)):s=-1);-1!==s;){const t=e[1];if(Ze(o,s,t.data)){const t=Ye(s,e,n,i,r,u);if(t!==Qe)return t}a=e[s+8],a!==Ce&&tn(r,e[1].data[s+8]===u)&&Ze(o,s,e)?(i=t,s=Pe(a),e=Le(a,e)):s=-1}}}return Ke(e,n,r,i)}const Qe={};function $e(){return new en(Wt(),zt())}function Ye(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=Je(a,s,n,null==r?yt(a)&&Me:r!=s&&0!=(3&a.type),i&k.Host&&o===a);return null!==u?Xe(e,s,u,a):Qe}function Je(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&gt(t)&&t.type===n)return u}return null}function Xe(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof xe){const s=i;s.resolving&&function(t,e){throw new m("200",`Circular dependency in DI detected for ${t}`)}(v(o[n]));const a=Fe(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?j(s.injectImpl):null;he(t,r,k.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=_t(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&j(u),Fe(a),s.resolving=!1,me()}}return i}function Ze(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function tn(t,e){return!(t&k.Self||t&k.Host&&e)}class en{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return We(this._tNode,this._lView,t,void 0,e)}}function nn(t){return R(()=>{const e=t.prototype.constructor,n=e[Y]||rn(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[Y]||rn(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function rn(t){return y(t)?()=>{const e=rn(p(t));return e&&e()}:vt(t)}function on(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(ke(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Wt(),t)}const sn="__parameters__";function an(t,e,n){return R(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(sn)?t[sn]:Object.defineProperty(t,sn,{value:[]})[sn];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class un{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=_({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}function cn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),cn(r,e)):e!==t&&e.push(r)}return e}function ln(t,e){t.forEach(t=>Array.isArray(t)?ln(t,e):e(t))}function hn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function fn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function dn(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function pn(t,e,n){let r=mn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function yn(t,e){const n=mn(t,e);if(n>=0)return t[1|n]}function mn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const gn={},vn=/\n/gm,bn="__source",wn=u({provide:String,useValue:u});let _n;function En(t){const e=_n;return _n=t,e}function In(t,e=k.Default){if(void 0===_n)throw new Error("inject() must be called from an injection context");return null===_n?N(t,void 0,e):_n.get(t,e&k.Optional?null:void 0,e)}function On(t,e=k.Default){return(D||In)(p(t),e)}function Tn(t){const e=[];for(let n=0;n<t.length;n++){const r=p(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=k.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(On(t,n))}else e.push(On(r))}return e}function Sn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const Cn=Sn(an("Inject",t=>({token:t})),-1),xn=Sn(an("Optional"),8),An=Sn(an("SkipSelf"),4);let kn;function Dn(t){var e;return(null===(e=function(){if(void 0===kn&&(kn=null,U.trustedTypes))try{kn=U.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return kn}())||void 0===e?void 0:e.createHTML(t))||t}class jn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Nn extends jn{getTypeName(){return"HTML"}}class Rn extends jn{getTypeName(){return"Style"}}class Pn extends jn{getTypeName(){return"Script"}}class Ln extends jn{getTypeName(){return"URL"}}class Mn extends jn{getTypeName(){return"ResourceURL"}}function Fn(t){return t instanceof jn?t.changingThisBreaksApplicationSecurity:t}function Vn(t,e){const n=qn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function qn(t){return t instanceof jn&&t.getTypeName()||null}function Un(t){return new Nn(t)}function Bn(t){return new Rn(t)}function Hn(t){return new Pn(t)}function zn(t){return new Ln(t)}function Gn(t){return new Mn(t)}function Kn(t){const e=new Qn(t);return function(){try{return!!(new window.DOMParser).parseFromString(Dn(""),"text/html")}catch(t){return!1}}()?new Wn(e):e}class Wn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Dn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Qn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Dn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=Dn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const $n=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Yn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Jn(t){return(t=String(t)).match($n)||t.match(Yn)?t:"unsafe:"+t}function Xn(t){return(t=String(t)).split(",").map(t=>Jn(t.trim())).join(", ")}function Zn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function tr(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const er=Zn("area,br,col,hr,img,wbr"),nr=Zn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),rr=Zn("rp,rt"),ir=tr(rr,nr),or=tr(er,tr(nr,Zn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),tr(rr,Zn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ir),sr=Zn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ar=Zn("srcset"),ur=tr(sr,ar,Zn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Zn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),cr=Zn("script,style,template");class lr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!or.hasOwnProperty(e))return this.sanitizedSomething=!0,!cr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let r=0;r<n.length;r++){const t=n.item(r),e=t.name,i=e.toLowerCase();if(!ur.hasOwnProperty(i)){this.sanitizedSomething=!0;continue}let o=t.value;sr[i]&&(o=Jn(o)),ar[i]&&(o=Xn(o)),this.buf.push(" ",e,'="',dr(o),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();or.hasOwnProperty(e)&&!er.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(dr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const hr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,fr=/([^\#-~ |!])/g;function dr(t){return t.replace(/&/g,"&amp;").replace(hr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(fr,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let pr;function yr(t,e){let n=null;try{pr=pr||Kn(t);let r=e?String(e):"";n=pr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=pr.getInertBodyElement(r)}while(r!==o);return Dn((new lr).sanitizeChildren(mr(n)||n))}finally{if(n){const t=mr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function mr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var gr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function vr(t){const e=function(){const t=zt();return t&&t[12]}();return e?e.sanitize(gr.URL,t)||"":Vn(t,"URL")?Fn(t):Jn(g(t))}function br(t){return t.ngDebugContext}function wr(t){return t.ngOriginalError}function _r(t,...e){t.error(...e)}class Er{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||_r}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?br(t)?br(t):this._findContext(wr(t)):null}_findOriginalError(t){let e=wr(t);for(;e&&wr(e);)e=wr(e);return e}}const Ir=/^>|^->|<!--|-->|--!>|<!-$/g,Or=/(<|>)/;function Tr(t,e){t.__ngContext__=e}const Sr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(U))();function Cr(t){return t instanceof Function?t():t}var xr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});let Ar;function kr(t,e){return Ar(t,e)}function Dr(t){const e=t[3];return dt(e)?e[3]:e}function jr(t){return Rr(t[13])}function Nr(t){return Rr(t[4])}function Rr(t){for(;null!==t&&!dt(t);)t=t[4];return t}function Pr(t,e,n,r,i){if(null!=r){let o,s=!1;dt(r)?o=r:ft(r)&&(s=!0,r=r[0]);const a=kt(r);0===t&&null!==n?null==i?Wr(e,n,a):Kr(e,n,a,i||null,!0):1===t&&null!==n?Kr(e,n,a,i||null,!0):2===t?oi(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==kt(n)&&Pr(e,t,r,o,i);for(let s=ht;s<n.length;s++){const i=n[s];ai(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Lr(t,e){return xt(t)?t.createText(e):t.createTextNode(e)}function Mr(t,e,n){xt(t)?t.setValue(e,n):e.textContent=n}function Fr(t,e){return t.createComment(function(t){return t.replace(Ir,t=>t.replace(Or,"\u200b$1\u200b"))}(e))}function Vr(t,e,n){return xt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function qr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Ut(i,-1)),n.splice(r,1)}function Ur(t,e){if(t.length<=ht)return;const n=ht+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&qr(o,r),e>0&&(t[n-1][4]=r[4]);const s=fn(t,ht+e);ai(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Br(t,e){if(!(256&e[2])){const n=e[11];xt(n)&&n.destroyNode&&ai(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Hr(t[1],t);for(;e;){let n=null;if(ft(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)ft(e)&&Hr(e[1],e),e=e[3];null===e&&(e=t),ft(e)&&Hr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Hr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof xe)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):kt(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&xt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&dt(e[3])){n!==e[3]&&qr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function zr(t,e,n){return Gr(t,e.parent,n)}function Gr(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===L.None||e===L.Emulated)return null}return jt(r,n)}function Kr(t,e,n,r,i){xt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Wr(t,e,n){xt(t)?t.appendChild(e,n):e.appendChild(n)}function Qr(t,e,n,r,i){null!==r?Kr(t,e,n,r,i):Wr(t,e,n)}function $r(t,e){return xt(t)?t.parentNode(e):e.parentNode}function Yr(t,e,n){return Zr(t,e,n)}function Jr(t,e,n){return 40&t.type?jt(t,n):null}let Xr,Zr=Jr;function ti(t,e){Zr=t,Xr=e}function ei(t,e,n,r){const i=zr(t,r,e),o=e[11],s=Yr(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Qr(o,i,n[a],s,!1);else Qr(o,i,n,s,!1);void 0!==Xr&&Xr(o,r,e,n,i)}function ni(t,e){if(null!==e){const n=e.type;if(3&n)return jt(e,t);if(4&n)return ii(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return ni(t,n);{const n=t[e.index];return dt(n)?ii(-1,n):kt(n)}}if(32&n)return kr(e,t)()||kt(t[e.index]);{const n=ri(t,e);return null!==n?Array.isArray(n)?n[0]:ni(Dr(t[16]),n):ni(t,e.next)}}return null}function ri(t,e){return null!==e?t[16][6].projection[e.projection]:null}function ii(t,e){const n=ht+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return ni(t,r)}return e[7]}function oi(t,e,n){const r=$r(t,e);r&&function(t,e,n,r){xt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}function si(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&Tr(kt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)si(t,e,n.child,r,i,o,!1),Pr(e,t,i,a,o);else if(32&u){const s=kr(n,r);let u;for(;u=s();)Pr(e,t,i,u,o);Pr(e,t,i,a,o)}else 16&u?ui(t,e,r,n,i,o):Pr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function ai(t,e,n,r,i,o){si(n,r,t.firstChild,e,i,o,!1)}function ui(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Pr(e,t,i,a[u],o);else si(t,e,a,s[3],i,o,!0)}function ci(t,e,n){xt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function li(t,e,n){xt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function hi(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const fi="ng-template";function di(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==hi(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function pi(t){return 4===t.type&&t.value!==fi}function yi(t,e,n){return e===(4!==t.type||n?t.value:fi)}function mi(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(ke(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!yi(t,u,n)||""===u&&1===e.length){if(gi(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!di(t.attrs,c,n)){if(gi(r))return!1;s=!0}continue}const l=vi(8&r?"class":u,i,pi(t),n);if(-1===l){if(gi(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==hi(e,c,0)||2&r&&c!==t){if(gi(r))return!1;s=!0}}}}else{if(!s&&!gi(r)&&!gi(u))return!1;if(s&&gi(u))continue;s=!1,r=u|1&r}}return gi(r)||s}function gi(t){return 0==(1&t)}function vi(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function bi(t,e,n=!1){for(let r=0;r<e.length;r++)if(mi(t,e[r],n))return!0;return!1}function wi(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function _i(t,e){return t?":not("+e.trim()+")":e}function Ei(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||gi(s)||(e+=_i(o,i),i=""),r=s,o=o||!gi(r);n++}return""!==i&&(e+=_i(o,i)),e}const Ii={};function Oi(t){Ti(Gt(),zt(),ve()+t,Zt())}function Ti(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&Ee(e,r,n)}else{const r=t.preOrderHooks;null!==r&&Ie(e,r,0,n)}be(n)}function Si(t,e){return t<<17|e<<2}function Ci(t){return t>>17&32767}function xi(t){return 2|t}function Ai(t){return(131068&t)>>2}function ki(t,e){return-131069&t|e<<2}function Di(t){return 1|t}function ji(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];ce(i),n.contentQueries(2,e[o],o)}}}function Ni(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,qt(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function Ri(t,e,n,r,i){let o=t.data[e];if(null===o)o=Pi(t,e,n,r,i),Bt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=$t();o.injectorIndex=null===t?-1:t.injectorIndex}return Yt(o,!0),o}function Pi(t,e,n,r,i){const o=Qt(),s=Jt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}function Li(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Mi(t,e,n){fe(e);try{const r=t.viewQuery;null!==r&&yo(1,r,n);const i=t.template;null!==i&&qi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&ji(t,e),t.staticViewQueries&&yo(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)co(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,ge()}}function Fi(t,e,n,r){const i=e[2];if(256==(256&i))return;fe(e);const o=Zt();try{qt(e),Bt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&qi(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&Ee(e,n,null)}else{const n=t.preOrderHooks;null!==n&&Ie(e,n,0,null),Oe(e,0)}if(function(t){for(let e=jr(t);null!==e;e=Nr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Ut(r,1),n[2]|=1024}}}(e),function(t){for(let e=jr(t);null!==e;e=Nr(e))for(let t=ht;t<e.length;t++){const n=e[t],r=n[1];Ft(n)&&Fi(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&ji(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&Ee(e,n)}else{const n=t.contentHooks;null!==n&&Ie(e,n,1),Oe(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)be(~r);else{const i=r,o=n[++t],s=n[++t];se(o,i),s(2,e[i])}}}finally{be(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)ao(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&yo(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&Ee(e,n)}else{const n=t.viewHooks;null!==n&&Ie(e,n,2),Oe(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ut(e[3],-1))}finally{ge()}}function Vi(t,e,n,r){const i=e[10],o=!Zt(),s=Mt(e);try{o&&!s&&i.begin&&i.begin(),s&&Mi(t,e,r),Fi(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function qi(t,e,n,r,i){const o=ve();try{be(-1),2&r&&e.length>lt&&Ti(t,e,lt,Zt()),n(r,i)}finally{be(o)}}function Ui(t,e,n){if(pt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function Bi(t,e,n){Ht()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||qe(n,e),Tr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=gt(r);o&&no(e,n,r);const u=Xe(e,t,a,n);Tr(u,e),null!==s&&io(0,a-i,u,r,0,s),o&&(Pt(n.index,e)[8]=u)}}(t,e,n,jt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Bt.lFrame.currentDirectiveIndex;try{be(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];ae(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Ji(r,i)}}finally{be(-1),ae(s)}}(t,e,n))}function Hi(t,e,n=jt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function zi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Gi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Gi(t,e,n,r,i,o,s,a,u,c){const l=lt+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ii);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function Ki(t,e,n,r){const i=go(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&vo(t).push(r,i.length-1))}function Wi(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Qi(t,e,n,r,i,o,s,a){const u=jt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(wo(t,n,c,r,i),yt(e)&&function(t,e){const n=Pt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,xt(o)?o.setProperty(u,r,i):De(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function $i(t,e,n,r){let i=!1;if(Ht()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];bi(n,s.selectors,!1)&&(i||(i=[]),ze(qe(n,e),t,s.type),gt(s)?(Xi(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,to(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=Li(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=je(n.mergedAttrs,c.hostAttrs),eo(t,n,e,u,c),Zi(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||pi(e)?null:oo(n,i);o.push(c),s=Wi(n,u,s),a=Wi(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new m("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=je(n.mergedAttrs,n.attrs),i}function Yi(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Ji(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Xi(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Zi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;gt(e)&&(n[""]=t)}}function to(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function eo(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=vt(i.type)),s=new xe(o,gt(i),null);t.blueprint[r]=s,n[r]=s,Yi(t,e,0,r,Li(t,n,i.hostVars,Ii),i)}function no(t,e,n){const r=jt(e,t),i=zi(n),o=t[10],s=lo(t,Ni(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function ro(t,e,n,r,i,o,s){if(null==o)xt(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?g(o):s(o,r||"",i);xt(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}function io(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function oo(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function so(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function ao(t,e){const n=Pt(e,t);if(Ft(n)){const t=n[1];80&n[2]?Fi(t,n,t.template,n[8]):n[5]>0&&uo(n)}}function uo(t){for(let n=jr(t);null!==n;n=Nr(n))for(let t=ht;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];Fi(t,e,t.template,e[8])}else e[5]>0&&uo(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Pt(e[n],t);Ft(r)&&r[5]>0&&uo(r)}}function co(t,e){const n=Pt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Mi(r,n,n[8])}function lo(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function ho(t){for(;t;){t[2]|=64;const e=Dr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function fo(t,e,n){const r=e[10];r.begin&&r.begin();try{Fi(t,e,t.template,n)}catch(i){throw bo(e,i),i}finally{r.end&&r.end()}}function po(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Lt(n),i=r[1];Vi(i,r,i.template,n)}}(t[8])}function yo(t,e,n){ce(0),e(t,n)}const mo=(()=>Promise.resolve(null))();function go(t){return t[7]||(t[7]=[])}function vo(t){return t.cleanup||(t.cleanup=[])}function bo(t,e){const n=t[9],r=n?n.get(Er,null):null;r&&r.handleError(e)}function wo(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function _o(t,e,n){const r=Dt(e,t);Mr(t[11],r,n)}function Eo(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=h(i,t):2==o&&(r=h(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Io=new un("INJECTOR",-1);class Oo{get(t,e=gn){if(e===gn){const e=new Error(`NullInjectorError: No provider for ${l(t)}!`);throw e.name="NullInjectorError",e}return e}}const To=new un("Set Injector scope."),So={},Co={},xo=[];let Ao;function ko(){return void 0===Ao&&(Ao=new Oo),Ao}function Do(t,e=null,n=null,r){return new jo(t,n,e||ko(),r)}class jo{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&ln(e,n=>this.processProvider(n,t,e)),ln([t],t=>this.processInjectorType(t,[],i)),this.records.set(Io,Po(void 0,this));const o=this.records.get(To);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:l(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=gn,n=k.Default){this.assertNotDestroyed();const r=En(this);try{if(!(n&k.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof un)&&I(t);e=n&&this.injectableDefInScope(n)?Po(No(t),So):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&k.Self?ko():this.parent).get(t,e=n&k.Optional&&e===gn?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(l(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[bn]&&i.unshift(e[bn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=l(e);if(Array.isArray(e))i=e.map(l).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):l(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(vn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{En(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(l(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=p(t)))return!1;let r=T(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=T(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{ln(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];ln(r,t=>this.processProvider(t,n,r||xo))}}this.injectorDefTypes.add(o);const a=vt(o)||(()=>new o);this.records.set(o,Po(a,So));const u=r.providers;if(null!=u&&!s){const e=t;ln(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Mo(t=p(t))?t:p(t&&t.provide);const i=function(t,e,n){return Lo(t)?Po(void 0,t.useValue):Po(Ro(t),So)}(t);if(Mo(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=Po(void 0,So,!0),e.factory=()=>Tn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===So&&(e.value=Co,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function No(t){const e=I(t),n=null!==e?e.factory:vt(t);if(null!==n)return n;if(t instanceof un)throw new Error(`Token ${l(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=dn(e,"?");throw new Error(`Can't resolve all parameters for ${l(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[S]||t[x]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Ro(t,e,n){let r;if(Mo(t)){const e=p(t);return vt(e)||No(e)}if(Lo(t))r=()=>p(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...Tn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>On(p(t.useExisting));else{const e=p(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return vt(e)||No(e);r=()=>new e(...Tn(t.deps))}var i;return r}function Po(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Lo(t){return null!==t&&"object"==typeof t&&wn in t}function Mo(t){return"function"==typeof t}const Fo=function(t,e,n){return function(t,e=null,n=null,r){const i=Do(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let Vo=(()=>{class t{static create(t,e){return Array.isArray(t)?Fo(t,e,""):Fo(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=gn,t.NULL=new Oo,t.\u0275prov=_({token:t,providedIn:"any",factory:()=>On(Io)}),t.__NG_ELEMENT_ID__=-1,t})();function qo(t,e){_e(Lt(t)[1],Wt())}function Uo(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(gt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=Bo(t.inputs),e.declaredInputs=Bo(t.declaredInputs),e.outputs=Bo(t.outputs);const n=i.hostBindings;n&&Go(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&Ho(t,o),s&&zo(t,s),c(t.inputs,i.inputs),c(t.declaredInputs,i.declaredInputs),c(t.outputs,i.outputs),gt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===Uo&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=je(i.hostAttrs,n=je(n,i.hostAttrs))}}(r)}function Bo(t){return t===B?{}:t===z?[]:t}function Ho(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function zo(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function Go(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let Ko=null;function Wo(){if(!Ko){const t=U.Symbol;if(t&&t.iterator)Ko=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Ko=n)}}}return Ko}class Qo{constructor(t){this.wrapped=t}static wrap(t){return new Qo(t)}static unwrap(t){return Qo.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Qo}}function $o(t){return!!Yo(t)&&(Array.isArray(t)||!(t instanceof Map)&&Wo()in t)}function Yo(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Jo(t,e,n){return t[e]=n}function Xo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Zo(t,e,n,r){const i=Xo(t,e,n);return Xo(t,e+1,r)||i}function ts(t,e,n,r){const i=zt();return Xo(i,re(),e)&&(Gt(),function(t,e,n,r,i,o){const s=jt(t,e);ro(e[11],s,o,t.value,n,r,i)}(we(),i,t,e,n,r)),ts}function es(t,e,n,r){return Xo(t,re(),n)?e+g(n)+r:Ii}function ns(t,e,n,r,i,o,s,a){const u=zt(),c=Gt(),l=t+lt,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=Ri(e,t,4,s||null,Vt(c,a));$i(e,n,l,Vt(c,u)),_e(e,l);const h=l.tViews=Gi(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];Yt(h,!1);const f=u[11].createComment("");ei(c,u,f,h),Tr(f,u),lo(u,u[l]=so(f,u,f,h)),mt(h)&&Bi(c,u,h),null!=s&&Hi(u,h,a)}function rs(t){return Rt(Bt.lFrame.contextLView,lt+t)}function is(t,e=k.Default){const n=zt();return null===n?On(t,e):We(Wt(),n,p(t),e)}function os(t,e,n){const r=zt();return Xo(r,re(),e)&&Qi(Gt(),we(),r,t,e,r[11],n,!1),os}function ss(t,e,n,r,i){const o=i?"class":"style";wo(t,n,e.inputs[o],o,r)}function as(t,e,n,r){const i=zt(),o=Gt(),s=lt+t,a=i[11],u=i[s]=Vr(a,e,Bt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=Ri(e,t,2,i,Vt(a,o));return $i(e,n,u,Vt(a,s)),null!==u.attrs&&Eo(u,u.attrs,!1),null!==u.mergedAttrs&&Eo(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];Yt(c,!0);const l=c.mergedAttrs;null!==l&&Ae(a,u,l);const h=c.classes;null!==h&&li(a,u,h);const f=c.styles;null!==f&&ci(a,u,f),64!=(64&c.flags)&&ei(o,i,u,c),0===Bt.lFrame.elementDepthCount&&Tr(u,i),Bt.lFrame.elementDepthCount++,mt(c)&&(Bi(o,i,c),Ui(o,c,i)),null!==r&&Hi(i,c)}function us(){let t=Wt();Jt()?Xt():(t=t.parent,Yt(t,!1));const e=t;Bt.lFrame.elementDepthCount--;const n=Gt();n.firstCreatePass&&(_e(n,t),pt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&ss(n,e,zt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&ss(n,e,zt(),e.stylesWithoutHost,!1)}function cs(t,e,n,r){as(t,e,n,r),us()}function ls(t,e,n){const r=zt(),i=Gt(),o=t+lt,s=i.firstCreatePass?function(t,e,n,r,i){const o=e.consts,s=Vt(o,r),a=Ri(e,t,8,"ng-container",s);return null!==s&&Eo(a,s,!0),$i(e,n,a,Vt(o,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(o,i,r,e,n):i.data[o];Yt(s,!0);const a=r[o]=r[11].createComment("");ei(i,r,a,s),Tr(a,r),mt(s)&&(Bi(i,r,s),Ui(i,s,r)),null!=n&&Hi(r,s)}function hs(){let t=Wt();const e=Gt();Jt()?Xt():(t=t.parent,Yt(t,!1)),e.firstCreatePass&&(_e(e,t),pt(t)&&e.queries.elementEnd(t))}function fs(){return zt()}function ds(t){return!!t&&"function"==typeof t.then}function ps(t){return!!t&&"function"==typeof t.subscribe}const ys=ps;function ms(t,e,n=!1,r){const i=zt(),o=Gt(),s=Wt();return function(t,e,n,r,i,o,s=!1,a){const u=mt(r),c=t.firstCreatePass&&vo(t),l=go(e);let h=!0;if(3&r.type){const f=jt(r,e),d=a?a(f):B,p=d.target||f,y=l.length,m=a?t=>a(kt(t[r.index])).target:r.index;if(xt(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=vs(r,e,o,!1);const t=n.listen(d.name||p,i,o);l.push(o,t),c&&c.push(i,m,y,y+1)}}else o=vs(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,m,y,s)}else o=vs(r,e,o,!1);const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),ms}function gs(t,e,n){try{return!1!==e(n)}catch(r){return bo(t,r),!1}}function vs(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?Pt(t.index,e):e;0==(32&e[2])&&ho(s);let a=gs(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=gs(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function bs(t=1){return function(t){return(Bt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Bt.lFrame.contextLView))[8]}(t)}function ws(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?bi(t,o,!0):wi(r,o))return i}else n=i}return n}function _s(t){const e=zt()[16][6];if(!e.projection){const n=e.projection=dn(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?ws(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function Es(t,e=0,n){const r=zt(),i=Gt(),o=Ri(i,lt+t,16,null,n||null);null===o.projection&&(o.projection=e),Xt(),64!=(64&o.flags)&&function(t,e,n){ui(e[11],0,e,n,zr(t,n,e),Yr(n.parent||e[6],n,e))}(i,r,o)}function Is(t,e,n){return Os(t,"",e,"",n),Is}function Os(t,e,n,r,i){const o=zt(),s=es(o,e,n,r);return s!==Ii&&Qi(Gt(),we(),o,t,s,o[11],i,!1),Os}function Ts(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?Ci(o):Ai(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];Ss(t[a],e)&&(u=!0,t[a+1]=r?Di(n):xi(n)),a=r?Ci(n):Ai(n)}u&&(t[n+1]=r?xi(o):Di(o))}function Ss(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&mn(t,e)>=0}const Cs={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function xs(t){return t.substring(Cs.key,Cs.keyEnd)}function As(t,e){const n=Cs.textEnd;return n===e?-1:(e=Cs.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,Cs.key=e,n),ks(t,e,n))}function ks(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function Ds(t,e,n){return Ps(t,e,n,!1),Ds}function js(t,e){return Ps(t,e,null,!0),js}function Ns(t){Ls(pn,Rs,t,!0)}function Rs(t,e){for(let n=function(t){return function(t){Cs.key=0,Cs.keyEnd=0,Cs.value=0,Cs.valueEnd=0,Cs.textEnd=t.length}(t),As(t,ks(t,0,Cs.textEnd))}(e);n>=0;n=As(e,n))pn(t,xs(e),!0)}function Ps(t,e,n,r){const i=zt(),o=Gt(),s=ie(2);o.firstUpdatePass&&Fs(o,t,s,r),e!==Ii&&Xo(i,s,e)&&Us(o,o.data[ve()],i,i[11],t,i[s+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=l(Fn(t)))),t}(e,n),r,s)}function Ls(t,e,n,r){const i=Gt(),o=ie(2);i.firstUpdatePass&&Fs(i,null,o,r);const s=zt();if(n!==Ii&&Xo(s,o,n)){const a=i.data[ve()];if(zs(a,r)&&!Ms(i,o)){let t=r?a.classesWithoutHost:a.stylesWithoutHost;null!==t&&(n=h(t,n||"")),ss(i,a,s,n,r)}else!function(t,e,n,r,i,o,s,a){i===Ii&&(i=H);let u=0,c=0,l=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;null!==l||null!==h;){const f=u<i.length?i[u+1]:void 0,d=c<o.length?o[c+1]:void 0;let p,y=null;l===h?(u+=2,c+=2,f!==d&&(y=h,p=d)):null===h||null!==l&&l<h?(u+=2,y=l):(c+=2,y=h,p=d),null!==y&&Us(t,e,n,r,y,p,s,a),l=u<i.length?i[u]:null,h=c<o.length?o[c]:null}}(i,a,s,s[11],s[o+1],s[o+1]=function(t,e,n){if(null==n||""===n)return H;const r=[],i=Fn(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(t,e,n),r,o)}}function Ms(t,e){return e>=t.expandoStartIndex}function Fs(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[ve()],s=Ms(t,n);zs(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Bt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=qs(n=Vs(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Vs(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Ai(r))return t[Ci(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=Vs(null,t,e,n[1],r),n=qs(n,e.attrs,r),function(t,e,n,r){t[Ci(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=qs(r,t[o].hostAttrs,n);return qs(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ci(s),u=Ai(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||mn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=Ci(t[a+1]);t[r+1]=Si(e,a),0!==e&&(t[e+1]=ki(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=Si(a,0),0!==a&&(t[a+1]=ki(t[a+1],r)),a=r;else t[r+1]=Si(u,0),0===a?a=r:t[u+1]=ki(t[u+1],r),u=r;l&&(t[r+1]=xi(t[r+1])),Ts(t,c,r,!0),Ts(t,c,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&mn(o,e)>=0&&(n[r+1]=Di(n[r+1]))}(e,c,t,r,o),s=Si(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}function Vs(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=qs(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function qs(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),pn(t,s,!!n||e[++o]))}return void 0===t?null:t}function Us(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];Hs(1==(1&c)?Bs(u,e,n,i,Ai(c),s):void 0)||(Hs(o)||2==(2&c)&&(o=Bs(u,null,n,i,a,s)),function(t,e,n,r,i){const o=xt(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:xr.DashCase;if(null==i)o?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),e|=xr.Important),o?t.setStyle(n,r,i,e):n.style.setProperty(r,i,s?"important":"")}}}(r,s,Dt(ve(),n),i,o))}function Bs(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===Ii&&(l=c?H:void 0);let h=c?yn(l,r):u===r?l:void 0;if(o&&!Hs(h)&&(h=yn(e,r)),Hs(h)&&(a=h,s))return a;const f=t[i+1];i=s?Ci(f):Ai(f)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=yn(t,r))}return a}function Hs(t){return void 0!==t}function zs(t,e){return 0!=(t.flags&(e?16:32))}function Gs(t,e=""){const n=zt(),r=Gt(),i=t+lt,o=r.firstCreatePass?Ri(r,i,1,e,null):r.data[i],s=n[i]=Lr(n[11],e);ei(r,n,s,o),Yt(o,!1)}function Ks(t){return Ws("",t,""),Ks}function Ws(t,e,n){const r=zt(),i=es(r,t,e,n);return i!==Ii&&_o(r,ve(),i),Ws}function Qs(t,e,n,r,i){const o=zt(),s=function(t,e,n,r,i,o){const s=Zo(t,ne(),n,i);return ie(2),s?e+g(n)+r+g(i)+o:Ii}(o,t,e,n,r,i);return s!==Ii&&_o(o,ve(),s),Qs}function $s(t,e,n,r,i,o,s,a,u){Ls(pn,Rs,function(t,e,n,r,i,o,s,a,u,c){const l=function(t,e,n,r,i,o){const s=Zo(t,e,n,r);return Zo(t,e+2,i,o)||s}(t,ne(),n,i,s,u);return ie(4),l?e+g(n)+r+g(i)+o+g(s)+a+g(u)+c:Ii}(zt(),t,e,n,r,i,o,s,a,u),!0)}function Ys(t,e,n){const r=zt();return Xo(r,re(),e)&&Qi(Gt(),we(),r,t,e,r[11],n,!0),Ys}const Js=void 0;var Xs=["en",[["a","p"],["AM","PM"],Js],[["AM","PM"],Js,Js],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Js,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Js,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Js,"{1} 'at' {0}",Js],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Zs={};function ta(t,e,n){"string"!=typeof e&&(n=e,e=t[oa.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),Zs[e]=t,n&&(Zs[e][oa.ExtraData]=n)}function ea(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=ia(e);if(n)return n;const r=e.split("-")[0];if(n=ia(r),n)return n;if("en"===r)return Xs;throw new Error(`Missing locale data for the locale "${t}".`)}function na(t){return ea(t)[oa.CurrencyCode]||null}function ra(t){return ea(t)[oa.PluralCase]}function ia(t){return t in Zs||(Zs[t]=U.ng&&U.ng.common&&U.ng.common.locales&&U.ng.common.locales[t]),Zs[t]}var oa=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const sa=["zero","one","two","few","many"],aa="en-US",ua={marker:"element"},ca={marker:"ICU"};var la=function(t){return t[t.SHIFT=2]="SHIFT",t[t.APPEND_EAGERLY=1]="APPEND_EAGERLY",t[t.COMMENT=2]="COMMENT",t}({});let ha=aa;function fa(t){var e;null==(e=t)&&w("Expected localeId to be defined",e,null,"!="),"string"==typeof t&&(ha=t.toLowerCase().replace(/_/g,"-"))}function da(t,e,n){const r=e.insertBeforeIndex,i=Array.isArray(r)?r[0]:r;return null===i?Jr(t,0,n):kt(n[i])}function pa(t,e,n,r,i){const o=e.insertBeforeIndex;if(Array.isArray(o)){let s=r,a=null;if(3&e.type||(a=s,s=i),null!==s&&0==(2&e.flags))for(let e=1;e<o.length;e++)Kr(t,s,n[o[e]],a,!1)}}function ya(t,e){if(t.push(e),t.length>1)for(let n=t.length-2;n>=0;n--){const r=t[n];ma(r)||ga(r,e)&&null===va(r)&&ba(r,e.index)}}function ma(t){return!(64&t.type)}function ga(t,e){return ma(e)||t.index>e.index}function va(t){const e=t.insertBeforeIndex;return Array.isArray(e)?e[0]:e}function ba(t,e){const n=t.insertBeforeIndex;Array.isArray(n)?n[0]=e:(ti(da,pa),t.insertBeforeIndex=e)}function wa(t,e){const n=t.data[e];return null===n||"string"==typeof n?null:n.hasOwnProperty("currentCaseLViewIndex")?n:n.value}function _a(t,e,n){const r=Pi(t,n,64,null,null);return ya(e,r),r}function Ea(t,e){const n=e[t.currentCaseLViewIndex];return null===n?n:n<0?~n:n}let Ia=0,Oa=0;function Ta(t,e,n,r){const i=n[11];let o,s=null;for(let a=0;a<e.length;a++){const u=e[a];if("string"==typeof u){const t=e[++a];null===n[t]&&(n[t]=Lr(i,u))}else if("number"==typeof u)switch(1&u){case 0:const c=u>>>17;let l,h;if(null===s&&(s=c,o=$r(i,r)),c===s?(l=r,h=o):(l=null,h=kt(n[c])),null!==h){const e=(131070&u)>>>1;Kr(i,h,n[e],l,!1);const r=wa(t,e);if(null!==r&&"object"==typeof r){const e=Ea(r,n);null!==e&&Ta(t,r.create[e],n,n[r.anchorIdx])}}break;case 1:const f=e[++a],d=e[++a];ro(i,Dt(u>>>1,n),null,null,f,d,null);break;default:throw new Error(`Unable to determine the type of mutate operation for "${u}"`)}else switch(u){case ca:const t=e[++a],r=e[++a];null===n[r]&&Tr(n[r]=Fr(i,t),n);break;case ua:const o=e[++a],s=e[++a];null===n[s]&&Tr(n[s]=Vr(i,o,null),n)}}}function Sa(t,e,n,r,i){for(let o=0;o<n.length;o++){const s=n[o],a=n[++o];if(s&i){let i="";for(let s=o+1;s<=o+a;s++){const o=n[s];if("string"==typeof o)i+=o;else if("number"==typeof o)if(o<0)i+=g(e[r-o]);else{const a=o>>>2;switch(3&o){case 1:const o=n[++s],u=n[++s],c=t.data[a];"string"==typeof c?ro(e[11],e[a],null,c,o,i,u):Qi(t,c,e,o,i,e[11],u,!1);break;case 0:const l=e[a];null!==l&&Mr(e[11],l,i);break;case 2:xa(t,wa(t,a),e,i);break;case 3:Ca(t,wa(t,a),r,e)}}}}else{const i=n[o+1];if(i>0&&3==(3&i)){const n=wa(t,i>>>2);e[n.currentCaseLViewIndex]<0&&Ca(t,n,r,e)}}o+=a}}function Ca(t,e,n,r){let i=r[e.currentCaseLViewIndex];if(null!==i){let o=Ia;i<0&&(i=r[e.currentCaseLViewIndex]=~i,o=-1),Sa(t,r,e.update[i],n,o)}}function xa(t,e,n,r){const i=function(t,e){let n=t.cases.indexOf(e);if(-1===n)switch(t.type){case 1:{const r=function(t,e){const n=ra(e)(parseInt(t,10)),r=sa[n];return void 0!==r?r:"other"}(e,ha);n=t.cases.indexOf(r),-1===n&&"other"!==r&&(n=t.cases.indexOf("other"));break}case 0:n=t.cases.indexOf("other")}return-1===n?null:n}(e,r);if(Ea(e,n)!==i&&(Aa(t,e,n),n[e.currentCaseLViewIndex]=null===i?null:~i,null!==i)){const r=n[e.anchorIdx];r&&Ta(t,e.create[i],n,r)}}function Aa(t,e,n){let r=Ea(e,n);if(null!==r){const i=e.remove[r];for(let e=0;e<i.length;e++){const r=i[e];if(r>0){const t=Dt(r,n);null!==t&&oi(n[11],t)}else Aa(t,wa(t,~r),n)}}}const ka=/\ufffd(\d+):?\d*\ufffd/gi,Da=/\ufffd(\d+)\ufffd/,ja=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,Na=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,Ra=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,Pa=/\uE500/g;function La(t,e,n,r,i,o,s){const a=Li(t,r,1,null);let u=a<<la.SHIFT,c=$t();e===c&&(c=null),null===c&&(u|=la.APPEND_EAGERLY),s&&(u|=la.COMMENT,void 0===Ar&&(Ar=function(){const t=[];let e,n,r=-1;function i(t,e){r=0;const i=Ea(t,e);n=null!==i?t.remove[i]:z}function o(){if(r<n.length){const s=n[r++];return s>0?e[s]:(t.push(r,n),i(e[1].data[~s],e),o())}return 0===t.length?null:(n=t.pop(),r=t.pop(),o())}return function(n,r){for(e=r;t.length;)t.pop();return i(n.value,r),o}}())),i.push(u,null===o?"":o);const l=Pi(t,a,s?32:1,null===o?"":o,null);ya(n,l);const h=l.index;return Yt(l,!1),null!==c&&e!==c&&function(t,e){let n=t.insertBeforeIndex;var r;null===n?(ti(da,pa),n=t.insertBeforeIndex=[null,e]):("Expecting array here",(r=Array.isArray(n))!=!0&&w("Expecting array here",r,true,"=="),n.push(e))}(c,h),l}function Ma(t,e,n,r,i,o,s){const a=s.match(ka),u=La(t,e,n,o,r,a?null:s,!1);a&&Fa(i,s,u.index)}function Fa(t,e,n,r,i=null){const o=t.length,s=o+1;t.push(null,null);const a=o+2,u=e.split(ka);let c=0;for(let l=0;l<u.length;l++){const e=u[l];if(1&l){const n=parseInt(e,10);t.push(-1-n),c|=Va(n)}else""!==e&&t.push(e)}return t.push(n<<2|(r?1:0)),r&&t.push(r,i),t[o]=c,t[s]=t.length-a,c}function Va(t){return 1<<Math.min(t,31)}function qa(t){let e,n,r="",i=0,o=!1;for(;null!==(e=Na.exec(t));)o?e[0]===`\ufffd/*${n}\ufffd`&&(i=e.index,o=!1):(r+=t.substring(i,e.index+e[0].length),n=e[1],o=!0);return r+=t.substr(i),r}function Ua(t,e,n,r,i,o){let s=0;const a={type:i.type,currentCaseLViewIndex:Li(t,e,1,null),anchorIdx:o,cases:[],create:[],remove:[],update:[]};!function(t,e,n){t.push(Va(e.mainBinding),2,-1-e.mainBinding,n<<2|2)}(n,i,o),function(t,e,n){const r=t.data[e];null===r?t.data[e]=n:r.value=n}(t,o,a);const u=i.values;for(let c=0;c<u.length;c++){const o=u[c],l=[];for(let t=0;t<o.length;t++){const e=o[t];if("string"!=typeof e){const n=l.push(e)-1;o[t]=`\x3c!--\ufffd${n}\ufffd--\x3e`}}s=za(t,a,e,n,r,i.cases[c],o.join(""),l)|s}s&&function(t,e,n){t.push(e,1,n<<2|3)}(n,s,o)}function Ba(t){const e=[],n=[];let r=1,i=0;const o=Ha(t=t.replace(ja,function(t,e,n){return r="select"===n?0:1,i=parseInt(e.substr(1),10),""}));for(let s=0;s<o.length;){let t=o[s++].trim();1===r&&(t=t.replace(/\s*(?:=)?(\w+)\s*/,"$1")),t.length&&e.push(t);const i=Ha(o[s++]);e.length>n.length&&n.push(i)}return{type:r,mainBinding:i,cases:e,values:n}}function Ha(t){if(!t)return[];let e=0;const n=[],r=[],i=/[{}]/g;let o;for(i.lastIndex=0;o=i.exec(t);){const i=o.index;if("}"==o[0]){if(n.pop(),0==n.length){const n=t.substring(e,i);ja.test(n)?r.push(Ba(n)):r.push(n),e=i+1}}else{if(0==n.length){const n=t.substring(e,i);r.push(n),e=i+1}n.push("{")}}const s=t.substring(e);return r.push(s),r}function za(t,e,n,r,i,o,s,a){const u=[],c=[],l=[];e.cases.push(o),e.create.push(u),e.remove.push(c),e.update.push(l);const h=Kn(Ct()).getInertBodyElement(s),f=mr(h)||h;return f?Ga(t,e,n,r,u,c,l,f,i,a,0):0}function Ga(t,e,n,r,i,o,s,a,u,c,l){let h=0,f=a.firstChild;for(;f;){const a=Li(t,n,1,null);switch(f.nodeType){case Node.ELEMENT_NODE:const d=f,p=d.tagName.toLowerCase();if(or.hasOwnProperty(p)){Qa(i,ua,p,u,a),t.data[a]=p;const y=d.attributes;for(let t=0;t<y.length;t++){const e=y.item(t),n=e.name.toLowerCase();e.value.match(ka)?ur.hasOwnProperty(n)&&(sr[n]?Fa(s,e.value,a,e.name,Jn):ar[n]?Fa(s,e.value,a,e.name,Xn):Fa(s,e.value,a,e.name)):$a(i,a,e)}h=Ga(t,e,n,r,i,o,s,f,a,c,l+1)|h,Ka(o,a,l)}break;case Node.TEXT_NODE:const y=f.textContent||"",m=y.match(ka);Qa(i,null,m?"":y,u,a),Ka(o,a,l),m&&(h=Fa(s,y,a)|h);break;case Node.COMMENT_NODE:const g=Da.exec(f.textContent||"");if(g){const e=c[parseInt(g[1],10)];Qa(i,ca,"",u,a),Ua(t,n,r,u,e,a),Wa(o,a,l)}}f=f.nextSibling}return h}function Ka(t,e,n){0===n&&t.push(e)}function Wa(t,e,n){0===n&&(t.push(~e),t.push(e))}function Qa(t,e,n,r,i){null!==e&&t.push(e),t.push(n,i,0|r<<17|i<<1)}function $a(t,e,n){t.push(e<<1|1,n.name,n.value)}function Ya(t,e,n){(function(t,e,n=-1){const r=Gt(),i=zt(),o=lt+t,s=Vt(r.consts,e),a=$t();r.firstCreatePass&&function(t,e,n,r,i,o){const s=$t(),a=[],u=[],c=[[]],l=(h=i=function(t,e){if(function(t){return-1===t}(e))return qa(t);{const n=t.indexOf(`:${e}\ufffd`)+2+e.toString().length,r=t.search(new RegExp(`\ufffd\\/\\*\\d+:${e}\ufffd`));return qa(t.substring(n,r))}}(i,o),h.replace(Pa," ")).split(Ra);var h;for(let f=0;f<l.length;f++){let r=l[f];if(0==(1&f)){const o=Ha(r);for(let r=0;r<o.length;r++){let l=o[r];if(0==(1&r)){const e=l;""!==e&&Ma(t,s,c[0],a,u,n,e)}else{const r=l;if("object"!=typeof r)throw new Error(`Unable to parse ICU expression in "${i}" message.`);Ua(t,n,u,e,r,La(t,s,c[0],n,a,"",!0).index)}}}else{const e=47===r.charCodeAt(0),n=(r.charCodeAt(e?1:0),lt+Number.parseInt(r.substring(e?2:1)));if(e)c.shift(),Yt($t(),!1);else{const e=_a(t,c[0],n);c.unshift([]),Yt(e,!0)}}}t.data[r]={create:a,update:u}}(r,null===a?0:a.index,i,o,s,n);const u=r.data[o],c=Gr(r,a===i[6]?null:a,i);!function(t,e,n,r){const i=t[11];for(let o=0;o<e.length;o++){const s=e[o++],a=e[o],u=(s&la.COMMENT)===la.COMMENT,c=(s&la.APPEND_EAGERLY)===la.APPEND_EAGERLY,l=s>>>la.SHIFT;let h=t[l];null===h&&(h=t[l]=u?i.createComment(a):Lr(i,a)),c&&null!==n&&Kr(i,n,h,r,!1)}}(i,u.create,c,a&&8&a.type?i[a.index]:null),oe(!0)})(t,e,n),oe(!1)}function Ja(t){return Xo(zt(),re(),t)&&(Ia|=1<<Math.min(Oa,31)),Oa++,Ja}function Xa(t){!function(t,e,n){if(Oa>0){const r=t.data[n];Sa(t,e,Array.isArray(r)?r:r.update,ne()-Oa-1,Ia)}Ia=0,Oa=0}(Gt(),zt(),t+lt)}function Za(t,e,n,r,i){if(t=p(t),Array.isArray(t))for(let o=0;o<t.length;o++)Za(t[o],e,n,r,i);else{const o=Gt(),s=zt();let a=Mo(t)?t:p(t.provide),u=Ro(t);const c=Wt(),l=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(Mo(t)||!t.multi){const r=new xe(u,i,is),d=nu(a,e,i?l:l+f,h);-1===d?(ze(qe(c,s),o,a),tu(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[d]=r,s[d]=r)}else{const d=nu(a,e,l+f,h),p=nu(a,e,l,l+f),y=d>=0&&n[d],m=p>=0&&n[p];if(i&&!m||!i&&!y){ze(qe(c,s),o,a);const l=function(t,e,n,r,i){const o=new xe(t,n,is);return o.multi=[],o.index=e,o.componentProviders=0,eu(o,i,r&&!n),o}(i?iu:ru,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),tu(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else tu(o,t,d>-1?d:p,eu(n[i?p:d],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function tu(t,e,n,r){const i=Mo(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function eu(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function nu(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function ru(t,e,n,r){return ou(this.multi,[])}function iu(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Xe(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),ou(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],ou(i,o);return o}function ou(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function su(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Gt();if(r.firstCreatePass){const i=gt(t);Za(n,r.data,r.blueprint,i,!0),Za(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class au{}class uu{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${l(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let cu=(()=>{class t{}return t.NULL=new uu,t})();function lu(...t){}function hu(t,e){return new du(jt(t,e))}const fu=function(){return hu(Wt(),zt())};let du=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=fu,t})();function pu(t){return t instanceof du?t.nativeElement:t}class yu{}let mu=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>gu(),t})();const gu=function(){const t=zt(),e=Pt(Wt().index,t);return function(t){return t[11]}(ft(e)?e:t)};let vu=(()=>{class t{}return t.\u0275prov=_({token:t,providedIn:"root",factory:()=>null}),t})();class bu{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const wu=new bu("11.2.7");class _u{constructor(){}supports(t){return $o(t)}create(t){return new Iu(t)}}const Eu=(t,e)=>e;class Iu{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Eu}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<Cu(n,r,i)?e:n,s=Cu(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!$o(t))throw new Error(`Error trying to diff '${l(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Wo()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new Ou(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Su),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Su),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Ou{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Tu{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Su{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Tu,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Cu(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class xu{constructor(){}supports(t){return t instanceof Map||Yo(t)}create(){return new Au}}class Au{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Yo(t)))throw new Error(`Error trying to diff '${l(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new ku(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class ku{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Du(){return new ju([new _u])}let ju=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Du()),deps:[[t,new An,new xn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=_({token:t,providedIn:"root",factory:Du}),t})();function Nu(){return new Ru([new xu])}let Ru=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Nu()),deps:[[t,new An,new xn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=_({token:t,providedIn:"root",factory:Nu}),t})();function Pu(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(kt(o)),dt(o))for(let t=ht;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&Pu(e[1],e,n,r)}const s=n.type;if(8&s)Pu(t,e,n.child,r);else if(32&s){const t=kr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=ri(e,n);if(Array.isArray(t))r.push(...t);else{const n=Dr(e[16]);Pu(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class Lu{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Pu(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(dt(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Ur(t,n),fn(e,n))}this._attachedToViewContainer=!1}Br(this._lView[1],this._lView)}onDestroy(t){Ki(this._lView[1],this._lView,null,t)}markForCheck(){ho(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){fo(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){te(!0);try{fo(t,e,n)}finally{te(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,ai(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Mu extends Lu{constructor(t){super(t),this._view=t}detectChanges(){po(this._view)}checkNoChanges(){!function(t){te(!0);try{po(t)}finally{te(!1)}}(this._view)}get context(){return null}}const Fu=qu;let Vu=(()=>{class t{}return t.__NG_ELEMENT_ID__=Fu,t.__ChangeDetectorRef__=!0,t})();function qu(t=!1){return function(t,e,n){if(!n&&yt(t)){const n=Pt(t.index,e);return new Lu(n,n)}return 47&t.type?new Lu(e[16],e):null}(Wt(),zt(),t)}const Uu=[new xu],Bu=new ju([new _u]),Hu=new Ru(Uu),zu=function(){return Qu(Wt(),zt())};let Gu=(()=>{class t{}return t.__NG_ELEMENT_ID__=zu,t})();const Ku=Gu,Wu=class extends Ku{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Ni(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Mi(e,n,t),new Lu(n)}};function Qu(t,e){return 4&t.type?new Wu(e,t,hu(t,e)):null}class $u{}const Yu=function(){return nc(Wt(),zt())};let Ju=(()=>{class t{}return t.__NG_ELEMENT_ID__=Yu,t})();const Xu=Ju,Zu=class extends Xu{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return hu(this._hostTNode,this._hostLView)}get injector(){return new en(this._hostTNode,this._hostLView)}get parentInjector(){const t=He(this._hostTNode,this._hostLView);if(Re(t)){const e=Le(t,this._hostLView),n=Pe(t);return new en(e[1].data[n+8],e)}return new en(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=tc(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ht}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get($u,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(dt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new Zu(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=ht+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-ht?(e[4]=n[i],hn(n,ht+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=ii(i,o),a=n[11],u=$r(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,ai(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),hn(ec(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=tc(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Ur(this._lContainer,e);n&&(fn(ec(this._lContainer),e),Br(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Ur(this._lContainer,e);return n&&null!=fn(ec(this._lContainer),e)?new Lu(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function tc(t){return t[8]}function ec(t){return t[8]||(t[8]=[])}function nc(t,e){let n;const r=e[t.index];if(dt(r))n=r;else{let i;if(8&t.type)i=kt(r);else{const n=e[11];i=n.createComment("");const r=jt(t,e);Kr(n,$r(n,r),i,function(t,e){return xt(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=so(r,e,i,t),lo(e,n)}return new Zu(n,t,e)}const rc={};class ic extends cu{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=ut(t);return new ac(e,this.ngModule)}}function oc(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const sc=new un("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Sr});class ac extends au{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Ei).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return oc(this.componentDef.inputs)}get outputs(){return oc(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,rc,i);return o!==rc||r===rc?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(yu,At),s=i.get(vu,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(xt(t))return t.selectRootElement(e,n===L.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Vr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:Sr,clean:mo,playerHandler:null,flags:0},f=Gi(0,null,null,1,0,null,null,null,null,null),d=Ni(null,f,h,l,null,null,o,a,s,i);let p,y;fe(d);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=Ri(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Eo(a,u,!0),null!==t&&(Ae(i,t,u),null!==a.classes&&li(i,t,a.classes),null!==a.styles&&ci(i,t,a.styles)));const c=r.createRenderer(t,e),l=Ni(n,zi(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(ze(qe(a,n),s,e.type),Xi(s,a),to(a,n.length,1)),lo(n,l),n[20]=l}(c,this.componentDef,d,o,a);if(c)if(n)Ae(a,c,["ng-version",wu.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!gi(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Ae(a,c,t),e&&e.length>0&&li(a,c,e.join(" "))}if(y=Nt(f,lt),void 0!==e){const t=y.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Wt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),eo(t,r,e,Li(t,e,1,null),n));const i=Xe(e,t,r.directiveStart,r);Tr(i,e);const o=jt(r,e);return o&&Tr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Wt();e.contentQueries(1,s,t.directiveStart)}const a=Wt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(be(a.index),Yi(n[1],a,0,a.directiveStart,a.directiveEnd,e),Ji(e,s)),s}(t,this.componentDef,d,h,[qo]),Mi(f,d,null)}finally{ge()}return new uc(this.componentType,p,hu(y,d),d,y)}}class uc extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new Mu(r),this.componentType=t}get injector(){return new en(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const cc=new Map;class lc extends $u{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new ic(this);const n=ct(t),r=t[$]||null;r&&fa(r),this._bootstrapComponents=Cr(n.bootstrap),this._r3Injector=Do(t,e,[{provide:$u,useValue:this},{provide:cu,useValue:this.componentFactoryResolver}],l(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Vo.THROW_IF_NOT_FOUND,n=k.Default){return t===Vo||t===$u||t===Io?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class hc extends class{}{constructor(t){super(),this.moduleType=t,null!==ct(t)&&function(t){const e=new Set;!function t(n){const r=ct(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${l(e)} vs ${l(e.name)}`)}(i,cc.get(i),n),cc.set(i,n));const o=Cr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new lc(this.moduleType,t)}}function fc(t,e,n,r){return mc(zt(),ee(),t,e,n,r)}function dc(t,e,n,r,i){return function(t,e,n,r,i,o,s){const a=e+n;return Zo(t,a,i,o)?Jo(t,a+2,s?r.call(s,i,o):r(i,o)):yc(t,a+2)}(zt(),ee(),t,e,n,r,i)}function pc(t,e,n,r,i,o){return function(t,e,n,r,i,o,s,a){const u=e+n;return function(t,e,n,r,i){const o=Zo(t,e,n,r);return Xo(t,e+2,i)||o}(t,u,i,o,s)?Jo(t,u+3,a?r.call(a,i,o,s):r(i,o,s)):yc(t,u+3)}(zt(),ee(),t,e,n,r,i,o)}function yc(t,e){const n=t[e];return n===Ii?void 0:n}function mc(t,e,n,r,i,o){const s=e+n;return Xo(t,s,i)?Jo(t,s+1,o?r.call(o,i):r(i)):yc(t,s+1)}function gc(t,e){const n=Gt();let r;const i=t+lt;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new m("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=vt(r.type)),s=j(is);try{const t=Fe(!1),e=o();return Fe(t),function(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,zt(),i,e),e}finally{j(s)}}function vc(t,e,n){const r=t+lt,i=zt(),o=Rt(i,r);return function(t,e){return Qo.isWrapped(e)&&(e=Qo.unwrap(e),t[ne()]=Ii),e}(i,function(t,e){return t[1].data[e].pure}(i,r)?mc(i,ee(),e,o.transform,n,o):o.transform(n))}const bc=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function wc(){return this._results[Wo()]()}class _c{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Wo(),n=_c.prototype;n[e]||(n[e]=wc)}get changes(){return this._changes||(this._changes=new bc)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=cn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Ec{constructor(t){this.queryList=t,this.matches=null}clone(){return new Ec(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ic{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Ic(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Mc(t,e).matches&&this.queries[e].setDirty()}}class Oc{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Tc{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Tc(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Sc{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Sc(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Cc(e,i)),this.matchTNodeWithReadOption(t,e,Je(e,t,i,!1,!1))}else n===Gu?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Je(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===du||r===Ju||r===Gu&&4&e.type)this.addMatch(e.index,-2);else{const n=Je(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Cc(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function xc(t,e,n,r){return-1===n?function(t,e){return 11&t.type?hu(t,e):4&t.type?Qu(t,e):null}(e,t):-2===n?function(t,e,n){return n===du?hu(e,t):n===Gu?Qu(e,t):n===Ju?nc(e,t):void 0}(t,e,r):Xe(t,t[1],n,e)}function Ac(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:xc(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function kc(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=Ac(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=ht;t<s.length;t++){const e=s[t];e[17]===e[3]&&kc(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];kc(n[1],n,i,r)}}}}}return r}function Dc(t){const e=zt(),n=Gt(),r=ue();ce(r+1);const i=Mc(n,r);if(t.dirty&&Mt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?kc(n,e,r,[]):Ac(n,e,i,r);t.reset(o,pu),t.notifyOnChanges()}return!0}return!1}function jc(t,e,n){const r=Gt();r.firstCreatePass&&(Lc(r,new Oc(t,e,n),-1),2==(2&e)&&(r.staticViewQueries=!0)),Pc(r,zt(),e)}function Nc(t,e,n,r){const i=Gt();if(i.firstCreatePass){const o=Wt();Lc(i,new Oc(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}Pc(i,zt(),n)}function Rc(){return t=zt(),e=ue(),t[19].queries[e].queryList;var t,e}function Pc(t,e,n){const r=new _c(4==(4&n));Ki(t,e,r,r.destroy),null===e[19]&&(e[19]=new Ic),e[19].queries.push(new Ec(r))}function Lc(t,e,n){null===t.queries&&(t.queries=new Tc),t.queries.track(new Sc(e,n))}function Mc(t,e){return t.queries.getByIndex(e)}function Fc(t,e){return Qu(t,e)}function Vc(t=k.Default){const e=qu(!0);if(null!=e||t&k.Optional)return e;b("ChangeDetectorRef")}const qc=new un("Application Initializer");let Uc=(()=>{class t{constructor(t){this.appInits=t,this.resolve=lu,this.reject=lu,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();ds(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(On(qc,8))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const Bc=new un("AppId"),Hc={provide:Bc,useFactory:function(){return`${zc()}${zc()}${zc()}`},deps:[]};function zc(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Gc=new un("Platform Initializer"),Kc=new un("Platform ID"),Wc=new un("appBootstrapListener");let Qc=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const $c=new un("LocaleId"),Yc=new un("DefaultCurrencyCode");class Jc{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Xc=function(t){return new hc(t)},Zc=Xc,tl=function(t){return Promise.resolve(Xc(t))},el=function(t){const e=Xc(t),n=Cr(ct(t).declarations).reduce((t,e)=>{const n=ut(e);return n&&t.push(new ac(n)),t},[]);return new Jc(e,n)},nl=el,rl=function(t){return Promise.resolve(el(t))};let il=(()=>{class t{constructor(){this.compileModuleSync=Zc,this.compileModuleAsync=tl,this.compileModuleAndAllComponentsSync=nl,this.compileModuleAndAllComponentsAsync=rl}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const ol=(()=>Promise.resolve(0))();function sl(t){"undefined"==typeof Zone?ol.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class al{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new bc(!1),this.onMicrotaskEmpty=new bc(!1),this.onStable=new bc(!1),this.onError=new bc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=U.requestAnimationFrame,e=U.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(U,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,ll(t),cl(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),ll(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return hl(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),fl(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return hl(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),fl(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,ll(t),cl(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!al.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(al.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,ul,lu,lu);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const ul={};function cl(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function ll(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function hl(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function fl(t){t._nesting--,cl(t)}class dl{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new bc,this.onMicrotaskEmpty=new bc,this.onStable=new bc,this.onError=new bc}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let pl=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{al.assertNotInAngularZone(),sl(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())sl(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(On(al))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})(),yl=(()=>{class t{constructor(){this._applications=new Map,bl.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return bl.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();class ml{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function gl(t){bl=t}let vl,bl=new ml,wl=!0,_l=!1;function El(){return _l=!0,wl}function Il(){if(_l)throw new Error("Cannot enable prod mode after platform setup.");wl=!1}const Ol=new un("AllowMultipleToken");class Tl{constructor(t,e){this.name=t,this.token=e}}function Sl(t,e,n=[]){const r=`Platform: ${e}`,i=new un(r);return(e=[])=>{let o=Cl();if(!o||o.injector.get(Ol,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:To,useValue:"platform"});!function(t){if(vl&&!vl.destroyed&&!vl.injector.get(Ol,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");vl=t.get(xl);const e=t.get(Gc,null);e&&e.forEach(t=>t())}(Vo.create({providers:t,name:r}))}return function(t){const e=Cl();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Cl(){return vl&&!vl.destroyed?vl:null}let xl=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new dl:("zone.js"===t?void 0:t)||new al({enableLongStackTrace:El(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:al,useValue:n}];return n.run(()=>{const e=Vo.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(Er,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{Dl(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return ds(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Uc);return t.runInitializers(),t.donePromise.then(()=>(fa(i.injector.get($c,aa)||aa),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Al({},e);return function(t,e,n){const r=new hc(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(kl);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${l(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(On(Vo))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function Al(t,e){return Array.isArray(e)?e.reduce(Al,t):Object.assign(Object.assign({},t),e)}let kl=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const u=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),c=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{al.assertNotInAngularZone(),sl(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{al.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(u,c.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof au?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get($u),i=n.create(Vo.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(pl,null),a=s&&i.injector.get(yl);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),Dl(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Dl(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Wc,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(On(al),On(Vo),On(Er),On(cu),On(Uc))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function Dl(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const jl=function(t){return null},Nl=Sl(null,"core",[{provide:Kc,useValue:"unknown"},{provide:xl,deps:[Vo]},{provide:yl,deps:[]},{provide:Qc,deps:[]}]),Rl=[{provide:kl,useClass:kl,deps:[al,Vo,Er,cu,Uc]},{provide:sc,deps:[al],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Uc,useClass:Uc,deps:[[new xn,qc]]},{provide:il,useClass:il,deps:[]},Hc,{provide:ju,useFactory:function(){return Bu},deps:[]},{provide:Ru,useFactory:function(){return Hu},deps:[]},{provide:$c,useFactory:function(t){return fa(t=t||"undefined"!=typeof $localize&&$localize.locale||aa),t},deps:[[new Cn($c),new xn,new An]]},{provide:Yc,useValue:"USD"}];let Pl=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(On(kl))},t.\u0275mod=rt({type:t}),t.\u0275inj=E({providers:Rl}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mrSG:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return a});var r=n("7o/Q"),i=n("WMd4");function o(t,e=0){return function(n){return n.lift(new s(t,e))}}class s{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new a(t,this.scheduler,this.delay))}}class a extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(a.dispatch,this.delay,new u(t,this.destination)))}_next(t){this.scheduleMessage(i.a.createNext(t))}_error(t){this.scheduleMessage(i.a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(i.a.createComplete()),this.unsubscribe()}}class u{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return f}),n.d(e,"d",function(){return d});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return g}),n.d(e,"c",function(){return w}),n.d(e,"d",function(){return _}),n.d(e,"e",function(){return i}),n.d(e,"f",function(){return o}),n.d(e,"g",function(){return a}),n.d(e,"h",function(){return l}),n.d(e,"i",function(){return h}),n.d(e,"j",function(){return d}),n.d(e,"k",function(){return p}),n.d(e,"l",function(){return u}),n.d(e,"m",function(){return c}),n.d(e,"n",function(){return f}),n.d(e,"o",function(){return y});var r=n("mrSG");function i(t){return o(void 0,t)}function o(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=o(t[n],e[n]));return t}var s=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function a(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function u(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(a())}function c(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function l(){return"object"==typeof self&&self.self===self}function h(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function f(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function d(){return a().indexOf("Electron/")>=0}function p(){var t=a();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function y(){return a().indexOf("MSAppHost/")>=0}var m=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,g.prototype.create),o}return Object(r.c)(e,t),e}(Error),g=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?v(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new m(i,a,r);return u},t}();function v(t,e){return t.replace(b,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var b=/\{\$([^}]+)}/g;function w(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function _(t,e){var n=new E(t,e);return n.subscribe.bind(n)}var E=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=I),void 0===r.error&&(r.error=I),void 0===r.complete&&(r.complete=I);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function I(){}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return S}),n.d(e,"b",function(){return b}),n.d(e,"c",function(){return v}),n.d(e,"d",function(){return d}),n.d(e,"e",function(){return g}),n.d(e,"f",function(){return O}),n.d(e,"g",function(){return _}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return m}),n.d(e,"j",function(){return E});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class d{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.b))}}function p(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const y=["ngOnDestroy"],m=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(y.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),g=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.m("angularfire2.app.options"),b=new u.m("angularfire2.app.nameOrConfig"),w=new u.F("6.1.4");function _(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&I("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const E=()=>{I("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},I=(t,...e)=>{Object(u.L)()&&"undefined"!=typeof console&&console[t](...e)};function O(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&I("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const T={provide:class{},useFactory:_,deps:[v,u.t,[new u.u,b]]};let S=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",w.full,t.toString()),c.a.registerVersion("angular",u.E.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.Ob(u.v))},t.\u0275mod=u.Ab({type:t}),t.\u0275inj=u.zb({providers:[T]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return m});var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class f extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const d=new f(l);var p=n("Y7HM");class y extends r.a{constructor(t,e=0,n=d){super(),this.source=t,this.delayTime=e,this.scheduler=n,(!Object(p.a)(e)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=d)}static create(t,e=0,n=d){return new y(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(y.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function m(t,e=0){return function(n){return n.lift(new g(t,e))}}class g{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new y(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q"),i=n("KqfI"),o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i.a,this._tapError=i.a,this._tapComplete=i.a,this._tapError=n||i.a,this._tapComplete=r||i.a,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i.a,this._tapError=e.error||i.a,this._tapComplete=e.complete||i.a)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";n.d(e,"a",function(){return p});var r=n("XNiG"),i=n("HDdC"),o=n("7o/Q"),s=n("quSY");function a(){return function(t){return t.lift(new u(t))}}class u{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new c(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class c extends o.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class l extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new s.a,t.add(this.source.subscribe(new f(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.a.EMPTY)),t}refCount(){return a()(this)}}const h=(()=>{const t=l.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class f extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function d(){return new r.a}function p(){return t=>{return a()((e=d,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,h);return r.source=t,r.subjectFactory=n,r})(t));var e}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),y=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.e)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e=f),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();y.prototype.name&&y.prototype.options||y.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.c)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.3.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!Object(s.c)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.f)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(y);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.f)(e,t)},createSubscribe:s.d,ErrorFactory:s.b,deepExtend:s.f}),e}(),g=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.h)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.m)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var w=m;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new g(t)},"PRIVATE")),t.registerVersion(h,"0.6.17",void 0),t.registerVersion("fire-js","")}(w),e.a=w},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");let i=null;function o(){return i}const s=new r.m("DocumentToken");var a=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const u=r.cb;class c{}let l=(()=>{class t extends c{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(u(e||this.locale)(t)){case a.Zero:return"zero";case a.One:return"one";case a.Two:return"two";case a.Few:return"few";case a.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(r.q))},t.\u0275prov=r.yb({token:t,factory:t.\u0275fac}),t})();function h(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}class f{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let d=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new f(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new p(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new p(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Cb(r.G),r.Cb(r.C),r.Cb(r.o))},t.\u0275dir=r.xb({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class p{constructor(t,e){this.record=t,this.view=e}}let y=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new m,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){g("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){g("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Cb(r.G),r.Cb(r.C))},t.\u0275dir=r.xb({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class m{constructor(){this.$implicit=null,this.ngIf=null}}function g(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.lb)(e)}'.`)}let v=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ab({type:t}),t.\u0275inj=r.zb({providers:[{provide:c,useClass:l}]}),t})();function b(t){return"server"===t}class w extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new w,i||(i=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=E||(E=document.querySelector("base"),E)?E.getAttribute("href"):null;return null==e?null:(n=e,_||(_=document.createElement("a")),_.setAttribute("href",n),"/"===_.pathname.charAt(0)?_.pathname:"/"+_.pathname);var n}resetBaseElement(){E=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return h(document.cookie,t)}}let _,E=null;const I=new r.m("TRANSITION_ID"),O=[{provide:r.b,useFactory:function(t,e,n){return()=>{n.get(r.c).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[I,s,r.n],multi:!0}];class T{static init(){Object(r.N)(new T)}addToWindow(t){r.eb.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.eb.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.eb.getAllAngularRootElements=()=>t.getAllRootElements(),r.eb.frameworkStabilizers||(r.eb.frameworkStabilizers=[]),r.eb.frameworkStabilizers.push(t=>{const e=r.eb.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const S=new r.m("EventManagerPlugins");let C=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(S),r.Ob(r.t))},t.\u0275prov=r.yb({token:t,factory:t.\u0275fac}),t})();class x{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let A=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.yb({token:t,factory:t.\u0275fac}),t})(),k=(()=>{class t extends A{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>o().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(s))},t.\u0275prov=r.yb({token:t,factory:t.\u0275fac}),t})();const D={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},j=/%COMP%/g;function N(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?N(t,i,n):(i=i.replace(j,t),n.push(i))}return n}function R(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let P=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new L(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.H.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new M(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.H.ShadowDom:return new F(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=N(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(C),r.Ob(k),r.Ob(r.a))},t.\u0275prov=r.yb({token:t,factory:t.\u0275fac}),t})();class L{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(D[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=D[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=D[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.z.DashCase|r.z.Important)?t.style.setProperty(e,n,i&r.z.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.z.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,R(n)):this.eventManager.addEventListener(t,e,R(n))}}class M extends L{constructor(t,e,n,r){super(t),this.component=n;const i=N(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(j,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(j,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class F extends L{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=N(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let V=(()=>{class t extends x{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(s))},t.\u0275prov=r.yb({token:t,factory:t.\u0275fac}),t})();const q=["alt","control","meta","shift"],U={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},B={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},H={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let z=(()=>{class t extends x{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(q.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&B.hasOwnProperty(e)&&(e=B[e]))}return U[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),q.forEach(r=>{r!=n&&(0,H[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(s))},t.\u0275prov=r.yb({token:t,factory:t.\u0275fac}),t})();const G=[{provide:r.v,useValue:"browser"},{provide:r.w,useValue:function(){w.makeCurrent(),T.init()},multi:!0},{provide:s,useFactory:function(){return Object(r.kb)(document),document},deps:[]}],K=Object(r.I)(r.M,"browser",G),W=[[],{provide:r.P,useValue:"root"},{provide:r.j,useFactory:function(){return new r.j},deps:[]},{provide:S,useClass:V,multi:!0,deps:[s,r.t,r.v]},{provide:S,useClass:z,multi:!0,deps:[s]},[],{provide:P,useClass:P,deps:[C,k,r.a]},{provide:r.y,useExisting:P},{provide:A,useExisting:k},{provide:k,useClass:k,deps:[s]},{provide:r.D,useClass:r.D,deps:[r.t]},{provide:C,useClass:C,deps:[S,r.t]},[]];let Q=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.a,useValue:e.appId},{provide:I,useExisting:r.a},O]}}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(t,12))},t.\u0275mod=r.Ab({type:t}),t.\u0275inj=r.zb({providers:W,imports:[v,r.d]}),t})();"undefined"!=typeof window&&window;var $=n("HDdC"),Y=n("LRne"),J=n("5+tZ"),X=n("7o/Q");function Z(t,e){return function(n){return n.lift(new tt(t,e))}}class tt{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new et(t,this.predicate,this.thisArg))}}class et extends X.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}var nt=n("lJxs");class rt{}class it{}class ot{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof ot?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new ot;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof ot?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class st{encodeKey(t){return at(t)}encodeValue(t){return at(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function at(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class ut{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new st,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(t=>{e.push({param:n,value:t,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new ut({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function ct(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function lt(t){return"undefined"!=typeof Blob&&t instanceof Blob}function ht(t){return"undefined"!=typeof FormData&&t instanceof FormData}class ft{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new ot),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new ut,this.urlWithParams=e}serializeBody(){return null===this.body?null:ct(this.body)||lt(this.body)||ht(this.body)||"string"==typeof this.body?this.body:this.body instanceof ut?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ht(this.body)?null:lt(this.body)?this.body.type||null:ct(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ut?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,u=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(u=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),u)),new ft(e,n,i,{params:u,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}var dt=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class pt{constructor(t,e=200,n="OK"){this.headers=t.headers||new ot,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class yt extends pt{constructor(t={}){super(t),this.type=dt.ResponseHeader}clone(t={}){return new yt({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class mt extends pt{constructor(t={}){super(t),this.type=dt.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new mt({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class gt extends pt{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function vt(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let bt=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof ft)r=t;else{let i,o;i=n.headers instanceof ot?n.headers:new ot(n.headers),n.params&&(o=n.params instanceof ut?n.params:new ut({fromObject:n.params})),r=new ft(t,e,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Object(Y.a)(r).pipe((o=t=>this.handler.handle(t),Object(J.a)(o,void 0,1)));var o;if(t instanceof ft||"events"===n.observe)return i;const s=i.pipe(Z(t=>t instanceof mt));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return s.pipe(Object(nt.a)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return s.pipe(Object(nt.a)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return s.pipe(Object(nt.a)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return s.pipe(Object(nt.a)(t=>t.body))}case"response":return s;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new ut).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,vt(n,e))}post(t,e,n={}){return this.request("POST",t,vt(n,e))}put(t,e,n={}){return this.request("PUT",t,vt(n,e))}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(rt))},t.\u0275prov=r.yb({token:t,factory:t.\u0275fac}),t})();class wt{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const _t=new r.m("HTTP_INTERCEPTORS");let Et=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.yb({token:t,factory:t.\u0275fac}),t})();const It=/^\)\]\}',?\n/;class Ot{}let Tt=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.yb({token:t,factory:t.\u0275fac}),t})(),St=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new $.a(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",o=new ot(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new yt({headers:o,status:e,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(It,"");try{u=""!==u?JSON.parse(u):null}catch(l){u=t,c&&(c=!1,u={error:l,text:u})}}c?(e.next(new mt({body:u,headers:r,status:i,statusText:s,url:a||void 0})),e.complete()):e.error(new gt({error:u,headers:r,status:i,statusText:s,url:a||void 0}))},a=t=>{const{url:r}=o(),i=new gt({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const c=r=>{u||(e.next(o()),u=!0);let i={type:dt.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},l=t=>{let n={type:dt.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),e.next({type:dt.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",s),n.removeEventListener("timeout",a),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(Ot))},t.\u0275prov=r.yb({token:t,factory:t.\u0275fac}),t})();const Ct=new r.m("XSRF_COOKIE_NAME"),xt=new r.m("XSRF_HEADER_NAME");class At{}let kt=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=h(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(s),r.Ob(r.v),r.Ob(Ct))},t.\u0275prov=r.yb({token:t,factory:t.\u0275fac}),t})(),Dt=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(At),r.Ob(xt))},t.\u0275prov=r.yb({token:t,factory:t.\u0275fac}),t})(),jt=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(_t,[]);this.chain=t.reduceRight((t,e)=>new wt(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(it),r.Ob(r.n))},t.\u0275prov=r.yb({token:t,factory:t.\u0275fac}),t})(),Nt=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:Dt,useClass:Et}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:Ct,useValue:e.cookieName}:[],e.headerName?{provide:xt,useValue:e.headerName}:[]]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ab({type:t}),t.\u0275inj=r.zb({providers:[Dt,{provide:_t,useExisting:Dt,multi:!0},{provide:At,useClass:kt},{provide:Ct,useValue:"XSRF-TOKEN"},{provide:xt,useValue:"X-XSRF-TOKEN"}]}),t})(),Rt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ab({type:t}),t.\u0275inj=r.zb({providers:[bt,{provide:rt,useClass:jt},St,{provide:it,useExisting:St},Tt,{provide:Ot,useExisting:Tt}],imports:[[Nt.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})();var Pt=n("D0XW"),Lt=n("Cfvw"),Mt=n("bHdf");function Ft(...t){return Object(Mt.a)(1)(Object(Y.a)(...t))}var Vt=n("z+Ro");function qt(...t){const e=t[t.length-1];return Object(Vt.a)(e)?(t.pop(),n=>Ft(t,n,e)):e=>Ft(t,e)}function Ut(){return t=>t.lift(new Bt)}class Bt{call(t,e){return e.subscribe(new Ht(t))}}class Ht extends X.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}function zt(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Gt(t,e,n))}}class Gt{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Kt(t,this.accumulator,this.seed,this.hasSeed))}}class Kt extends X.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}class Wt{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Qt(t,this.compare,this.keySelector))}}class Qt extends X.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var $t=n("pxpQ"),Yt=n("spgP"),Jt=n("Jgta"),Xt=n("zIRd"),Zt=n("q/0M"),te=n("qOnz"),ee=function(t,e){return(ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function ne(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var re,ie="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},oe=oe||{},se=ie||self;function ae(){}function ue(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function ce(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var le="closure_uid_"+(1e9*Math.random()>>>0),he=0;function fe(t,e,n){return t.call.apply(t.bind,arguments)}function de(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function pe(t,e,n){return(pe=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?fe:de).apply(null,arguments)}function ye(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function me(){return Date.now()}function ge(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function ve(){this.j=this.j,this.i=this.i}ve.prototype.j=!1,ve.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,le)&&t[le]||(t[le]=++he)}(this)},ve.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var be=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},we=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function _e(t){return Array.prototype.concat.apply([],arguments)}function Ee(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Ie(t){return/^[\s\xa0]*$/.test(t)}var Oe,Te=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Se(t,e){return-1!=t.indexOf(e)}function Ce(t,e){return t<e?-1:t>e?1:0}t:{var xe=se.navigator;if(xe){var Ae=xe.userAgent;if(Ae){Oe=Ae;break t}}Oe=""}function ke(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function De(t){var e={};for(var n in t)e[n]=t[n];return e}var je="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ne(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<je.length;o++)n=je[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Re(t){return Re[" "](t),t}Re[" "]=ae;var Pe,Le,Me=Se(Oe,"Opera"),Fe=Se(Oe,"Trident")||Se(Oe,"MSIE"),Ve=Se(Oe,"Edge"),qe=Ve||Fe,Ue=Se(Oe,"Gecko")&&!(Se(Oe.toLowerCase(),"webkit")&&!Se(Oe,"Edge"))&&!(Se(Oe,"Trident")||Se(Oe,"MSIE"))&&!Se(Oe,"Edge"),Be=Se(Oe.toLowerCase(),"webkit")&&!Se(Oe,"Edge");function He(){var t=se.document;return t?t.documentMode:void 0}t:{var ze="",Ge=(Le=Oe,Ue?/rv:([^\);]+)(\)|;)/.exec(Le):Ve?/Edge\/([\d\.]+)/.exec(Le):Fe?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Le):Be?/WebKit\/(\S+)/.exec(Le):Me?/(?:Version)[ \/]?(\S+)/.exec(Le):void 0);if(Ge&&(ze=Ge?Ge[1]:""),Fe){var Ke=He();if(null!=Ke&&Ke>parseFloat(ze)){Pe=String(Ke);break t}}Pe=ze}var We={};function Qe(t){return function(t,e){var n=We;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=Te(String(Pe)).split("."),r=Te(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Ce(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Ce(0==s[2].length,0==a[2].length)||Ce(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var $e=se.document&&Fe&&(He()||parseInt(Pe,10))||void 0,Ye=!Fe||9<=Number($e),Je=Fe&&!Qe("9"),Xe=function(){if(!se.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{se.addEventListener("test",ae,e),se.removeEventListener("test",ae,e)}catch(n){}return t}();function Ze(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function tn(t,e){if(Ze.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Ue){t:{try{Re(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:en[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Ze.prototype.b=function(){this.defaultPrevented=!0},ge(tn,Ze);var en={2:"touch",3:"pen",4:"mouse"};tn.prototype.b=function(){tn.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Je)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var nn="closure_listenable_"+(1e6*Math.random()|0),rn=0;function on(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++rn,this.Y=this.Z=!1}function sn(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function an(t){this.src=t,this.a={},this.b=0}function un(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=be(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(sn(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function cn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}an.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=cn(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new on(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var ln="closure_lm_"+(1e6*Math.random()|0),hn={};function fn(t,e,n,r,i){if(r&&r.once)return pn(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)fn(t,e[o],n,r,i);return null}return n=En(n),t&&t[nn]?t.va(e,n,ce(r)?!!r.capture:!!r,i):dn(t,e,n,!1,r,i)}function dn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=ce(i)?!!i.capture:!!i;if(s&&!Ye)return null;var a=wn(t);if(a||(t[ln]=a=new an(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=bn,e=Ye?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Xe||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(gn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function pn(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)pn(t,e[o],n,r,i);return null}return n=En(n),t&&t[nn]?t.wa(e,n,ce(r)?!!r.capture:!!r,i):dn(t,e,n,!0,r,i)}function yn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)yn(t,e[o],n,r,i);else r=ce(r)?!!r.capture:!!r,n=En(n),t&&t[nn]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=cn(o=t.a[e],n,r,i))&&(sn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=wn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=cn(e,n,r,i)),(n=-1<t?e[t]:null)&&mn(n))}function mn(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[nn])un(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(gn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=wn(e))?(un(n,t),0==n.b&&(n.src=null,e[ln]=null)):sn(t)}}}function gn(t){return t in hn?hn[t]:hn[t]="on"+t}function vn(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&mn(t),n.call(r,e)}function bn(t,e){if(t.Y)return!0;if(!Ye){if(!e)t:{e=["window","event"];for(var n=se,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return vn(t,e=new tn(e,this))}return vn(t,new tn(e,this))}function wn(t){return(t=t[ln])instanceof an?t:null}var _n="__closure_events_fn_"+(1e9*Math.random()>>>0);function En(t){return"function"==typeof t?t:(t[_n]||(t[_n]=function(e){return t.handleEvent(e)}),t[_n])}function In(){ve.call(this),this.c=new an(this),this.J=this,this.C=null}function On(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Ze(e,t);else if(e instanceof Ze)e.target=e.target||t;else{var i=e;Ne(e=new Ze(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Tn(s,r,!0,e)&&i}if(i=Tn(s=e.a=t,r,!0,e)&&i,i=Tn(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Tn(s=e.a=n[o],r,!1,e)&&i}function Tn(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&un(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}ge(In,ve),In.prototype[nn]=!0,(re=In.prototype).addEventListener=function(t,e,n,r){fn(this,t,e,n,r)},re.removeEventListener=function(t,e,n,r){yn(this,t,e,n,r)},re.G=function(){if(In.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)sn(n[r]);delete e.a[t],e.b--}}this.C=null},re.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},re.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Sn=se.JSON.stringify;function Cn(){this.b=this.a=null}var xn,An=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new Dn},function(t){t.reset()});function kn(){var t=Pn,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Dn(){this.next=this.b=this.a=null}function jn(t){se.setTimeout(function(){throw t},0)}function Nn(t,e){xn||function(){var t=se.Promise.resolve(void 0);xn=function(){t.then(Ln)}}(),Rn||(xn(),Rn=!0),Pn.add(t,e)}Cn.prototype.add=function(t,e){var n=An.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Dn.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Dn.prototype.reset=function(){this.next=this.b=this.a=null};var Rn=!1,Pn=new Cn;function Ln(){for(var t;t=kn();){try{t.a.call(t.b)}catch(n){jn(n)}var e=An;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Rn=!1}function Mn(t,e){In.call(this),this.b=t||1,this.a=e||se,this.f=pe(this.Za,this),this.g=me()}function Fn(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Vn(t,e,n){if("function"==typeof t)n&&(t=pe(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=pe(t.handleEvent,t)}return 2147483647<Number(e)?-1:se.setTimeout(t,e||0)}function qn(t){t.a=Vn(function(){t.a=null,t.c&&(t.c=!1,qn(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}ge(Mn,In),(re=Mn.prototype).aa=!1,re.M=null,re.Za=function(){if(this.aa){var t=me()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),On(this,"tick"),this.aa&&(Fn(this),this.start()))}},re.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=me())},re.G=function(){Mn.X.G.call(this),Fn(this),delete this.a};var Un=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}ee(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:qn(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(se.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(ve);function Bn(t){ve.call(this),this.b=t,this.a={}}ge(Bn,ve);var Hn=[];function zn(t,e,n,r){Array.isArray(n)||(n&&(Hn[0]=n.toString()),n=Hn);for(var i=0;i<n.length;i++){var o=fn(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Gn(t){ke(t.a,function(t,e){this.a.hasOwnProperty(e)&&mn(t)},t),t.a={}}function Kn(){this.a=!0}function Wn(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Sn(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}Bn.prototype.G=function(){Bn.X.G.call(this),Gn(this)},Bn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Kn.prototype.info=function(){};var Qn={},$n=null;function Yn(){return $n=$n||new In}function Jn(t){Ze.call(this,Qn.Fa,t)}function Xn(t){var e=Yn();On(e,new Jn(e,t))}function Zn(t,e){Ze.call(this,Qn.STAT_EVENT,t),this.stat=e}function tr(t){var e=Yn();On(e,new Zn(e,t))}function er(t){Ze.call(this,Qn.Ga,t)}function nr(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return se.setTimeout(function(){t()},e)}Qn.Fa="serverreachability",ge(Jn,Ze),Qn.STAT_EVENT="statevent",ge(Zn,Ze),Qn.Ga="timingevent",ge(er,Ze);var rr={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},ir={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function or(){}function sr(){}or.prototype.a=null;var ar,ur={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function cr(){Ze.call(this,"d")}function lr(){Ze.call(this,"c")}function hr(){}function fr(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Bn(this),this.P=dr,this.R=new Mn(t=qe?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}ge(cr,Ze),ge(lr,Ze),ge(hr,or),ar=new hr;var dr=45e3,pr={},yr={};function mr(t,e,n){t.H=1,t.i=Fr(jr(e)),t.j=n,t.I=!0,gr(t,null)}function gr(t,e){t.u=me(),wr(t),t.l=jr(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Jr(n.b,"t",r),t.D=0,t.a=Gi(t.g,t.g.C?e:null),0<t.O&&(t.F=new Un(pe(t.Ca,t,t.a),t.O)),zn(t.J,t.a,"readystatechange",t.Xa),e=t.B?De(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Xn(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function vr(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=br(t,n);if(i==yr){4==e&&(t.h=4,tr(14),r=!1),Wn(t.c,t.f,null,"[Incomplete Response]");break}if(i==pr){t.h=4,tr(15),Wn(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Wn(t.c,t.f,i,null),Tr(t,i)}4==e&&0==n.length&&(t.h=1,tr(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Mi(e),e.F=!0,tr(11))):(Wn(t.c,t.f,n,"[Invalid Chunked Response]"),Or(t),Ir(t))}function br(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?yr:(n=Number(e.substring(n,r)),isNaN(n)?pr:(r+=1)+n>e.length?yr:(e=e.substr(r,n),t.D=r+n,e))}function wr(t){t.T=me()+t.P,_r(t,t.P)}function _r(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=nr(pe(t.Va,t),e)}function Er(t){t.o&&(se.clearTimeout(t.o),t.o=null)}function Ir(t){0==t.g.v||t.A||qi(t.g,t)}function Or(t){Er(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Fn(t.R),Gn(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Tr(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||ii(n.b,t)))if(n.I=t.N,!t.C&&ii(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(kp){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Vi(n),xi(n)}Li(n),tr(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=nr(pe(n.Sa,n),6e3));if(1>=ri(n.b)&&n.ea){try{n.ea()}catch(kp){}n.ea=void 0}}else Bi(n,11)}else if((t.C||n.a==t)&&Vi(n),!Ie(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(Se(l,"spdy")||Se(l,"quic")||Se(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(oi(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,Mr(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=me()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=zi(u,u.C?u.ga:null,u.fa),d.C){si(u.b,d);var p=d,y=u.D;y&&p.setTimeout(y),p.o&&(Er(p),wr(p)),u.a=d}else Pi(u);0<n.g.length&&Di(n)}else"stop"!=i[0]&&"close"!=i[0]||Bi(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Bi(n,7):Ci(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Xn(4)}catch(kp){}}function Sr(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(ue(t)||"string"==typeof t)we(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(ue(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(ue(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Cr(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Cr)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function xr(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ar(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Ar(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Ar(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(re=fr.prototype).setTimeout=function(t){this.P=t},re.Xa=function(t){t=t.target;var e=this.F;e&&3==Ii(t)?e.f():this.Ca(t)},re.Ca=function(t){try{if(t==this.a)t:{var e=Ii(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!qe&&!this.a.$())){this.A||4!=e||7==n||Xn(8==n||0>=r?3:2),Er(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ie(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,tr(12),Or(this),Ir(this);break t}Wn(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Tr(this,u)}this.I?(vr(this,e,o),qe&&this.b&&3==e&&(zn(this.J,this.R,"tick",this.Wa),this.R.start())):(Wn(this.c,this.f,o,null),Tr(this,o)),4==e&&Or(this),this.b&&!this.A&&(4==e?qi(this.g,this):(this.b=!1,wr(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,tr(12)):(this.h=0,tr(13)),Or(this),Ir(this)}}}catch(c){}},re.Wa=function(){if(this.a){var t=Ii(this.a),e=this.a.$();this.D<e.length&&(Er(this),vr(this,t,e),this.b&&4!=t&&wr(this))}},re.cancel=function(){this.A=!0,Or(this)},re.Va=function(){this.o=null;var t=me();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(Xn(3),tr(17)),Or(this),this.h=2,Ir(this)):_r(this,this.T-t)},(re=Cr.prototype).K=function(){xr(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},re.L=function(){return xr(this),this.a.concat()},re.get=function(t,e){return Ar(this.b,t)?this.b[t]:e},re.set=function(t,e){Ar(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},re.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var kr=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Dr(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Dr){this.a=void 0!==e?e:t.a,Nr(this,t.f),this.j=t.j,Rr(this,t.c),Pr(this,t.h),this.g=t.g,e=t.b;var n=new Wr;n.c=e.c,e.a&&(n.a=new Cr(e.a),n.b=e.b),Lr(this,n),this.i=t.i}else t&&(n=String(t).match(kr))?(this.a=!!e,Nr(this,n[1]||"",!0),this.j=Vr(n[2]||""),Rr(this,n[3]||"",!0),Pr(this,n[4]),this.g=Vr(n[5]||"",!0),Lr(this,n[6]||"",!0),this.i=Vr(n[7]||"")):(this.a=!!e,this.b=new Wr(null,this.a))}function jr(t){return new Dr(t)}function Nr(t,e,n){t.f=n?Vr(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Rr(t,e,n){t.c=n?Vr(e,!0):e}function Pr(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Lr(t,e,n){e instanceof Wr?(t.b=e,function(t,e){e&&!t.f&&(Qr(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&($r(this,e),Jr(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=qr(e,Gr)),t.b=new Wr(e,t.a))}function Mr(t,e,n){t.b.set(e,n)}function Fr(t){return Mr(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^me()).toString(36)),t}function Vr(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qr(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ur),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ur(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Dr.prototype.toString=function(){var t=[],e=this.f;e&&t.push(qr(e,Br,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(qr(e,Br,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(qr(n,"/"==n.charAt(0)?zr:Hr,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",qr(n,Kr)),t.join("")};var Br=/[#\/\?@]/g,Hr=/[#\?:]/g,zr=/[#\?]/g,Gr=/[#\?@]/g,Kr=/#/g;function Wr(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Qr(t){t.a||(t.a=new Cr,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function $r(t,e){Qr(t),e=Xr(t,e),Ar(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ar((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&xr(t)))}function Yr(t,e){return Qr(t),e=Xr(t,e),Ar(t.a.b,e)}function Jr(t,e,n){$r(t,e),0<n.length&&(t.c=null,t.a.set(Xr(t,e),Ee(n)),t.b+=n.length)}function Xr(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(re=Wr.prototype).add=function(t,e){Qr(this),this.c=null,t=Xr(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},re.forEach=function(t,e){Qr(this),this.a.forEach(function(n,r){we(n,function(n){t.call(e,n,r,this)},this)},this)},re.L=function(){Qr(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},re.K=function(t){Qr(this);var e=[];if("string"==typeof t)Yr(this,t)&&(e=_e(e,this.a.get(Xr(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=_e(e,t[n])}return e},re.set=function(t,e){return Qr(this),this.c=null,Yr(this,t=Xr(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},re.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},re.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Zr=function(){return function(t,e){this.b=t,this.a=e}}();function ti(t){this.g=t||ei,t=se.PerformanceNavigationTiming?0<(t=se.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(se.ia&&se.ia.ya&&se.ia.ya()&&se.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var ei=10;function ni(t){return!!t.b||!!t.a&&t.a.size>=t.f}function ri(t){return t.b?1:t.a?t.a.size:0}function ii(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function oi(t,e){t.a?t.a.add(e):t.b=e}function si(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function ai(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=ne(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Ee(t.c)}function ui(){}function ci(){this.a=new ui}function li(t,e,n){var r=n||"";try{Sr(t,function(t,n){var i=t;ce(t)&&(i=Sn(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(gy){throw e.push(r+"type="+encodeURIComponent("_badmap")),gy}}function hi(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}ti.prototype.cancel=function(){var t,e;if(this.c=ai(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=ne(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},ui.prototype.stringify=function(t){return se.JSON.stringify(t,void 0)},ui.prototype.parse=function(t){return se.JSON.parse(t,void 0)};var fi=se.JSON.parse;function di(t){In.call(this),this.headers=new Cr,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=pi,this.D=this.F=!1}ge(di,In);var pi="",yi=/^https?$/i,mi=["POST","PUT"];function gi(t){return"content-type"==t.toLowerCase()}function vi(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,bi(t),_i(t)}function bi(t){t.u||(t.u=!0,On(t,"complete"),On(t,"error"))}function wi(t){if(t.b&&void 0!==oe&&(!t.s[1]||4!=Ii(t)||2!=t.W()))if(t.l&&4==Ii(t))Vn(t.za,0,t);else if(On(t,"readystatechange"),4==Ii(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(kr)[1]||null;if(!o&&se.self&&se.self.location){var s=se.self.location.protocol;o=s.substr(0,s.length-1)}i=!yi.test(o?o.toLowerCase():"")}e=i}if(e)On(t,"complete"),On(t,"success");else{t.h=6;try{var a=2<Ii(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",bi(t)}}finally{_i(t)}}}function _i(t,e){if(t.a){Ei(t);var n=t.a,r=t.s[0]?ae:null;t.a=null,t.s=null,e||On(t,"ready");try{n.onreadystatechange=r}catch(gy){}}}function Ei(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(se.clearTimeout(t.m),t.m=null)}function Ii(t){return t.a?t.a.readyState:0}function Oi(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return ke(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Mr(t,e,n))}function Ti(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Si(t){this.pa=0,this.g=[],this.c=new Kn,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Ti("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Ti("baseRetryDelayMs",5e3,t),this.Ra=Ti("retryDelaySeedMs",1e4,t),this.Ma=Ti("forwardChannelMaxRetries",2,t),this.ma=Ti("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new ti(t&&t.concurrentRequestLimit),this.ka=new ci,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Ci(t){if(Ai(t),3==t.v){var e=t.R++,n=jr(t.B);Mr(n,"SID",t.J),Mr(n,"RID",e),Mr(n,"TYPE","terminate"),Ni(t,n),(e=new fr(t,t.c,e,void 0)).H=2,e.i=Fr(jr(n)),n=!1,se.navigator&&se.navigator.sendBeacon&&(n=se.navigator.sendBeacon(e.i.toString(),"")),!n&&se.Image&&((new Image).src=e.i,n=!0),n||(e.a=Gi(e.g,null),e.a.ba(e.i)),e.u=me(),wr(e)}Hi(t)}function xi(t){t.a&&(Mi(t),t.a.cancel(),t.a=null)}function Ai(t){xi(t),t.j&&(se.clearTimeout(t.j),t.j=null),Vi(t),t.b.cancel(),t.h&&("number"==typeof t.h&&se.clearTimeout(t.h),t.h=null)}function ki(t,e){t.g.push(new Zr(t.Oa++,e)),3==t.v&&Di(t)}function Di(t){ni(t.b)||t.h||(t.h=!0,Nn(t.Ba,t),t.u=0)}function ji(t,e){var n;n=e?e.f:t.R++;var r=jr(t.B);Mr(r,"SID",t.J),Mr(r,"RID",n),Mr(r,"AID",t.P),Ni(t,r),t.i&&t.l&&Oi(r,t.i,t.l),n=new fr(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Ri(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),oi(t.b,n),mr(n,r,e)}function Ni(t,e){t.f&&Sr({},function(t,n){Mr(e,n,t)})}function Ri(t,e,n){n=Math.min(t.g.length,n);var r=t.f?pe(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{li(l,s,"req"+c+"_")}catch(To){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Pi(t){t.a||t.j||(t.T=1,Nn(t.Aa,t),t.o=0)}function Li(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=nr(pe(t.Aa,t),Ui(t,t.o)),t.o++,0))}function Mi(t){null!=t.s&&(se.clearTimeout(t.s),t.s=null)}function Fi(t){t.a=new fr(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=jr(t.la);Mr(e,"RID","rpc"),Mr(e,"SID",t.J),Mr(e,"CI",t.H?"0":"1"),Mr(e,"AID",t.P),Ni(t,e),Mr(e,"TYPE","xmlhttp"),t.i&&t.l&&Oi(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Fr(jr(e)),n.j=null,n.I=!0,gr(n,t)}function Vi(t){null!=t.m&&(se.clearTimeout(t.m),t.m=null)}function qi(t,e){var n=null;if(t.a==e){Vi(t),Mi(t),t.a=null;var r=2}else{if(!ii(t.b,e))return;n=e.s,si(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=me()-e.u;var i=t.u;On(r=Yn(),new er(r,n,e,i)),Di(t)}else Pi(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(ri(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=nr(pe(t.Ba,t,e),Ui(t,t.u)),t.u++,0)))}(t,e)||2==r&&Li(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Bi(t,5);break;case 4:Bi(t,10);break;case 3:Bi(t,6);break;default:Bi(t,2)}}function Ui(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Bi(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=pe(t.Ya,t);n||(n=new Dr("//www.google.com/images/cleardot.gif"),se.location&&"http"==se.location.protocol||Nr(n,"https"),Fr(n)),function(t,e){var n=new Kn;if(se.Image){var r=new Image;r.onload=ye(hi,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ye(hi,n,r,"TestLoadImage: error",!1,e),r.onabort=ye(hi,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ye(hi,n,r,"TestLoadImage: timeout",!1,e),se.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else tr(2);t.v=0,t.f&&t.f.ra(e),Hi(t),Ai(t)}function Hi(t){t.v=0,t.I=-1,t.f&&(0==ai(t.b).length&&0==t.g.length||(t.b.c.length=0,Ee(t.g),t.g.length=0),t.f.qa())}function zi(t,e,n){var r=function(t){return t instanceof Dr?jr(t):new Dr(t,void 0)}(n);if(""!=r.c)e&&Rr(r,e+"."+r.c),Pr(r,r.h);else{var i=se.location;r=function(t,e,n,r){var i=new Dr(null,void 0);return t&&Nr(i,t),e&&Rr(i,e),n&&Pr(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&ke(t.V,function(t,e){Mr(r,e,t)}),n=t.na,(e=t.A)&&n&&Mr(r,e,n),Mr(r,"VER",t.ha),Ni(t,r),r}function Gi(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new di(t.Na)).F=t.C,e}function Ki(){}function Wi(){if(Fe&&!(10<=Number($e)))throw Error("Environmental error: no available transport.")}function Qi(t,e){In.call(this),this.a=new Si(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Ie(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ie(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Ji(this)}function $i(t){cr.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Yi(){lr.call(this),this.status=1}function Ji(t){this.a=t}(re=di.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:ar),this.a.onreadystatechange=pe(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void vi(this,o)}t=n||"";var i=new Cr(this.headers);r&&Sr(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=gi,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=se.FormData&&t instanceof se.FormData,!(0<=be(mi,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Ei(this),0<this.o&&((this.D=function(t){return Fe&&Qe(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=pe(this.xa,this)):this.m=Vn(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){vi(this,o)}},re.xa=function(){void 0!==oe&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,On(this,"timeout"),this.abort(8))},re.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,On(this,"complete"),On(this,"abort"),_i(this))},re.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),_i(this,!0)),di.X.G.call(this)},re.za=function(){this.j||(this.A||this.l||this.g?wi(this):this.Ua())},re.Ua=function(){wi(this)},re.W=function(){try{return 2<Ii(this)?this.a.status:-1}catch(Le){return-1}},re.$=function(){try{return this.a?this.a.responseText:""}catch(Le){return""}},re.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),fi(e)}},re.ua=function(){return this.h},re.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(re=Si.prototype).ha=8,re.v=1,re.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new fr(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Ne(r=De(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Ri(this,n,e),Mr(i=jr(this.B),"RID",t),Mr(i,"CVER",22),this.A&&Mr(i,"X-HTTP-Session-Id",this.A),Ni(this,i),this.i&&r&&Oi(i,this.i,r),oi(this.b,n),this.Ia&&Mr(i,"TYPE","init"),this.da?(Mr(i,"$req",e),Mr(i,"SID","null"),n.U=!0,mr(n,i,null)):mr(n,i,e),this.v=2}}else 3==this.v&&(t?ji(this,t):0==this.g.length||ni(this.b)||ji(this))},re.Aa=function(){if(this.j=null,Fi(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=nr(pe(this.Ta,this),t)}},re.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,tr(10),xi(this),Fi(this))},re.Sa=function(){null!=this.m&&(this.m=null,xi(this),Li(this),tr(19))},re.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),tr(2)):(this.c.info("Failed to ping google.com"),tr(1))},(re=Ki.prototype).ta=function(){},re.sa=function(){},re.ra=function(){},re.qa=function(){},re.Ja=function(){},Wi.prototype.a=function(t,e){return new Qi(t,e)},ge(Qi,In),Qi.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;tr(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=zi(t,null,t.fa),Di(t)},Qi.prototype.close=function(){Ci(this.a)},Qi.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,ki(this.a,e)}else this.l?((e={}).__data__=Sn(t),ki(this.a,e)):ki(this.a,t)},Qi.prototype.G=function(){this.a.f=null,delete this.f,Ci(this.a),delete this.a,Qi.X.G.call(this)},ge($i,cr),ge(Yi,lr),ge(Ji,Ki),Ji.prototype.ta=function(){On(this.a,"a")},Ji.prototype.sa=function(t){On(this.a,new $i(t))},Ji.prototype.ra=function(t){On(this.a,new Yi(t))},Ji.prototype.qa=function(){On(this.a,"b")},Wi.prototype.createWebChannel=Wi.prototype.a,Qi.prototype.send=Qi.prototype.h,Qi.prototype.open=Qi.prototype.g,Qi.prototype.close=Qi.prototype.close,rr.NO_ERROR=0,rr.TIMEOUT=8,rr.HTTP_ERROR=6,ir.COMPLETE="complete",sr.EventType=ur,ur.OPEN="a",ur.CLOSE="b",ur.ERROR="c",ur.MESSAGE="d",In.prototype.listen=In.prototype.va,di.prototype.listenOnce=di.prototype.wa,di.prototype.getLastError=di.prototype.Qa,di.prototype.getLastErrorCode=di.prototype.ua,di.prototype.getStatus=di.prototype.W,di.prototype.getResponseJson=di.prototype.Pa,di.prototype.getResponseText=di.prototype.$,di.prototype.send=di.prototype.ba;var Xi=rr,Zi=ir,to=Qn,eo=sr,no=di,ro=n("mrSG"),io=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();io.o=-1;var oo=new Zt.b("@firebase/firestore");function so(){return oo.logLevel}function ao(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(oo.logLevel<=Zt.a.DEBUG){var r=e.map(lo);oo.debug.apply(oo,Object(ro.f)(["Firestore (8.3.1): "+t],r))}}function uo(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(oo.logLevel<=Zt.a.ERROR){var r=e.map(lo);oo.error.apply(oo,Object(ro.f)(["Firestore (8.3.1): "+t],r))}}function co(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(oo.logLevel<=Zt.a.WARN){var r=e.map(lo);oo.warn.apply(oo,Object(ro.f)(["Firestore (8.3.1): "+t],r))}}function lo(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(gy){return t}}function ho(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.3.1) INTERNAL ASSERTION FAILED: "+t;throw uo(e),new Error(e)}function fo(t,e){t||ho()}function po(t,e){return t}function yo(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var mo=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=yo(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function go(t,e){return t<e?-1:t>e?1:0}function vo(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function bo(t){return t+"\0"}function wo(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function _o(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Eo(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Io(t){return null==t}function Oo(t){return 0===t&&1/t==-1/0}function To(t){return"number"==typeof t&&Number.isInteger(t)&&!Oo(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var So={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Co=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(ro.c)(e,t),e}(Error),xo=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&ho(),void 0===n?n=t.length-e:n>t.length-e&&ho(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Ao=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ro.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Co(So.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(xo),ko=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Do=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ro.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return ko.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Co(So.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Co(So.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Co(So.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Co(So.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(xo),jo=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Ao.fromString(e))},t.fromName=function(e){return new t(Ao.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Ao.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Ao.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Ao(e.slice()))},t}(),No=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return go(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();No.EMPTY_BYTE_STRING=new No("");var Ro=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Po(t){if(fo(!!t),"string"==typeof t){var e=0,n=Ro.exec(t);if(fo(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Lo(t.seconds),nanos:Lo(t.nanos)}}function Lo(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Mo(t){return"string"==typeof t?No.fromBase64String(t):No.fromUint8Array(t)}var Fo=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Co(So.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Co(So.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Co(So.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Co(So.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?go(this.nanoseconds,t.nanoseconds):go(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}();function Vo(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function qo(t){var e=t.mapValue.fields.__previous_value__;return Vo(e)?qo(e):e}function Uo(t){var e=Po(t.mapValue.fields.__local_write_time__.timestampValue);return new Fo(e.seconds,e.nanos)}function Bo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Vo(t)?4:10:ho()}function Ho(t,e){var n=Bo(t);if(n!==Bo(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Uo(t).isEqual(Uo(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Po(t.timestampValue),r=Po(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Mo(t.bytesValue).isEqual(Mo(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Lo(t.geoPointValue.latitude)===Lo(e.geoPointValue.latitude)&&Lo(t.geoPointValue.longitude)===Lo(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Lo(t.integerValue)===Lo(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Lo(t.doubleValue),r=Lo(e.doubleValue);return n===r?Oo(n)===Oo(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return vo(t.arrayValue.values||[],e.arrayValue.values||[],Ho);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(wo(n)!==wo(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ho(n[i],r[i])))return!1;return!0}(t,e);default:return ho()}}function zo(t,e){return void 0!==(t.values||[]).find(function(t){return Ho(t,e)})}function Go(t,e){var n=Bo(t),r=Bo(e);if(n!==r)return go(n,r);switch(n){case 0:return 0;case 1:return go(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Lo(t.integerValue||t.doubleValue),r=Lo(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Ko(t.timestampValue,e.timestampValue);case 4:return Ko(Uo(t),Uo(e));case 5:return go(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Mo(t),r=Mo(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=go(n[i],r[i]);if(0!==o)return o}return go(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=go(Lo(t.latitude),Lo(e.latitude));return 0!==n?n:go(Lo(t.longitude),Lo(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Go(n[i],r[i]);if(o)return o}return go(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=go(r[s],o[s]);if(0!==a)return a;var u=Go(n[r[s]],i[o[s]]);if(0!==u)return u}return go(r.length,o.length)}(t.mapValue,e.mapValue);default:throw ho()}}function Ko(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return go(t,e);var n=Po(t),r=Po(e),i=go(n.seconds,r.seconds);return 0!==i?i:go(n.nanos,r.nanos)}function Wo(t){return Qo(t)}function Qo(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Po(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Mo(t.bytesValue).toBase64():"referenceValue"in t?jo.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Qo(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Qo(t.fields[o])}return e+"}"}(t.mapValue):ho();var e}function $o(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Yo(t){return!!t&&"integerValue"in t}function Jo(t){return!!t&&"arrayValue"in t}function Xo(t){return!!t&&"nullValue"in t}function Zo(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ts(t){return!!t&&"mapValue"in t}var es=function(t,e){this.key=t,this.version=e},ns=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).objectValue=r,o.hasLocalMutations=!!i.hasLocalMutations,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(ro.c)(e,t),e.prototype.field=function(t){return this.objectValue.field(t)},e.prototype.data=function(){return this.objectValue},e.prototype.toProto=function(){return this.objectValue.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations&&this.objectValue.isEqual(t.objectValue)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.objectValue.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(es),rs=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(ro.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(es),is=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ro.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(es),os=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function ss(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new os(t,e,n,r,i,o,s)}function as(t){var e=po(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Wo(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),Io(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=ws(e.startAt)),e.endAt&&(n+="|ub:",n+=ws(e.endAt)),e.h=n}return e.h}function us(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Es(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Ho(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Os(t.startAt,e.startAt)&&Os(t.endAt,e.endAt)}function cs(t){return jo.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var ls=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(ro.c)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new hs(t,n,r):"array-contains"===n?new ys(t,r):"in"===n?new ms(t,r):"not-in"===n?new gs(t,r):"array-contains-any"===n?new vs(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new fs(t,n):new ds(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.m(Go(e,this.value)):null!==e&&Bo(this.value)===Bo(e)&&this.m(Go(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return ho()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),hs=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=jo.fromName(r.referenceValue),i}return Object(ro.c)(e,t),e.prototype.matches=function(t){var e=jo.comparator(t.key,this.key);return this.m(e)},e}(ls),fs=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=ps(0,n),r}return Object(ro.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(ls),ds=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=ps(0,n),r}return Object(ro.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(ls);function ps(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return jo.fromName(t.referenceValue)})}var ys=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(ro.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return Jo(e)&&zo(e.arrayValue,this.value)},e}(ls),ms=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(ro.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&zo(this.value.arrayValue,e)},e}(ls),gs=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(ro.c)(e,t),e.prototype.matches=function(t){if(zo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!zo(this.value.arrayValue,e)},e}(ls),vs=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(ro.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Jo(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return zo(e.value.arrayValue,t)})},e}(ls),bs=function(t,e){this.position=t,this.before=e};function ws(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return Wo(t)}).join(",")}var _s=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Es(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Is(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?jo.comparator(jo.fromName(s.referenceValue),n.key):Go(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Os(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Ho(t.position[n],e.position[n]))return!1;return!0}var Ts=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function Ss(t,e,n,r,i,o,s,a){return new Ts(t,e,n,r,i,o,s,a)}function Cs(t){return new Ts(t)}function xs(t){return!Io(t.limit)&&"F"===t.limitType}function As(t){return!Io(t.limit)&&"L"===t.limitType}function ks(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Ds(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function js(t){return null!==t.collectionGroup}function Ns(t){var e=po(t);if(null===e.p){e.p=[];var n=Ds(e),r=ks(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new _s(n)),e.p.push(new _s(Do.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new _s(Do.keyField(),u))}}}return e.p}function Rs(t){var e=po(t);if(!e.T)if("F"===e.limitType)e.T=ss(e.path,e.collectionGroup,Ns(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Ns(e);r<i.length;r++){var o=i[r];n.push(new _s(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new bs(e.endAt.position,!e.endAt.before):null,a=e.startAt?new bs(e.startAt.position,!e.startAt.before):null;e.T=ss(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function Ps(t,e,n){return new Ts(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ls(t,e){return us(Rs(t),Rs(e))&&t.limitType===e.limitType}function Ms(t){return as(Rs(t))+"|lt:"+t.limitType}function Fs(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Wo(e.value);var e}).join(", ")+"]"),Io(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+ws(t.startAt)),t.endAt&&(e+=", endAt: "+ws(t.endAt)),"Target("+e+")"}(Rs(t))+"; limitType="+t.limitType+")"}function Vs(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):jo.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Is(t.startAt,Ns(t),e)||t.endAt&&Is(t.endAt,Ns(t),e))}(t,e)}function qs(t){return function(e,n){for(var r=!1,i=0,o=Ns(t);i<o.length;i++){var s=o[i],a=Us(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function Us(t,e,n){var r=t.field.isKeyField()?jo.comparator(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Go(r,i):ho()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ho()}}var Bs=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Fo(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}(),Hs=function(){function t(t){this.fields=t,t.sort(Do.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return vo(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),zs=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!ts(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.isEqual=function(t){return Ho(this.proto,t.proto)},t}(),Gs=function(){function t(t){void 0===t&&(t=zs.empty()),this.I=t,this.A=new Map}return t.prototype.set=function(t,e){return this.R(t,e),this},t.prototype.delete=function(t){return this.R(t,null),this},t.prototype.R=function(t,e){for(var n=this.A,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Bo(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.v=function(){var t=this.P(Do.emptyPath(),this.A);return null!=t?new zs(t):this.I},t.prototype.P=function(t,e){var n=this,r=!1,i=this.I.field(t),o=ts(i)?Object.assign({},i.mapValue.fields):{};return e.forEach(function(e,i){if(e instanceof Map){var s=n.P(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)}),r?{mapValue:{fields:o}}:null},t}();function Ks(t){var e=[];return _o(t.fields||{},function(t,n){var r=new Do([t]);if(ts(n)){var i=Ks(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new Hs(e)}function Ws(t,e){if(t.V){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Oo(e)?"-0":e}}function Qs(t){return{integerValue:""+t}}function $s(t,e){return To(e)?Qs(e):Ws(t,e)}var Ys=function(){this._=void 0};function Js(t,e,n){return t instanceof ta?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof ea?na(t,e):t instanceof ra?ia(t,e):function(t,e){var n=Zs(t,e),r=sa(n)+sa(t.S);return Yo(n)&&Yo(t.S)?Qs(r):Ws(t.D,r)}(t,e)}function Xs(t,e,n){return t instanceof ea?na(t,e):t instanceof ra?ia(t,e):n}function Zs(t,e){return t instanceof oa?Yo(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var ta=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ro.c)(e,t),e}(Ys),ea=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(ro.c)(e,t),e}(Ys);function na(t,e){for(var n=aa(e),r=function(t){n.some(function(e){return Ho(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ra=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(ro.c)(e,t),e}(Ys);function ia(t,e){for(var n=aa(e),r=function(t){n=n.filter(function(e){return!Ho(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var oa=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).D=e,r.S=n,r}return Object(ro.c)(e,t),e}(Ys);function sa(t){return Lo(t.integerValue||t.doubleValue)}function aa(t){return Jo(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var ua=function(t,e){this.field=t,this.transform=e},ca=function(t,e){this.version=t,this.transformResults=e},la=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function ha(t,e){return void 0!==t.updateTime?e instanceof ns&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof ns}var fa=function(){};function da(t,e,n){return t instanceof va?function(t,e,n){var r=t.value,i=_a(t.fieldTransforms,e,n.transformResults);return r=Ia(t.fieldTransforms,r,i),new ns(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof ba?function(t,e,n){if(!ha(t.precondition,e))return new is(t.key,n.version);var r=wa(t,e,_a(t.fieldTransforms,e,n.transformResults));return new ns(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new rs(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function pa(t,e,n){return t instanceof va?function(t,e,n){if(!ha(t.precondition,e))return e;var r=t.value,i=Ea(t.fieldTransforms,n,e);r=Ia(t.fieldTransforms,r,i);var o=ga(e);return new ns(t.key,o,r,{hasLocalMutations:!0})}(t,e,n):t instanceof ba?function(t,e,n){if(!ha(t.precondition,e))return e;var r=ga(e),i=wa(t,e,Ea(t.fieldTransforms,n,e));return new ns(t.key,r,i,{hasLocalMutations:!0})}(t,e,n):function(t,e){return ha(t.precondition,e)?new rs(t.key,Bs.min()):e}(t,e)}function ya(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof ns?e.field(o.field):void 0,a=Zs(o.transform,s||null);null!=a&&(n=null==n?(new Gs).set(o.field,a):n.set(o.field,a))}return n?n.v():null}(t.fieldTransforms,e)}function ma(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&vo(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof ea&&e instanceof ea||t instanceof ra&&e instanceof ra?vo(t.elements,e.elements,Ho):t instanceof oa&&e instanceof oa?Ho(t.S,e.S):t instanceof ta&&e instanceof ta}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function ga(t){return t instanceof ns?t.version:Bs.min()}var va=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(ro.c)(e,t),e}(fa),ba=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(ro.c)(e,t),e}(fa);function wa(t,e,n){var r;return r=function(t,e){var n=new Gs(e);return t.fieldMask.fields.forEach(function(e){if(!e.isEmpty()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}}),n.v()}(t,r=e instanceof ns?e.data():zs.empty()),Ia(t.fieldTransforms,r,n)}function _a(t,e,n){var r=[];fo(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof ns&&(a=e.field(o.field)),r.push(Xs(s,a,n[i]))}return r}function Ea(t,e,n){for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=null;n instanceof ns&&(u=n.field(s.field)),r.push(Js(a,u,e))}return r}function Ia(t,e,n){for(var r=new Gs(e),i=0;i<t.length;i++)r.set(t[i].field,n[i]);return r.v()}var Oa,Ta,Sa=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(ro.c)(e,t),e}(fa),Ca=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(ro.c)(e,t),e}(fa),xa=function(t){this.count=t};function Aa(t){switch(t){case So.OK:return ho();case So.CANCELLED:case So.UNKNOWN:case So.DEADLINE_EXCEEDED:case So.RESOURCE_EXHAUSTED:case So.INTERNAL:case So.UNAVAILABLE:case So.UNAUTHENTICATED:return!1;case So.INVALID_ARGUMENT:case So.NOT_FOUND:case So.ALREADY_EXISTS:case So.PERMISSION_DENIED:case So.FAILED_PRECONDITION:case So.ABORTED:case So.OUT_OF_RANGE:case So.UNIMPLEMENTED:case So.DATA_LOSS:return!0;default:return ho()}}function ka(t){if(void 0===t)return uo("GRPC error has no .code"),So.UNKNOWN;switch(t){case Oa.OK:return So.OK;case Oa.CANCELLED:return So.CANCELLED;case Oa.UNKNOWN:return So.UNKNOWN;case Oa.DEADLINE_EXCEEDED:return So.DEADLINE_EXCEEDED;case Oa.RESOURCE_EXHAUSTED:return So.RESOURCE_EXHAUSTED;case Oa.INTERNAL:return So.INTERNAL;case Oa.UNAVAILABLE:return So.UNAVAILABLE;case Oa.UNAUTHENTICATED:return So.UNAUTHENTICATED;case Oa.INVALID_ARGUMENT:return So.INVALID_ARGUMENT;case Oa.NOT_FOUND:return So.NOT_FOUND;case Oa.ALREADY_EXISTS:return So.ALREADY_EXISTS;case Oa.PERMISSION_DENIED:return So.PERMISSION_DENIED;case Oa.FAILED_PRECONDITION:return So.FAILED_PRECONDITION;case Oa.ABORTED:return So.ABORTED;case Oa.OUT_OF_RANGE:return So.OUT_OF_RANGE;case Oa.UNIMPLEMENTED:return So.UNIMPLEMENTED;case Oa.DATA_LOSS:return So.DATA_LOSS;default:return ho()}}(Ta=Oa||(Oa={}))[Ta.OK=0]="OK",Ta[Ta.CANCELLED=1]="CANCELLED",Ta[Ta.UNKNOWN=2]="UNKNOWN",Ta[Ta.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ta[Ta.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ta[Ta.NOT_FOUND=5]="NOT_FOUND",Ta[Ta.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ta[Ta.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ta[Ta.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ta[Ta.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ta[Ta.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ta[Ta.ABORTED=10]="ABORTED",Ta[Ta.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ta[Ta.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ta[Ta.INTERNAL=13]="INTERNAL",Ta[Ta.UNAVAILABLE=14]="UNAVAILABLE",Ta[Ta.DATA_LOSS=15]="DATA_LOSS";var Da=function(){function t(t,e){this.comparator=t,this.root=e||Na.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Na.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Na.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new ja(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new ja(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new ja(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new ja(this.root,t,this.comparator,!0)},t}(),ja=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Na=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw ho();if(this.right.isRed())throw ho();var t=this.left.check();if(t!==this.right.check())throw ho();return t+(this.isRed()?0:1)},t}();Na.EMPTY=null,Na.RED=!0,Na.BLACK=!1,Na.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw ho()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw ho()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw ho()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw ho()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw ho()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Na(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Ra=function(){function t(t){this.comparator=t,this.data=new Da(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Pa(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Pa(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Pa=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),La=new Da(jo.comparator);function Ma(){return La}function Fa(){return Ma()}var Va=new Da(jo.comparator);function qa(){return Va}var Ua=new Da(jo.comparator);function Ba(){return Ua}var Ha=new Ra(jo.comparator);function za(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Ha,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Ga=new Ra(go);function Ka(){return Ga}var Wa=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Qa.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Bs.min(),r,Ka(),Ma(),za())},t}(),Qa=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(No.EMPTY_BYTE_STRING,n,za(),za(),za())},t}(),$a=function(t,e,n,r){this.C=t,this.removedTargetIds=e,this.key=n,this.N=r},Ya=function(t,e){this.targetId=t,this.$=e},Ja=function(t,e,n,r){void 0===n&&(n=No.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Xa=function(){function t(){this.F=0,this.O=eu(),this.k=No.EMPTY_BYTE_STRING,this.M=!1,this.L=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.M},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.k},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"B",{get:function(){return 0!==this.F},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"q",{get:function(){return this.L},enumerable:!1,configurable:!0}),t.prototype.U=function(t){t.approximateByteSize()>0&&(this.L=!0,this.k=t)},t.prototype.K=function(){var t=za(),e=za(),n=za();return this.O.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:ho()}}),new Qa(this.k,this.M,t,e,n)},t.prototype.W=function(){this.L=!1,this.O=eu()},t.prototype.j=function(t,e){this.L=!0,this.O=this.O.insert(t,e)},t.prototype.G=function(t){this.L=!0,this.O=this.O.remove(t)},t.prototype.H=function(){this.F+=1},t.prototype.J=function(){this.F-=1},t.prototype.Y=function(){this.L=!0,this.M=!0},t}(),Za=function(){function t(t){this.X=t,this.Z=new Map,this.tt=Ma(),this.et=tu(),this.nt=new Ra(go)}return t.prototype.st=function(t){for(var e=0,n=t.C;e<n.length;e++){var r=n[e];t.N instanceof ns?this.it(r,t.N):t.N instanceof rs&&this.rt(r,t.key,t.N)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.rt(r=o[i],t.key,t.N)},t.prototype.ot=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.ct(n);switch(t.state){case 0:e.at(n)&&r.U(t.resumeToken);break;case 1:r.J(),r.B||r.W(),r.U(t.resumeToken);break;case 2:r.J(),r.B||e.removeTarget(n);break;case 3:e.at(n)&&(r.Y(),r.U(t.resumeToken));break;case 4:e.at(n)&&(e.ut(n),r.U(t.resumeToken));break;default:ho()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Z.forEach(function(t,r){n.at(r)&&e(r)})},t.prototype.ht=function(t){var e=t.targetId,n=t.$.count,r=this.lt(e);if(r){var i=r.target;if(cs(i))if(0===n){var o=new jo(i.path);this.rt(e,o,new rs(o,Bs.min()))}else fo(1===n);else this.ft(e)!==n&&(this.ut(e),this.nt=this.nt.add(e))}},t.prototype.dt=function(t){var e=this,n=new Map;this.Z.forEach(function(r,i){var o=e.lt(i);if(o){if(r.current&&cs(o.target)){var s=new jo(o.target.path);null!==e.tt.get(s)||e.wt(i,s)||e.rt(i,s,new rs(s,t))}r.q&&(n.set(i,r.K()),r.W())}});var r=za();this.et.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.lt(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Wa(t,n,this.nt,this.tt,r);return this.tt=Ma(),this.et=tu(),this.nt=new Ra(go),i},t.prototype.it=function(t,e){if(this.at(t)){var n=this.wt(t,e.key)?2:0;this.ct(t).j(e.key,n),this.tt=this.tt.insert(e.key,e),this.et=this.et.insert(e.key,this._t(e.key).add(t))}},t.prototype.rt=function(t,e,n){if(this.at(t)){var r=this.ct(t);this.wt(t,e)?r.j(e,1):r.G(e),this.et=this.et.insert(e,this._t(e).delete(t)),n&&(this.tt=this.tt.insert(e,n))}},t.prototype.removeTarget=function(t){this.Z.delete(t)},t.prototype.ft=function(t){var e=this.ct(t).K();return this.X.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.H=function(t){this.ct(t).H()},t.prototype.ct=function(t){var e=this.Z.get(t);return e||(e=new Xa,this.Z.set(t,e)),e},t.prototype._t=function(t){var e=this.et.get(t);return e||(e=new Ra(go),this.et=this.et.insert(t,e)),e},t.prototype.at=function(t){var e=null!==this.lt(t);return e||ao("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.lt=function(t){var e=this.Z.get(t);return e&&e.B?null:this.X.yt(t)},t.prototype.ut=function(t){var e=this;this.Z.set(t,new Xa),this.X.getRemoteKeysForTarget(t).forEach(function(n){e.rt(t,n,null)})},t.prototype.wt=function(t,e){return this.X.getRemoteKeysForTarget(t).has(e)},t}();function tu(){return new Da(jo.comparator)}function eu(){return new Da(jo.comparator)}var nu={asc:"ASCENDING",desc:"DESCENDING"},ru={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iu=function(t,e){this.databaseId=t,this.V=e};function ou(t,e){return t.V?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function su(t,e){return t.V?e.toBase64():e.toUint8Array()}function au(t,e){return ou(t,e.toTimestamp())}function uu(t){return fo(!!t),Bs.fromTimestamp(function(t){var e=Po(t);return new Fo(e.seconds,e.nanos)}(t))}function cu(t,e){return function(t){return new Ao(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function lu(t){var e=Ao.fromString(t);return fo(Ru(e)),e}function hu(t,e){return cu(t.databaseId,e.path)}function fu(t,e){var n=lu(e);if(n.get(1)!==t.databaseId.projectId)throw new Co(So.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Co(So.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new jo(mu(n))}function du(t,e){return cu(t.databaseId,e)}function pu(t){var e=lu(t);return 4===e.length?Ao.emptyPath():mu(e)}function yu(t){return new Ao(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function mu(t){return fo(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function gu(t,e,n){return{name:hu(t,e),fields:n.proto.mapValue.fields}}function vu(t,e,n){var r=fu(t,e.name),i=uu(e.updateTime),o=new zs({mapValue:{fields:e.fields}});return new ns(r,i,o,{hasCommittedMutations:!!n})}function bu(t,e){var n;if(e instanceof va)n={update:gu(t,e.key,e.value)};else if(e instanceof Sa)n={delete:hu(t,e.key)};else if(e instanceof ba)n={update:gu(t,e.key,e.data),updateMask:Nu(e.fieldMask)};else{if(!(e instanceof Ca))return ho();n={verify:hu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof ta)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ea)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ra)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof oa)return{fieldPath:e.field.canonicalString(),increment:n.S};throw ho()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:au(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:ho()}(t,e.precondition)),n}function wu(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?la.updateTime(uu(t.updateTime)):void 0!==t.exists?la.exists(t.exists):la.none()}(e.currentDocument):la.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(fo("REQUEST_TIME"===e.setToServerValue),n=new ta):"appendMissingElements"in e?n=new ea(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new ra(e.removeAllFromArray.values||[]):"increment"in e?n=new oa(t,e.increment):ho();var r=Do.fromServerFormat(e.fieldPath);return new ua(r,n)}(t,e)}):[];if(e.update){var i=fu(t,e.update.name),o=new zs({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new Hs((t.fieldPaths||[]).map(function(t){return Do.fromServerFormat(t)}))}(e.updateMask);return new ba(i,o,s,n,r)}return new va(i,o,n,r)}if(e.delete){var a=fu(t,e.delete);return new Sa(a,n)}if(e.verify){var u=fu(t,e.verify);return new Ca(u,n)}return ho()}function _u(t,e){return{documents:[du(t,e.path)]}}function Eu(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=du(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=du(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Zo(t.value))return{unaryFilter:{field:Au(t.field),op:"IS_NAN"}};if(Xo(t.value))return{unaryFilter:{field:Au(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Zo(t.value))return{unaryFilter:{field:Au(t.field),op:"IS_NOT_NAN"}};if(Xo(t.value))return{unaryFilter:{field:Au(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Au(t.field),op:xu(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:Au(t.field),direction:Cu(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.V||Io(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Tu(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Tu(e.endAt)),n}function Iu(t){var e=pu(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){fo(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Ou(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new _s(ku(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return Io(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Su(n.startAt));var l=null;return n.endAt&&(l=Su(n.endAt)),Ss(e,i,a,s,u,"F",c,l)}function Ou(t){return t?void 0!==t.unaryFilter?[ju(t)]:void 0!==t.fieldFilter?[Du(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return Ou(t)}).reduce(function(t,e){return t.concat(e)}):ho():[]}function Tu(t){return{before:t.before,values:t.position}}function Su(t){return new bs(t.values||[],!!t.before)}function Cu(t){return nu[t]}function xu(t){return ru[t]}function Au(t){return{fieldPath:t.canonicalString()}}function ku(t){return Do.fromServerFormat(t.fieldPath)}function Du(t){return ls.create(ku(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return ho()}}(t.fieldFilter.op),t.fieldFilter.value)}function ju(t){switch(t.unaryFilter.op){case"IS_NAN":var e=ku(t.unaryFilter.field);return ls.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=ku(t.unaryFilter.field);return ls.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=ku(t.unaryFilter.field);return ls.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=ku(t.unaryFilter.field);return ls.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return ho()}}function Nu(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function Ru(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Pu(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Mu(e)),e=Lu(t.get(n),e);return Mu(e)}function Lu(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Mu(t){return t+"\x01\x01"}function Fu(t){var e=t.length;if(fo(e>=2),2===e)return fo("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Ao.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&ho(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:ho()}o=s+2}return new Ao(r)}var Vu=function(t,e){this.seconds=t,this.nanoseconds=e},qu=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};qu.store="owner",qu.key="owner";var Uu=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Uu.store="mutationQueues",Uu.keyPath="userId";var Bu=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Bu.store="mutations",Bu.keyPath="batchId",Bu.userMutationsIndex="userMutationsIndex",Bu.userMutationsKeyPath=["userId","batchId"];var Hu=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Pu(e)]},t.key=function(t,e,n){return[t,Pu(e),n]},t}();Hu.store="documentMutations",Hu.PLACEHOLDER=new Hu;var zu=function(t,e){this.path=t,this.readTime=e},Gu=function(t,e){this.path=t,this.version=e},Ku=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Ku.store="remoteDocuments",Ku.readTimeIndex="readTimeIndex",Ku.readTimeIndexPath="readTime",Ku.collectionReadTimeIndex="collectionReadTimeIndex",Ku.collectionReadTimeIndexPath=["parentPath","readTime"];var Wu=function(t){this.byteSize=t};Wu.store="remoteDocumentGlobal",Wu.key="remoteDocumentGlobalKey";var Qu=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Qu.store="targets",Qu.keyPath="targetId",Qu.queryTargetsIndexName="queryTargetsIndex",Qu.queryTargetsKeyPath=["canonicalId","targetId"];var $u=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};$u.store="targetDocuments",$u.keyPath=["targetId","path"],$u.documentTargetsIndex="documentTargetsIndex",$u.documentTargetsKeyPath=["path","targetId"];var Yu=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Yu.key="targetGlobalKey",Yu.store="targetGlobal";var Ju=function(t,e){this.collectionId=t,this.parent=e};Ju.store="collectionParents",Ju.keyPath=["collectionId","parent"];var Xu=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Xu.store="clientMetadata",Xu.keyPath="clientId";var Zu=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Zu.store="bundles",Zu.keyPath="bundleId";var tc=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};tc.store="namedQueries",tc.keyPath="name";var ec=Object(ro.f)(Object(ro.f)([],Object(ro.f)(Object(ro.f)([],Object(ro.f)(Object(ro.f)([],Object(ro.f)(Object(ro.f)([],[Uu.store,Bu.store,Hu.store,Ku.store,Qu.store,qu.store,Yu.store,$u.store]),[Xu.store])),[Wu.store])),[Ju.store])),[Zu.store,tc.store]),nc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",rc=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),ic=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},oc=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&ho(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),sc=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.gt=new ic,this.transaction.oncomplete=function(){n.gt.resolve()},this.transaction.onabort=function(){e.error?n.gt.reject(new cc(t,e.error)):n.gt.resolve()},this.transaction.onerror=function(e){var r=pc(e.target.error);n.gt.reject(new cc(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new cc(n,e)}},Object.defineProperty(t.prototype,"Et",{get:function(){return this.gt.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.gt.reject(t),this.aborted||(ao("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new hc(e)},t}(),ac=function(){function t(e,n,r){this.name=e,this.version=n,this.Tt=r,12.2===t.It(Object(te.g)())&&uo("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return ao("SimpleDb","Removing database:",t),fc(window.indexedDB.deleteDatabase(t)).toPromise()},t.At=function(){if("undefined"==typeof indexedDB)return!1;if(t.Rt())return!0;var e=Object(te.g)(),n=t.It(e),r=0<n&&n<10,i=t.bt(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Rt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.vt)},t.Pt=function(t,e){return t.store(e)},t.It=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.bt=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Vt=function(t){return Object(ro.b)(this,void 0,void 0,function(){var e,n=this;return Object(ro.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(ao("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new cc(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Co(So.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new cc(t,n))},i.onupgradeneeded=function(t){ao("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Tt.St(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){ao("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Dt&&(this.db.onversionchange=function(t){return n.Dt(t)}),this.db)]}})})},t.prototype.Ct=function(t){this.Dt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(ro.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(ro.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(ro.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.Vt(t)];case 2:return a.db=h.sent(),e=sc.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),oc.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.Et];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return ao("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),uc=function(){function t(t){this.xt=t,this.Nt=!1,this.$t=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Nt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ft",{get:function(){return this.$t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.xt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Nt=!0},t.prototype.Ot=function(t){this.$t=t},t.prototype.delete=function(){return fc(this.xt.delete())},t}(),cc=function(t){function e(e,n){var r=this;return(r=t.call(this,So.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(ro.c)(e,t),e}(Co);function lc(t){return"IndexedDbTransactionError"===t.name}var hc=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(ao("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(ao("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),fc(n)},t.prototype.add=function(t){return ao("SimpleDb","ADD",this.store.name,t,t),fc(this.store.add(t))},t.prototype.get=function(t){var e=this;return fc(this.store.get(t)).next(function(n){return void 0===n&&(n=null),ao("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return ao("SimpleDb","DELETE",this.store.name,t),fc(this.store.delete(t))},t.prototype.count=function(){return ao("SimpleDb","COUNT",this.store.name),fc(this.store.count())},t.prototype.kt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Mt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Lt=function(t,e){ao("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Bt=!1;var r=this.cursor(n);return this.Mt(r,function(t,e,n){return n.delete()})},t.prototype.qt=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Mt(r,e)},t.prototype.Ut=function(t){var e=this.cursor({});return new oc(function(n,r){e.onerror=function(t){var e=pc(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.Mt=function(t,e){var n=[];return new oc(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new uc(i),s=e(i.primaryKey,i.value,o);if(s instanceof oc){var a=s.catch(function(t){return o.done(),oc.reject(t)});n.push(a)}o.isDone?r():null===o.Ft?i.continue():i.continue(o.Ft)}else r()}}).next(function(){return oc.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Bt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function fc(t){return new oc(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=pc(t.target.error);n(e)}})}var dc=!1;function pc(t){var e=ac.It(Object(te.g)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Co("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return dc||(dc=!0,setTimeout(function(){throw r},0)),r}}return t}var yc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qt=e,r.currentSequenceNumber=n,r}return Object(ro.c)(e,t),e}(rc);function mc(t,e){var n=po(t);return ac.Pt(n.Qt,e)}var gc=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e,n){for(var r=n.mutationResults,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=da(o,e,r[i]))}return e},t.prototype.applyToLocalView=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=pa(s,e,this.localWriteTime));for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t)&&(e=pa(s,e,this.localWriteTime))}return e},t.prototype.applyToLocalDocumentSet=function(t){var e=this,n=t;return this.mutations.forEach(function(r){var i=e.applyToLocalView(r.key,t.get(r.key));i&&(n=n.insert(r.key,i))}),n},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},za())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&vo(this.mutations,t.mutations,function(t,e){return ma(t,e)})&&vo(this.baseMutations,t.baseMutations,function(t,e){return ma(t,e)})},t}(),vc=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){fo(e.mutations.length===r.length);for(var i=Ba(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),bc=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Bs.min()),void 0===o&&(o=Bs.min()),void 0===s&&(s=No.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),wc=function(t){this.Kt=t};function _c(t,e){if(e.document)return vu(t.Kt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=jo.fromSegments(e.noDocument.path),r=Sc(e.noDocument.readTime);return new rs(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=jo.fromSegments(e.unknownDocument.path);return r=Sc(e.unknownDocument.version),new is(i,r)}return ho()}function Ec(t,e,n){var r=Ic(n),i=e.key.path.popLast().toArray();if(e instanceof ns){var o=function(t,e){return{name:hu(t,e.key),fields:e.toProto().mapValue.fields,updateTime:ou(t,e.version.toTimestamp())}}(t.Kt,e),s=e.hasCommittedMutations;return new Ku(null,null,o,s,r,i)}if(e instanceof rs){var a=e.key.path.toArray(),u=Tc(e.version);return s=e.hasCommittedMutations,new Ku(null,new zu(a,u),null,s,r,i)}if(e instanceof is){var c=e.key.path.toArray(),l=Tc(e.version);return new Ku(new Gu(c,l),null,null,!0,r,i)}return ho()}function Ic(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Oc(t){var e=new Fo(t[0],t[1]);return Bs.fromTimestamp(e)}function Tc(t){var e=t.toTimestamp();return new Vu(e.seconds,e.nanoseconds)}function Sc(t){var e=new Fo(t.seconds,t.nanoseconds);return Bs.fromTimestamp(e)}function Cc(t,e){for(var n=(e.baseMutations||[]).map(function(e){return wu(t.Kt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return wu(t.Kt,e)}),o=Fo.fromMillis(e.localWriteTimeMs);return new gc(e.batchId,o,n,i)}function xc(t){var e,n,r=Sc(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Sc(t.lastLimboFreeSnapshotVersion):Bs.min();return void 0!==t.query.documents?(fo(1===(n=t.query).documents.length),e=Rs(Cs(pu(n.documents[0])))):e=function(t){return Rs(Iu(t))}(t.query),new bc(e,t.targetId,0,t.lastListenSequenceNumber,r,i,No.fromBase64String(t.resumeToken))}function Ac(t,e){var n,r=Tc(e.snapshotVersion),i=Tc(e.lastLimboFreeSnapshotVersion);n=cs(e.target)?_u(t.Kt,e.target):Eu(t.Kt,e.target);var o=e.resumeToken.toBase64();return new Qu(e.targetId,as(e.target),r,o,e.sequenceNumber,i,n)}function kc(t){var e=Iu({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Ps(e,e.limit,"L"):e}var Dc=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return jc(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:Sc(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return jc(t).put({bundleId:(n=e).id,createTime:Tc(uu(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Nc(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:kc(e.bundledQuery),readTime:Sc(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return Nc(t).put(function(t){return{name:t.name,readTime:Tc(uu(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function jc(t){return mc(t,Zu.store)}function Nc(t){return mc(t,tc.store)}var Rc=function(){function t(){this.Wt=new Pc}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Wt.add(e),oc.resolve()},t.prototype.getCollectionParents=function(t,e){return oc.resolve(this.Wt.getEntries(e))},t}(),Pc=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Ra(Ao.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Ra(Ao.comparator)).toArray()},t}(),Lc=function(){function t(){this.jt=new Pc}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.jt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.jt.add(e)});var o={collectionId:r,parent:Pu(i)};return Mc(t).put(o)}return oc.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[bo(e),""],!1,!0);return Mc(t).kt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Fu(o.parent))}return n})},t}();function Mc(t){return mc(t,Ju.store)}var Fc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Vc=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function qc(t,e,n){var r=t.store(Bu.store),i=t.store(Hu.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.qt({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){fo(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=Hu.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return oc.waitFor(o).next(function(){return c})}function Uc(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ho();e=t.noDocument}return JSON.stringify(e).length}Vc.DEFAULT_COLLECTION_PERCENTILE=10,Vc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vc.DEFAULT=new Vc(41943040,Vc.DEFAULT_COLLECTION_PERCENTILE,Vc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vc.DISABLED=new Vc(-1,0,0);var Bc=function(){function t(t,e,n,r){this.userId=t,this.D=e,this.Gt=n,this.referenceDelegate=r,this.zt={}}return t.Ht=function(e,n,r,i){return fo(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return zc(t).qt({index:Bu.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Gc(t),s=zc(t);return s.add({}).next(function(a){fo("number"==typeof a);for(var u=new gc(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return bu(t.Kt,e)}),i=n.mutations.map(function(e){return bu(t.Kt,e)});return new Bu(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.D,i.userId,u),l=[],h=new Ra(function(t,e){return go(t.canonicalString(),e.canonicalString())}),f=0,d=r;f<d.length;f++){var p=d[f],y=Hu.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(y,Hu.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Gt.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.zt[a]=u.keys()}),oc.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return zc(t).get(e).next(function(t){return t?(fo(t.userId===n.userId),Cc(n.D,t)):null})},t.prototype.Jt=function(t,e){var n=this;return this.zt[e]?oc.resolve(this.zt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.zt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return zc(t).qt({index:Bu.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(fo(e.batchId>=r),o=Cc(n.D,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return zc(t).qt({index:Bu.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return zc(t).kt(Bu.userMutationsIndex,n).next(function(t){return t.map(function(t){return Cc(e.D,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Hu.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Gc(t).qt({range:i},function(r,i,s){var a=r[0],u=r[2],c=Fu(r[1]);if(a===n.userId&&e.path.isEqual(c))return zc(t).get(u).next(function(t){if(!t)throw ho();fo(t.userId===n.userId),o.push(Cc(n.D,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Ra(go),i=[];return e.forEach(function(e){var o=Hu.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Gc(t).qt({range:s},function(t,i,o){var s=t[0],a=t[2],u=Fu(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),oc.waitFor(i).next(function(){return n.Yt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Hu.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Ra(go);return Gc(t).qt({range:s},function(t,e,o){var s=t[0],u=t[2],c=Fu(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Yt(t,a)})},t.prototype.Yt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(zc(t).get(e).next(function(t){if(null===t)throw ho();fo(t.userId===n.userId),r.push(Cc(n.D,t))}))}),oc.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return qc(t.Qt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Xt(e.batchId)}),oc.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Xt=function(t){delete this.zt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return oc.resolve();var r=IDBKeyRange.lowerBound(Hu.prefixForUser(e.userId)),i=[];return Gc(t).qt({range:r},function(t,n,r){if(t[0]===e.userId){var o=Fu(t[1]);i.push(o)}else r.done()}).next(function(){fo(0===i.length)})})},t.prototype.containsKey=function(t,e){return Hc(t,this.userId,e)},t.prototype.Zt=function(t){var e=this;return Kc(t).get(this.userId).next(function(t){return t||new Uu(e.userId,-1,"")})},t}();function Hc(t,e,n){var r=Hu.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Gc(t).qt({range:o,Bt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function zc(t){return mc(t,Bu.store)}function Gc(t){return mc(t,Hu.store)}function Kc(t){return mc(t,Uu.store)}var Wc=function(){function t(t){this.te=t}return t.prototype.next=function(){return this.te+=2,this.te},t.ee=function(){return new t(0)},t.ne=function(){return new t(-1)},t}(),Qc=function(){function t(t,e){this.referenceDelegate=t,this.D=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.se(t).next(function(n){var r=new Wc(n.highestTargetId);return n.highestTargetId=r.next(),e.ie(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.se(t).next(function(t){return Bs.fromTimestamp(new Fo(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.se(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.se(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.ie(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.re(t,e).next(function(){return n.se(t).next(function(r){return r.targetCount+=1,n.oe(e,r),n.ie(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.re(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return $c(t).delete(e.targetId)}).next(function(){return n.se(t)}).next(function(e){return fo(e.targetCount>0),e.targetCount-=1,n.ie(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return $c(t).qt(function(s,a){var u=xc(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return oc.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return $c(t).qt(function(t,n){var r=xc(n);e(r)})},t.prototype.se=function(t){return Yc(t).get(Yu.key).next(function(t){return fo(null!==t),t})},t.prototype.ie=function(t,e){return Yc(t).put(Yu.key,e)},t.prototype.re=function(t,e){return $c(t).put(Ac(this.D,e))},t.prototype.oe=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.se(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=as(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return $c(t).qt({range:r,index:Qu.queryTargetsIndexName},function(t,n,r){var o=xc(n);us(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Jc(t);return e.forEach(function(e){var s=Pu(e.path);i.push(o.put(new $u(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),oc.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Jc(t);return oc.forEach(e,function(e){var o=Pu(e.path);return oc.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Jc(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Jc(t),i=za();return r.qt({range:n,Bt:!0},function(t,e,n){var r=Fu(t[1]),o=new jo(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=Pu(e.path),r=IDBKeyRange.bound([n],[bo(n)],!1,!0),i=0;return Jc(t).qt({index:$u.documentTargetsIndex,Bt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.yt=function(t,e){return $c(t).get(e).next(function(t){return t?xc(t):null})},t}();function $c(t){return mc(t,Qu.store)}function Yc(t){return mc(t,Yu.store)}function Jc(t){return mc(t,$u.store)}function Xc(t){return Object(ro.b)(this,void 0,void 0,function(){return Object(ro.d)(this,function(e){if(t.code!==So.FAILED_PRECONDITION||t.message!==nc)throw t;return ao("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Zc(t,e){var n=t[1],r=e[1],i=go(t[0],e[0]);return 0===i?go(n,r):i}var tl=function(){function t(t){this.ce=t,this.buffer=new Ra(Zc),this.ae=0}return t.prototype.ue=function(){return++this.ae},t.prototype.he=function(t){var e=[t,this.ue()];if(this.buffer.size<this.ce)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Zc(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),el=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.le=!1,this.fe=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.de(t)},t.prototype.stop=function(){this.fe&&(this.fe.cancel(),this.fe=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.fe},enumerable:!1,configurable:!0}),t.prototype.de=function(t){var e=this,n=this.le?3e5:6e4;ao("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.fe=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return Object(ro.b)(e,void 0,void 0,function(){var e;return Object(ro.d)(this,function(n){switch(n.label){case 0:this.fe=null,this.le=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return lc(e=n.sent())?(ao("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Xc(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.de(t)];case 8:return n.sent(),[2]}})})})},t}(),nl=function(){function t(t,e){this.we=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.we._e(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return oc.resolve(io.o);var r=new tl(e);return this.we.forEachTarget(t,function(t){return r.he(t.sequenceNumber)}).next(function(){return n.we.me(t,function(t){return r.he(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.we.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.we.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(ao("LruGarbageCollector","Garbage collection skipped; disabled"),oc.resolve(Fc)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(ao("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Fc):n.ye(t,e)})},t.prototype.getCacheSize=function(t){return this.we.getCacheSize(t)},t.prototype.ye=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(ao("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),so()<=Zt.a.DEBUG&&ao("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),oc.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),rl=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new nl(t,e)}(this,e)}return t.prototype._e=function(t){var e=this.ge(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.ge=function(t){var e=0;return this.me(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.me=function(t,e){return this.pe(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return il(t,n)},t.prototype.removeReference=function(t,e,n){return il(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return il(t,e)},t.prototype.Ee=function(t,e){return function(t,e){var n=!1;return Kc(t).Ut(function(r){return Hc(t,r,e).next(function(t){return t&&(n=!0),oc.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.pe(t,function(s,a){if(a<=e){var u=n.Ee(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),Jc(t).delete([0,Pu(s.path)])})});i.push(u)}}).next(function(){return oc.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return il(t,e)},t.prototype.pe=function(t,e){var n,r=Jc(t),i=io.o;return r.qt({index:$u.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==io.o&&e(new jo(Fu(n)),i),i=s,n=o):i=io.o}).next(function(){i!==io.o&&e(new jo(Fu(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function il(t,e){return Jc(t).put(function(t,e){return new $u(0,Pu(t.path),e)}(e,t.currentSequenceNumber))}var ol=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){_o(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return Eo(this.inner)},t}(),sl=function(){function t(){this.changes=new ol(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Bs.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{maybeDocument:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{maybeDocument:null,readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?oc.resolve(n.maybeDocument):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),al=function(){function t(t,e){this.D=t,this.Gt=e}return t.prototype.addEntry=function(t,e,n){return ll(t).put(hl(e),n)},t.prototype.removeEntry=function(t,e){var n=ll(t),r=hl(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.Te(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return ll(t).get(hl(e)).next(function(t){return n.Ie(t)})},t.prototype.Ae=function(t,e){var n=this;return ll(t).get(hl(e)).next(function(t){var e=n.Ie(t);return e?{maybeDocument:e,size:Uc(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,r=Fa();return this.Re(t,e,function(t,e){var i=n.Ie(e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.be=function(t,e){var n=this,r=Fa(),i=new Da(jo.comparator);return this.Re(t,e,function(t,e){var o=n.Ie(e);o?(r=r.insert(t,o),i=i.insert(t,Uc(e))):(r=r.insert(t,null),i=i.insert(t,0))}).next(function(){return{ve:r,Pe:i}})},t.prototype.Re=function(t,e,n){if(e.isEmpty())return oc.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return ll(t).qt({range:r},function(t,e,r){for(var s=jo.fromSegments(t);o&&jo.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ot(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=qa(),o=e.path.length+1,s={};if(n.isEqual(Bs.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=Ic(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Ku.collectionReadTimeIndex}return ll(t).qt(s,function(t,n,s){if(t.length===o){var a=_c(r.D,n);e.path.isPrefixOf(a.key.path)?a instanceof ns&&Vs(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new ul(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return cl(t).get(Wu.key).next(function(t){return fo(!!t),t})},t.prototype.Te=function(t,e){return cl(t).put(Wu.key,e)},t.prototype.Ie=function(t){if(t){var e=_c(this.D,t);return e instanceof rs&&e.version.isEqual(Bs.min())?null:e}return null},t}(),ul=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ve=e,r.trackRemovals=n,r.Se=new ol(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(ro.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Ra(function(t,e){return go(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Se.get(o);if(s.maybeDocument){var u=Ec(e.Ve.D,s.maybeDocument,e.getReadTime(o));i=i.add(o.path.popLast());var c=Uc(u);r+=c-a,n.push(e.Ve.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=Ec(e.Ve.D,new rs(o,Bs.min()),e.getReadTime(o));n.push(e.Ve.addEntry(t,o,l))}else n.push(e.Ve.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ve.Gt.addToCollectionParentIndex(t,r))}),n.push(this.Ve.updateMetadata(t,r)),oc.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ve.Ae(t,e).next(function(t){return null===t?(n.Se.set(e,0),null):(n.Se.set(e,t.size),t.maybeDocument)})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ve.be(t,e).next(function(t){var e=t.ve;return t.Pe.forEach(function(t,e){n.Se.set(t,e)}),e})},e}(sl);function cl(t){return mc(t,Wu.store)}function ll(t){return mc(t,Ku.store)}function hl(t){return t.path.toArray()}var fl=function(){function t(t){this.D=t}return t.prototype.St=function(t,e,n,r){var i=this;fo(n<r&&n>=0&&r<=11);var o=new sc("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(qu.store)}(t),function(t){t.createObjectStore(Uu.store,{keyPath:Uu.keyPath}),t.createObjectStore(Bu.store,{keyPath:Bu.keyPath,autoIncrement:!0}).createIndex(Bu.userMutationsIndex,Bu.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Hu.store)}(t),dl(t),function(t){t.createObjectStore(Ku.store)}(t));var s=oc.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore($u.store),t.deleteObjectStore(Qu.store),t.deleteObjectStore(Yu.store)}(t),dl(t)),s=s.next(function(){return function(t){var e=t.store(Yu.store),n=new Yu(0,0,Bs.min().toTimestamp(),0);return e.put(Yu.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(Bu.store).kt().next(function(n){t.deleteObjectStore(Bu.store),t.createObjectStore(Bu.store,{keyPath:Bu.keyPath,autoIncrement:!0}).createIndex(Bu.userMutationsIndex,Bu.userMutationsKeyPath,{unique:!0});var r=e.store(Bu.store),i=n.map(function(t){return r.put(t)});return oc.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(Xu.store,{keyPath:Xu.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.De(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(Wu.store)}(t),i.Ce(o)})),n<7&&r>=7&&(s=s.next(function(){return i.xe(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Ne(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Ku.store);e.createIndex(Ku.readTimeIndex,Ku.readTimeIndexPath,{unique:!1}),e.createIndex(Ku.collectionReadTimeIndex,Ku.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.$e(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(Zu.store,{keyPath:Zu.keyPath})}(t),function(t){t.createObjectStore(tc.store,{keyPath:tc.keyPath})}(t)})),s},t.prototype.Ce=function(t){var e=0;return t.store(Ku.store).qt(function(t,n){e+=Uc(n)}).next(function(){var n=new Wu(e);return t.store(Wu.store).put(Wu.key,n)})},t.prototype.De=function(t){var e=this,n=t.store(Uu.store),r=t.store(Bu.store);return n.kt().next(function(n){return oc.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.kt(Bu.userMutationsIndex,i).next(function(r){return oc.forEach(r,function(r){fo(r.userId===n.userId);var i=Cc(e.D,r);return qc(t,n.userId,i).next(function(){})})})})})},t.prototype.xe=function(t){var e=t.store($u.store),n=t.store(Ku.store);return t.store(Yu.store).get(Yu.key).next(function(t){var r=[];return n.qt(function(n,i){var o=new Ao(n),s=function(t){return[0,Pu(t)]}(o);r.push(e.get(s).next(function(n){return n?oc.resolve():function(n){return e.put(new $u(0,Pu(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return oc.waitFor(r)})})},t.prototype.Ne=function(t,e){t.createObjectStore(Ju.store,{keyPath:Ju.keyPath});var n=e.store(Ju.store),r=new Pc,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Pu(i)})}};return e.store(Ku.store).qt({Bt:!0},function(t,e){var n=new Ao(t);return i(n.popLast())}).next(function(){return e.store(Hu.store).qt({Bt:!0},function(t,e){var n=Fu(t[1]);return i(n.popLast())})})},t.prototype.$e=function(t){var e=this,n=t.store(Qu.store);return n.qt(function(t,r){var i=xc(r),o=Ac(e.D,i);return n.put(o)})},t}();function dl(t){t.createObjectStore($u.store,{keyPath:$u.keyPath}).createIndex($u.documentTargetsIndex,$u.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Qu.store,{keyPath:Qu.keyPath}).createIndex(Qu.queryTargetsIndexName,Qu.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Yu.store)}var pl="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",yl=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Fe=o,this.window=s,this.document=a,this.Oe=c,this.ke=l,this.Me=null,this.Le=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Be=null,this.inForeground=!1,this.qe=null,this.Ue=null,this.Qe=Number.NEGATIVE_INFINITY,this.Ke=function(t){return Promise.resolve()},!t.At())throw new Co(So.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new rl(this,i),this.We=n+"main",this.D=new wc(u),this.je=new ac(this.We,11,new fl(this.D)),this.Ge=new Qc(this.referenceDelegate,this.D),this.Gt=new Lc,this.ze=function(t,e){return new al(t,e)}(this.D,this.Gt),this.He=new Dc,this.window&&this.window.localStorage?this.Je=this.window.localStorage:(this.Je=null,!1===l&&uo("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.Ye().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Co(So.FAILED_PRECONDITION,pl);return t.Xe(),t.Ze(),t.tn(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.Ge.getHighestSequenceNumber(e)})}).then(function(e){t.Me=new io(e,t.Oe)}).then(function(){t.Le=!0}).catch(function(e){return t.je&&t.je.close(),Promise.reject(e)})},t.prototype.en=function(t){var e=this;return this.Ke=function(n){return Object(ro.b)(e,void 0,void 0,function(){return Object(ro.d)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.je.Ct(function(n){return Object(ro.b)(e,void 0,void 0,function(){return Object(ro.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Fe.enqueueAndForget(function(){return Object(ro.b)(e,void 0,void 0,function(){return Object(ro.d)(this,function(t){switch(t.label){case 0:return this.started?[4,this.Ye()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.Ye=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return gl(e).put(new Xu(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.nn(e).next(function(e){e||(t.isPrimary=!1,t.Fe.enqueueRetryable(function(){return t.Ke(!1)}))})}).next(function(){return t.sn(e)}).next(function(n){return t.isPrimary&&!n?t.rn(e).next(function(){return!1}):!!n&&t.on(e).next(function(){return!0})})}).catch(function(e){if(lc(e))return ao("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return ao("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Fe.enqueueRetryable(function(){return t.Ke(e)}),t.isPrimary=e})},t.prototype.nn=function(t){var e=this;return ml(t).get(qu.key).next(function(t){return oc.resolve(e.cn(t))})},t.prototype.an=function(t){return gl(t).delete(this.clientId)},t.prototype.un=function(){return Object(ro.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(ro.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.hn(this.Qe,18e5)?[3,2]:(this.Qe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=mc(t,Xu.store);return e.kt().next(function(t){var n=r.ln(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return oc.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Je)for(e=0,n=t;e<n.length;e++)this.Je.removeItem(this.fn(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.tn=function(){var t=this;this.Ue=this.Fe.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.Ye().then(function(){return t.un()}).then(function(){return t.tn()})})},t.prototype.cn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.sn=function(t){var e=this;return this.ke?oc.resolve(!0):ml(t).get(qu.key).next(function(n){if(null!==n&&e.hn(n.leaseTimestampMs,5e3)&&!e.dn(n.ownerId)){if(e.cn(n)&&e.networkEnabled)return!0;if(!e.cn(n)){if(!n.allowTabSynchronization)throw new Co(So.FAILED_PRECONDITION,pl);return!1}}return!(!e.networkEnabled||!e.inForeground)||gl(t).kt().next(function(t){return void 0===e.ln(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&ao("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return Object(ro.b)(this,void 0,void 0,function(){var t=this;return Object(ro.d)(this,function(e){switch(e.label){case 0:return this.Le=!1,this.wn(),this.Ue&&(this.Ue.cancel(),this.Ue=null),this._n(),this.mn(),[4,this.je.runTransaction("shutdown","readwrite",[qu.store,Xu.store],function(e){var n=new yc(e,io.o);return t.rn(n).next(function(){return t.an(n)})})];case 1:return e.sent(),this.je.close(),this.yn(),[2]}})})},t.prototype.ln=function(t,e){var n=this;return t.filter(function(t){return n.hn(t.updateTimeMs,e)&&!n.dn(t.clientId)})},t.prototype.gn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return gl(e).kt().next(function(e){return t.ln(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.Le},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Bc.Ht(t,this.D,this.Gt,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.Ge},t.prototype.getRemoteDocumentCache=function(){return this.ze},t.prototype.getIndexManager=function(){return this.Gt},t.prototype.getBundleCache=function(){return this.He},t.prototype.runTransaction=function(t,e,n){var r,i=this;return ao("IndexedDbPersistence","Starting transaction:",t),this.je.runTransaction(t,"readonly"===e?"readonly":"readwrite",ec,function(o){return r=new yc(o,i.Me?i.Me.next():io.o),"readwrite-primary"===e?i.nn(r).next(function(t){return!!t||i.sn(r)}).next(function(e){if(!e)throw uo("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Fe.enqueueRetryable(function(){return i.Ke(!1)}),new Co(So.FAILED_PRECONDITION,nc);return n(r)}).next(function(t){return i.on(r).next(function(){return t})}):i.pn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.pn=function(t){var e=this;return ml(t).get(qu.key).next(function(t){if(null!==t&&e.hn(t.leaseTimestampMs,5e3)&&!e.dn(t.ownerId)&&!e.cn(t)&&!(e.ke||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Co(So.FAILED_PRECONDITION,pl)})},t.prototype.on=function(t){var e=new qu(this.clientId,this.allowTabSynchronization,Date.now());return ml(t).put(qu.key,e)},t.At=function(){return ac.At()},t.prototype.rn=function(t){var e=this,n=ml(t);return n.get(qu.key).next(function(t){return e.cn(t)?(ao("IndexedDbPersistence","Releasing primary lease."),n.delete(qu.key)):oc.resolve()})},t.prototype.hn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(uo("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Xe=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=function(){t.Fe.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.Ye()})},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)},t.prototype._n=function(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)},t.prototype.Ze=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Be=function(){e.wn(),e.Fe.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.Be))},t.prototype.mn=function(){this.Be&&(this.window.removeEventListener("unload",this.Be),this.Be=null)},t.prototype.dn=function(t){var e;try{var n=null!==(null===(e=this.Je)||void 0===e?void 0:e.getItem(this.fn(t)));return ao("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return uo("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.wn=function(){if(this.Je)try{this.Je.setItem(this.fn(this.clientId),String(Date.now()))}catch(t){uo("Failed to set zombie client id.",t)}},t.prototype.yn=function(){if(this.Je)try{this.Je.removeItem(this.fn(this.clientId))}catch(t){}},t.prototype.fn=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function ml(t){return mc(t,qu.store)}function gl(t){return mc(t,Xu.store)}function vl(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var bl=function(t,e){this.progress=t,this.En=e},wl=function(){function t(t,e,n){this.ze=t,this.Tn=e,this.Gt=n}return t.prototype.In=function(t,e){var n=this;return this.Tn.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.An(t,e,r)})},t.prototype.An=function(t,e,n){return this.ze.getEntry(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].applyToLocalView(e,t);return t})},t.prototype.Rn=function(t,e,n){var r=Fa();return e.forEach(function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].applyToLocalView(t,e);r=r.insert(t,e)}),r},t.prototype.bn=function(t,e){var n=this;return this.ze.getEntries(t,e).next(function(e){return n.vn(t,e)})},t.prototype.vn=function(t,e){var n=this;return this.Tn.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(r){var i=n.Rn(t,e,r),o=Ma();return i.forEach(function(t,e){e||(e=new rs(t,Bs.min())),o=o.insert(t,e)}),o})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return jo.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Pn(t,e.path):js(e)?this.Vn(t,e,n):this.Sn(t,e,n)},t.prototype.Pn=function(t,e){return this.In(t,new jo(e)).next(function(t){var e=qa();return t instanceof ns&&(e=e.insert(t.key,t)),e})},t.prototype.Vn=function(t,e,n){var r=this,i=e.collectionGroup,o=qa();return this.Gt.getCollectionParents(t,i).next(function(s){return oc.forEach(s,function(s){var a=function(t,e){return new Ts(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.Sn(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.Sn=function(t,e,n){var r,i,o=this;return this.ze.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o.Tn.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Dn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=pa(u,r.get(c),o.localWriteTime);r=l instanceof ns?r.insert(c,l):r.remove(c)}})}).next(function(){return r.forEach(function(t,n){Vs(e,n)||(r=r.remove(t))}),r})},t.prototype.Dn=function(t,e,n){for(var r=za(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof ba&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.ze.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof ns&&(c=c.insert(t,e))}),c})},t}(),_l=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.Cn=n,this.xn=r}return t.Nn=function(e,n){for(var r=za(),i=za(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),El=function(){function t(){}return t.prototype.$n=function(t){this.Fn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Bs.min())?this.On(t,e):this.Fn.bn(t,r).next(function(o){var s=i.kn(e,o);return(xs(e)||As(e))&&i.Mn(e.limitType,s,r,n)?i.On(t,e):(so()<=Zt.a.DEBUG&&ao("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Fs(e)),i.Fn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.kn=function(t,e){var n=new Ra(qs(t));return e.forEach(function(e,r){r instanceof ns&&Vs(t,r)&&(n=n.add(r))}),n},t.prototype.Mn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.On=function(t,e){return so()<=Zt.a.DEBUG&&ao("QueryEngine","Using full collection scan to execute query:",Fs(e)),this.Fn.getDocumentsMatchingQuery(t,e,Bs.min())},t}(),Il=function(){function t(t,e,n,r){this.persistence=t,this.Ln=e,this.D=r,this.Bn=new Da(go),this.qn=new ol(function(t){return as(t)},us),this.Un=Bs.min(),this.Tn=t.getMutationQueue(n),this.Qn=t.getRemoteDocumentCache(),this.Ge=t.getTargetCache(),this.Kn=new wl(this.Qn,this.Tn,this.persistence.getIndexManager()),this.He=t.getBundleCache(),this.Ln.$n(this.Kn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Bn)})},t}();function Ol(t,e,n,r){return new Il(t,e,n,r)}function Tl(t,e){return Object(ro.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(ro.d)(this,function(s){switch(s.label){case 0:return n=po(t),r=n.Tn,i=n.Kn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n.Tn.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new wl(n.Qn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=za(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var y=0,m=p.mutations;y<m.length;y++)s=s.add(m[y].key)}return i.bn(t,s).next(function(t){return{Wn:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n.Tn=r,n.Kn=i,n.Ln.$n(n.Kn),o)]}})})}function Sl(t,e){var n=po(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=oc.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=e,s=n.docVersions.get(t);fo(null!==s),(!o||o.version.compareTo(s)<0)&&(o=i.applyToRemoteDocument(t,o,n))&&r.addEntry(o,n.commitVersion)})}),s.next(function(){return t.Tn.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n.Tn.performConsistencyCheck(t)}).next(function(){return n.Kn.bn(t,r)})})}function Cl(t){var e=po(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.Ge.getLastRemoteSnapshotVersion(t)})}function xl(t,e){var n=po(t),r=e.snapshotVersion,i=n.Bn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.Bn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.Ge.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.Ge.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return fo(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.Ge.updateTargetData(t,c))}}});var a=Ma();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(Al(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(Bs.min())){var u=n.Ge.getLastRemoteSnapshotVersion(t).next(function(e){return n.Ge.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return oc.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Kn.vn(t,a)})}).then(function(t){return n.Bn=i,t})}function Al(t,e,n,r,i){var o=za();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=Ma();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s instanceof rs&&s.version.isEqual(Bs.min())?(e.removeEntry(n,u),o=o.insert(n,s)):null==a||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):ao("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function kl(t,e){var n=po(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.Tn.getNextMutationBatchAfterBatchId(t,e)})}function Dl(t,e){var n=po(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.Ge.getTargetData(t,e).next(function(i){return i?oc.resolve(r=i):n.Ge.allocateTargetId(t).next(function(i){return r=new bc(e,i,0,t.currentSequenceNumber),n.Ge.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Bn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Bn=n.Bn.insert(t.targetId,t),n.qn.set(e,t.targetId)),t})}function jl(t,e,n){return Object(ro.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(ro.d)(this,function(a){switch(a.label){case 0:r=po(t),i=r.Bn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!lc(s=a.sent()))throw s;return ao("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Bn=r.Bn.remove(e),r.qn.delete(i.target),[2]}})})}function Nl(t,e,n){var r=po(t),i=Bs.min(),o=za();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=po(t),i=r.qn.get(n);return void 0!==i?oc.resolve(r.Bn.get(i)):r.Ge.getTargetData(e,n)}(r,t,Rs(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.Ge.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.Ln.getDocumentsMatchingQuery(t,e,n?i:Bs.min(),n?o:za())}).next(function(t){return{documents:t,jn:o}})})}function Rl(t,e){var n=po(t),r=po(n.Ge),i=n.Bn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.yt(t,e).next(function(t){return t?t.target:null})})}function Pl(t){var e=po(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=po(t),i=Ma(),o=Ic(n),s=ll(e),a=IDBKeyRange.lowerBound(o,!0);return s.qt({index:Ku.readTimeIndex,range:a},function(t,e){var n=_c(r.D,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{En:i,readTime:Oc(o)}})}(e.Qn,t,e.Un)}).then(function(t){var n=t.En;return e.Un=t.readTime,n})}function Ll(t){return Object(ro.b)(this,void 0,void 0,function(){var e;return Object(ro.d)(this,function(n){return[2,(e=po(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=ll(t),n=Bs.min();return e.qt({index:Ku.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=Oc(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.Un=t})]})})}function Ml(t,e,n,r){return Object(ro.b)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,f,d;return Object(ro.d)(this,function(p){switch(p.label){case 0:for(i=po(t),o=za(),s=Ma(),a=Ba(),u=0,c=n;u<c.length;u++)h=e.Gn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.zn(l)),a=a.insert(h,e.Hn(l.metadata.readTime));return f=i.Qn.newChangeBuffer({trackRemovals:!0}),[4,Dl(i,function(t){return Rs(Cs(Ao.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return Al(t,f,s,Bs.min(),a).next(function(e){return f.apply(t),e}).next(function(e){return i.Ge.removeMatchingKeysForTargetId(t,d.targetId).next(function(){return i.Ge.addMatchingKeys(t,o,d.targetId)}).next(function(){return i.Kn.vn(t,e)})})})]}})})}function Fl(t,e,n){return void 0===n&&(n=za()),Object(ro.b)(this,void 0,void 0,function(){var r,i;return Object(ro.d)(this,function(o){switch(o.label){case 0:return[4,Dl(t,Rs(kc(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=po(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=uu(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.He.saveNamedQuery(t,e);var s=r.withResumeToken(No.EMPTY_BYTE_STRING,o);return i.Bn=i.Bn.insert(s.targetId,s),i.Ge.updateTargetData(t,s).next(function(){return i.Ge.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.Ge.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.He.saveNamedQuery(t,e)})})]}})})}var Vl=function(){function t(t){this.D=t,this.Jn=new Map,this.Yn=new Map}return t.prototype.getBundleMetadata=function(t,e){return oc.resolve(this.Jn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Jn.set(e.id,{id:(n=e).id,version:n.version,createTime:uu(n.createTime)}),oc.resolve()},t.prototype.getNamedQuery=function(t,e){return oc.resolve(this.Yn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.Yn.set(e.name,function(t){return{name:t.name,query:kc(t.bundledQuery),readTime:uu(t.readTime)}}(e)),oc.resolve()},t}(),ql=function(){function t(){this.Xn=new Ra(Ul.Zn),this.ts=new Ra(Ul.es)}return t.prototype.isEmpty=function(){return this.Xn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Ul(t,e);this.Xn=this.Xn.add(n),this.ts=this.ts.add(n)},t.prototype.ns=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.ss(new Ul(t,e))},t.prototype.rs=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.os=function(t){var e=this,n=new jo(new Ao([])),r=new Ul(n,t),i=new Ul(n,t+1),o=[];return this.ts.forEachInRange([r,i],function(t){e.ss(t),o.push(t.key)}),o},t.prototype.cs=function(){var t=this;this.Xn.forEach(function(e){return t.ss(e)})},t.prototype.ss=function(t){this.Xn=this.Xn.delete(t),this.ts=this.ts.delete(t)},t.prototype.us=function(t){var e=new jo(new Ao([])),n=new Ul(e,t),r=new Ul(e,t+1),i=za();return this.ts.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new Ul(t,0),n=this.Xn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Ul=function(){function t(t,e){this.key=t,this.hs=e}return t.Zn=function(t,e){return jo.comparator(t.key,e.key)||go(t.hs,e.hs)},t.es=function(t,e){return go(t.hs,e.hs)||jo.comparator(t.key,e.key)},t}(),Bl=function(){function t(t,e){this.Gt=t,this.referenceDelegate=e,this.Tn=[],this.ls=1,this.fs=new Ra(Ul.Zn)}return t.prototype.checkEmpty=function(t){return oc.resolve(0===this.Tn.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ls;this.ls++;var o=new gc(i,e,n,r);this.Tn.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.fs=this.fs.add(new Ul(u.key,i)),this.Gt.addToCollectionParentIndex(t,u.key.path.popLast())}return oc.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return oc.resolve(this.ds(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.ws(e+1),r=n<0?0:n;return oc.resolve(this.Tn.length>r?this.Tn[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return oc.resolve(0===this.Tn.length?-1:this.ls-1)},t.prototype.getAllMutationBatches=function(t){return oc.resolve(this.Tn.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Ul(e,0),i=new Ul(e,Number.POSITIVE_INFINITY),o=[];return this.fs.forEachInRange([r,i],function(t){var e=n.ds(t.hs);o.push(e)}),oc.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Ra(go);return e.forEach(function(t){var e=new Ul(t,0),i=new Ul(t,Number.POSITIVE_INFINITY);n.fs.forEachInRange([e,i],function(t){r=r.add(t.hs)})}),oc.resolve(this._s(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;jo.isDocumentKey(i)||(i=i.child(""));var o=new Ul(new jo(i),0),s=new Ra(go);return this.fs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.hs)),!0)},o),oc.resolve(this._s(s))},t.prototype._s=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.ds(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;fo(0===this.ys(e.batchId,"removed")),this.Tn.shift();var r=this.fs;return oc.forEach(e.mutations,function(i){var o=new Ul(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.fs=r})},t.prototype.Xt=function(t){},t.prototype.containsKey=function(t,e){var n=new Ul(e,0),r=this.fs.firstAfterOrEqual(n);return oc.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return oc.resolve()},t.prototype.ys=function(t,e){return this.ws(t)},t.prototype.ws=function(t){return 0===this.Tn.length?0:t-this.Tn[0].batchId},t.prototype.ds=function(t){var e=this.ws(t);return e<0||e>=this.Tn.length?null:this.Tn[e]},t}(),Hl=function(){function t(t,e){this.Gt=t,this.gs=e,this.docs=new Da(jo.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.gs(e);return this.docs=this.docs.insert(r,{maybeDocument:e,size:s,readTime:n}),this.size+=s-o,this.Gt.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return oc.resolve(n?n.maybeDocument:null)},t.prototype.getEntries=function(t,e){var n=this,r=Fa();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null)}),oc.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=qa(),i=new jo(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.maybeDocument,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||u instanceof ns&&Vs(e,u)&&(r=r.insert(u.key,u))}return oc.resolve(r)},t.prototype.ps=function(t,e){return oc.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new zl(this)},t.prototype.getSize=function(t){return oc.resolve(this.size)},t}(),zl=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ve=e,n}return Object(ro.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i&&i.maybeDocument?n.push(e.Ve.addEntry(t,i.maybeDocument,e.getReadTime(r))):e.Ve.removeEntry(r)}),oc.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ve.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ve.getEntries(t,e)},e}(sl),Gl=function(){function t(t){this.persistence=t,this.Es=new ol(function(t){return as(t)},us),this.lastRemoteSnapshotVersion=Bs.min(),this.highestTargetId=0,this.Ts=0,this.Is=new ql,this.targetCount=0,this.As=Wc.ee()}return t.prototype.forEachTarget=function(t,e){return this.Es.forEach(function(t,n){return e(n)}),oc.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return oc.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return oc.resolve(this.Ts)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.As.next(),oc.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Ts&&(this.Ts=e),oc.resolve()},t.prototype.re=function(t){this.Es.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.As=new Wc(e),this.highestTargetId=e),t.sequenceNumber>this.Ts&&(this.Ts=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.re(e),this.targetCount+=1,oc.resolve()},t.prototype.updateTargetData=function(t,e){return this.re(e),oc.resolve()},t.prototype.removeTargetData=function(t,e){return this.Es.delete(e.target),this.Is.os(e.targetId),this.targetCount-=1,oc.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.Es.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.Es.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),oc.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return oc.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.Es.get(e)||null;return oc.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this.Is.ns(e,n),oc.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this.Is.rs(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),oc.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this.Is.os(e),oc.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.Is.us(e);return oc.resolve(n)},t.prototype.containsKey=function(t,e){return oc.resolve(this.Is.containsKey(e))},t}(),Kl=function(){function t(t,e){var n=this;this.Rs={},this.Me=new io(0),this.Le=!1,this.Le=!0,this.referenceDelegate=t(this),this.Ge=new Gl(this),this.Gt=new Rc,this.ze=function(t,e){return new Hl(t,function(t){return n.referenceDelegate.bs(t)})}(this.Gt),this.D=new wc(e),this.He=new Vl(this.D)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.Le=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.Le},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Gt},t.prototype.getMutationQueue=function(t){var e=this.Rs[t.toKey()];return e||(e=new Bl(this.Gt,this.referenceDelegate),this.Rs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.Ge},t.prototype.getRemoteDocumentCache=function(){return this.ze},t.prototype.getBundleCache=function(){return this.He},t.prototype.runTransaction=function(t,e,n){var r=this;ao("MemoryPersistence","Starting transaction:",t);var i=new Wl(this.Me.next());return this.referenceDelegate.vs(),n(i).next(function(t){return r.referenceDelegate.Ps(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Vs=function(t,e){return oc.or(Object.values(this.Rs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),Wl=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(ro.c)(e,t),e}(rc),Ql=function(){function t(t){this.persistence=t,this.Ss=new ql,this.Ds=null}return t.Cs=function(e){return new t(e)},Object.defineProperty(t.prototype,"xs",{get:function(){if(this.Ds)return this.Ds;throw ho()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.Ss.addReference(n,e),this.xs.delete(n.toString()),oc.resolve()},t.prototype.removeReference=function(t,e,n){return this.Ss.removeReference(n,e),this.xs.add(n.toString()),oc.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.xs.add(e.toString()),oc.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.Ss.os(e.targetId).forEach(function(t){return n.xs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.xs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.vs=function(){this.Ds=new Set},t.prototype.Ps=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oc.forEach(this.xs,function(r){var i=jo.fromPath(r);return e.Ns(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Ds=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ns(t,e).next(function(t){t?n.xs.delete(e.toString()):n.xs.add(e.toString())})},t.prototype.bs=function(t){return 0},t.prototype.Ns=function(t,e){var n=this;return oc.or([function(){return oc.resolve(n.Ss.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Vs(t,e)}])},t}(),$l=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function Yl(t,e){return"firestore_clients_"+t+"_"+e}function Jl(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Xl(t,e){return"firestore_targets_"+t+"_"+e}$l.UNAUTHENTICATED=new $l(null),$l.GOOGLE_CREDENTIALS=new $l("google-credentials-uid"),$l.FIRST_PARTY=new $l("first-party-uid");var Zl=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.$s=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Co(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(uo("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Fs=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),th=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.$s=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Co(i.error.code,i.error.message)),o?new t(e,i.state,r):(uo("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Fs=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),eh=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.$s=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Ka(),s=0;i&&s<r.activeTargetIds.length;++s)i=To(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(uo("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),nh=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.$s=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(uo("SharedClientState","Failed to parse online state: "+e),null)},t}(),rh=function(){function t(){this.activeTargetIds=Ka()}return t.prototype.Os=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ks=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Fs=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),ih=function(){function t(t,e,n,r,i){this.window=t,this.Fe=e,this.persistenceKey=n,this.Ms=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ls=this.Bs.bind(this),this.qs=new Da(go),this.started=!1,this.Us=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Qs=Yl(this.persistenceKey,this.Ms),this.Ks=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.qs=this.qs.insert(this.Ms,new rh),this.Ws=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.js=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Gs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.zs=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Hs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.Ls)}return t.At=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(ro.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(ro.d)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.gn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ms&&(i=this.getItem(Yl(this.persistenceKey,r)))&&(o=eh.$s(r,i))&&(this.qs=this.qs.insert(o.clientId,o));for(this.Js(),(s=this.storage.getItem(this.zs))&&(a=this.Ys(s))&&this.Xs(a),u=0,c=this.Us;u<c.length;u++)this.Bs(c[u]);return this.Us=[],this.window.addEventListener("unload",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ks,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Zs(this.qs)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.qs.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.ti(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.ti(t,e,n),this.ei(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Xl(this.persistenceKey,t));if(n){var r=th.$s(t,n);r&&(e=r.state)}}return this.ni.Os(t),this.Js(),e},t.prototype.removeLocalQueryTarget=function(t){this.ni.ks(t),this.Js()},t.prototype.isLocalQueryTarget=function(t){return this.ni.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Xl(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.si(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.ei(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.ii(t)},t.prototype.notifyBundleLoaded=function(){this.ri()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.Ls),this.removeItem(this.Qs),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return ao("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){ao("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){ao("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Bs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(ao("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Qs)return void uo("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fe.enqueueRetryable(function(){return Object(ro.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(ro.d)(this,function(a){if(this.started){if(null!==n.key)if(this.Ws.test(n.key)){if(null==n.newValue)return t=this.oi(n.key),[2,this.ci(t,null)];if(e=this.ai(n.key,n.newValue))return[2,this.ci(e.clientId,e)]}else if(this.js.test(n.key)){if(null!==n.newValue&&(r=this.ui(n.key,n.newValue)))return[2,this.hi(r)]}else if(this.Gs.test(n.key)){if(null!==n.newValue&&(i=this.li(n.key,n.newValue)))return[2,this.fi(i)]}else if(n.key===this.zs){if(null!==n.newValue&&(o=this.Ys(n.newValue)))return[2,this.Xs(o)]}else if(n.key===this.Ks)(s=function(t){var e=io.o;if(null!=t)try{var n=JSON.parse(t);fo("number"==typeof n),e=n}catch(t){uo("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==io.o&&this.sequenceNumberHandler(s);else if(n.key===this.Hs)return[2,this.syncEngine.di()]}else this.Us.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"ni",{get:function(){return this.qs.get(this.Ms)},enumerable:!1,configurable:!0}),t.prototype.Js=function(){this.setItem(this.Qs,this.ni.Fs())},t.prototype.ti=function(t,e,n){var r=new Zl(this.currentUser,t,e,n),i=Jl(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Fs())},t.prototype.ei=function(t){var e=Jl(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.ii=function(t){this.storage.setItem(this.zs,JSON.stringify({clientId:this.Ms,onlineState:t}))},t.prototype.si=function(t,e,n){var r=Xl(this.persistenceKey,t),i=new th(t,e,n);this.setItem(r,i.Fs())},t.prototype.ri=function(){this.setItem(this.Hs,"value-not-used")},t.prototype.oi=function(t){var e=this.Ws.exec(t);return e?e[1]:null},t.prototype.ai=function(t,e){var n=this.oi(t);return eh.$s(n,e)},t.prototype.ui=function(t,e){var n=this.js.exec(t),r=Number(n[1]);return Zl.$s(new $l(void 0!==n[2]?n[2]:null),r,e)},t.prototype.li=function(t,e){var n=this.Gs.exec(t),r=Number(n[1]);return th.$s(r,e)},t.prototype.Ys=function(t){return nh.$s(t)},t.prototype.hi=function(t){return Object(ro.b)(this,void 0,void 0,function(){return Object(ro.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.wi(t.batchId,t.state,t.error)]:(ao("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.fi=function(t){return this.syncEngine._i(t.targetId,t.state,t.error)},t.prototype.ci=function(t,e){var n=this,r=e?this.qs.insert(t,e):this.qs.remove(t),i=this.Zs(this.qs),o=this.Zs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.mi(s,a).then(function(){n.qs=r})},t.prototype.Xs=function(t){this.qs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Zs=function(t){var e=Ka();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),oh=function(){function t(){this.yi=new rh,this.gi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.yi.Os(t),this.gi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.gi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.yi.ks(t)},t.prototype.isLocalQueryTarget=function(t){return this.yi.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.gi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.yi.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.yi.activeTargetIds.has(t)},t.prototype.start=function(){return this.yi=new rh,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),sh=function(){function t(){}return t.prototype.pi=function(t){},t.prototype.shutdown=function(){},t}(),ah=function(){function t(){var t=this;this.Ei=function(){return t.Ti()},this.Ii=function(){return t.Ai()},this.Ri=[],this.bi()}return t.prototype.pi=function(t){this.Ri.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ii)},t.prototype.bi=function(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ii)},t.prototype.Ti=function(){ao("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Ri;t<e.length;t++)(0,e[t])(0)},t.prototype.Ai=function(){ao("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Ri;t<e.length;t++)(0,e[t])(1)},t.At=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),uh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},ch=function(){function t(t){this.vi=t.vi,this.Pi=t.Pi}return t.prototype.Vi=function(t){this.Si=t},t.prototype.Di=function(t){this.Ci=t},t.prototype.onMessage=function(t){this.xi=t},t.prototype.close=function(){this.Pi()},t.prototype.send=function(t){this.vi(t)},t.prototype.Ni=function(){this.Si()},t.prototype.$i=function(t){this.Ci(t)},t.prototype.Fi=function(t){this.xi(t)},t}(),lh=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Object(ro.c)(e,t),e.prototype.qi=function(t,e,n,r){return new Promise(function(i,o){var s=new no;s.listenOnce(Zi.COMPLETE,function(){try{switch(s.getLastErrorCode()){case Xi.NO_ERROR:var e=s.getResponseJson();ao("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Xi.TIMEOUT:ao("Connection",'RPC "'+t+'" timed out'),o(new Co(So.DEADLINE_EXCEEDED,"Request time out"));break;case Xi.HTTP_ERROR:var n=s.getStatus();if(ao("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(So).indexOf(e)>=0?e:So.UNKNOWN}(r.status);o(new Co(a,r.message))}else o(new Co(So.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Co(So.UNAVAILABLE,"Connection failed."));break;default:ho()}}finally{ao("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.Qi=function(t,e){var n=[this.Oi,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Wi,i=Yn(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Bi(o.initMessageHeaders,e),Object(te.l)()||Object(te.n)()||Object(te.j)()||Object(te.k)()||Object(te.o)()||Object(te.i)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");ao("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new ch({vi:function(t){c?ao("Connection","Not sending because WebChannel is closed:",t):(u||(ao("Connection","Opening WebChannel transport."),a.open(),u=!0),ao("Connection","WebChannel sending:",t),a.send(t))},Pi:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,eo.EventType.OPEN,function(){c||ao("Connection","WebChannel transport opened.")}),h(a,eo.EventType.CLOSE,function(){c||(c=!0,ao("Connection","WebChannel transport closed"),l.$i())}),h(a,eo.EventType.ERROR,function(t){c||(c=!0,co("Connection","WebChannel transport errored:",t),l.$i(new Co(So.UNAVAILABLE,"The operation could not be completed")))}),h(a,eo.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];fo(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){ao("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Oa[t];if(void 0!==e)return ka(e)}(i),s=r.message;void 0===o&&(o=So.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.$i(new Co(o,s)),a.close()}else ao("Connection","WebChannel received:",n),l.Fi(n)}}),h(i,to.STAT_EVENT,function(t){10===t.stat?ao("Connection","Detected buffering proxy"):11===t.stat&&ao("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Ni()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Oi=(t.ssl?"https":"http")+"://"+t.host,this.ki="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Mi=function(t,e,n,r){var i=this.Li(t,e);ao("RestConnection","Sending: ",i,n);var o={};return this.Bi(o,r),this.qi(t,i,o,n).then(function(t){return ao("RestConnection","Received: ",t),t},function(e){throw co("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Ui=function(t,e,n,r){return this.Mi(t,e,n,r)},t.prototype.Bi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.3.1",t["Content-Type"]="text/plain",e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.Li=function(t,e){return this.Oi+"/v1/"+e+":"+uh[t]},t}());function hh(){return"undefined"!=typeof window?window:null}function fh(){return"undefined"!=typeof document?document:null}function dh(t){return new iu(t,!0)}var ph=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Fe=t,this.timerId=e,this.Ki=n,this.Wi=r,this.ji=i,this.Gi=0,this.zi=null,this.Hi=Date.now(),this.reset()}return t.prototype.reset=function(){this.Gi=0},t.prototype.Ji=function(){this.Gi=this.ji},t.prototype.Yi=function(t){var e=this;this.cancel();var n=Math.floor(this.Gi+this.Xi()),r=Math.max(0,Date.now()-this.Hi),i=Math.max(0,n-r);i>0&&ao("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Gi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.zi=this.Fe.enqueueAfterDelay(this.timerId,i,function(){return e.Hi=Date.now(),t()}),this.Gi*=this.Wi,this.Gi<this.Ki&&(this.Gi=this.Ki),this.Gi>this.ji&&(this.Gi=this.ji)},t.prototype.Zi=function(){null!==this.zi&&(this.zi.skipDelay(),this.zi=null)},t.prototype.cancel=function(){null!==this.zi&&(this.zi.cancel(),this.zi=null)},t.prototype.Xi=function(){return(Math.random()-.5)*this.Gi},t}(),yh=function(){function t(t,e,n,r,i,o){this.Fe=t,this.tr=n,this.er=r,this.nr=i,this.listener=o,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new ph(t,e)}return t.prototype.cr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.ar=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.ur()},t.prototype.stop=function(){return Object(ro.b)(this,void 0,void 0,function(){return Object(ro.d)(this,function(t){switch(t.label){case 0:return this.cr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.hr=function(){this.state=0,this.rr.reset()},t.prototype.lr=function(){var t=this;this.ar()&&null===this.ir&&(this.ir=this.Fe.enqueueAfterDelay(this.tr,6e4,function(){return t.dr()}))},t.prototype.wr=function(t){this._r(),this.stream.send(t)},t.prototype.dr=function(){return Object(ro.b)(this,void 0,void 0,function(){return Object(ro.d)(this,function(t){return this.ar()?[2,this.close(0)]:[2]})})},t.prototype._r=function(){this.ir&&(this.ir.cancel(),this.ir=null)},t.prototype.close=function(t,e){return Object(ro.b)(this,void 0,void 0,function(){return Object(ro.d)(this,function(n){switch(n.label){case 0:return this._r(),this.rr.cancel(),this.sr++,3!==t?this.rr.reset():e&&e.code===So.RESOURCE_EXHAUSTED?(uo(e.toString()),uo("Using maximum backoff delay to prevent overloading the backend."),this.rr.Ji()):e&&e.code===So.UNAUTHENTICATED&&this.nr.invalidateToken(),null!==this.stream&&(this.mr(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Di(e)];case 1:return n.sent(),[2]}})})},t.prototype.mr=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.yr(this.sr),n=this.sr;this.nr.getToken().then(function(e){t.sr===n&&t.gr(e)},function(n){e(function(){var e=new Co(So.UNKNOWN,"Fetching auth token failed: "+n.message);return t.pr(e)})})},t.prototype.gr=function(t){var e=this,n=this.yr(this.sr);this.stream=this.Er(t),this.stream.Vi(function(){n(function(){return e.state=2,e.listener.Vi()})}),this.stream.Di(function(t){n(function(){return e.pr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.ur=function(){var t=this;this.state=4,this.rr.Yi(function(){return Object(ro.b)(t,void 0,void 0,function(){return Object(ro.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.pr=function(t){return ao("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.yr=function(t){var e=this;return function(n){e.Fe.enqueueAndForget(function(){return e.sr===t?n():(ao("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),mh=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).D=i,s}return Object(ro.c)(e,t),e.prototype.Er=function(t){return this.er.Qi("Listen",t)},e.prototype.onMessage=function(t){this.rr.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:ho()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.V?(fo(void 0===e||"string"==typeof e),No.fromBase64String(e||"")):(fo(void 0===e||e instanceof Uint8Array),No.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?So.UNKNOWN:ka(t.code);return new Co(e,t.message||"")}(a);n=new Ja(r,i,o,s||null)}else if("documentChange"in e){i=fu(t,(r=e.documentChange).document.name),o=uu(r.document.updateTime);var a=new zs({mapValue:{fields:r.document.fields}}),u=(s=new ns(i,o,a,{}),r.targetIds||[]);n=new $a(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=fu(t,(r=e.documentDelete).document),o=r.readTime?uu(r.readTime):Bs.min(),a=new rs(i,o),n=new $a([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=fu(t,(r=e.documentRemove).document),n=new $a([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return ho();var c=e.filter;i=new xa(r=c.count||0),n=new Ya(o=c.targetId,i)}return n}(this.D,t),n=function(t){if(!("targetChange"in t))return Bs.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Bs.min():e.readTime?uu(e.readTime):Bs.min()}(t);return this.listener.Tr(e,n)},e.prototype.Ir=function(t){var e={};e.database=yu(this.D),e.addTarget=function(t,e){var n,r=e.target;return(n=cs(r)?{documents:_u(t,r)}:{query:Eu(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=su(t,e.resumeToken):e.snapshotVersion.compareTo(Bs.min())>0&&(n.readTime=ou(t,e.snapshotVersion.toTimestamp())),n}(this.D,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ho()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.wr(e)},e.prototype.Ar=function(t){var e={};e.database=yu(this.D),e.removeTarget=t,this.wr(e)},e}(yh),gh=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).D=i,s.Rr=!1,s}return Object(ro.c)(e,t),Object.defineProperty(e.prototype,"br",{get:function(){return this.Rr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.Rr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.mr=function(){this.Rr&&this.vr([])},e.prototype.Er=function(t){return this.er.Qi("Write",t)},e.prototype.onMessage=function(t){if(fo(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Rr){this.rr.reset();var e=function(t,e){return t&&t.length>0?(fo(void 0!==e),t.map(function(t){return function(t,e){var n=uu(t.updateTime?t.updateTime:e);return n.isEqual(Bs.min())&&(n=uu(e)),new ca(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=uu(t.commitTime);return this.listener.Pr(n,e)}return fo(!t.writeResults||0===t.writeResults.length),this.Rr=!0,this.listener.Vr()},e.prototype.Sr=function(){var t={};t.database=yu(this.D),this.wr(t)},e.prototype.vr=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return bu(e.D,t)})};this.wr(n)},e}(yh),vh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.er=n,i.D=r,i.Dr=!1,i}return Object(ro.c)(e,t),e.prototype.Cr=function(){if(this.Dr)throw new Co(So.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Mi=function(t,e,n){var r=this;return this.Cr(),this.credentials.getToken().then(function(i){return r.er.Mi(t,e,n,i)}).catch(function(t){throw t.code===So.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},e.prototype.Ui=function(t,e,n){var r=this;return this.Cr(),this.credentials.getToken().then(function(i){return r.er.Ui(t,e,n,i)}).catch(function(t){throw t.code===So.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},e.prototype.terminate=function(){this.Dr=!1},e}(function(){}),bh=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.Nr=0,this.$r=null,this.Fr=!0}return t.prototype.Or=function(){var t=this;0===this.Nr&&(this.kr("Unknown"),this.$r=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.$r=null,t.Mr("Backend didn't respond within 10 seconds."),t.kr("Offline"),Promise.resolve()}))},t.prototype.Lr=function(t){"Online"===this.state?this.kr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr("Connection failed 1 times. Most recent error: "+t.toString()),this.kr("Offline")))},t.prototype.set=function(t){this.Br(),this.Nr=0,"Online"===t&&(this.Fr=!1),this.kr(t)},t.prototype.kr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Mr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Fr?(uo(e),this.Fr=!1):ao("OnlineStateTracker",e)},t.prototype.Br=function(){null!==this.$r&&(this.$r.cancel(),this.$r=null)},t}(),wh=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.qr=[],this.Ur=new Map,this.Qr=new Set,this.Kr=[],this.Wr=i,this.Wr.pi(function(t){n.enqueueAndForget(function(){return Object(ro.b)(o,void 0,void 0,function(){return Object(ro.d)(this,function(t){switch(t.label){case 0:return Ah(this)?(ao("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(ro.b)(this,void 0,void 0,function(){var e;return Object(ro.d)(this,function(n){switch(n.label){case 0:return(e=po(t)).Qr.add(4),[4,Eh(e)];case 1:return n.sent(),e.jr.set("Unknown"),e.Qr.delete(4),[4,_h(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.jr=new bh(n,r)};function _h(t){return Object(ro.b)(this,void 0,void 0,function(){var e,n;return Object(ro.d)(this,function(r){switch(r.label){case 0:if(!Ah(t))return[3,4];e=0,n=t.Kr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Eh(t){return Object(ro.b)(this,void 0,void 0,function(){var e,n;return Object(ro.d)(this,function(r){switch(r.label){case 0:e=0,n=t.Kr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Ih(t,e){var n=po(t);n.Ur.has(e.targetId)||(n.Ur.set(e.targetId,e),xh(n)?Ch(n):zh(n).ar()&&Th(n,e))}function Oh(t,e){var n=po(t),r=zh(n);n.Ur.delete(e),r.ar()&&Sh(n,e),0===n.Ur.size&&(r.ar()?r.lr():Ah(n)&&n.jr.set("Unknown"))}function Th(t,e){t.Gr.H(e.targetId),zh(t).Ir(e)}function Sh(t,e){t.Gr.H(e),zh(t).Ar(e)}function Ch(t){t.Gr=new Za({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},yt:function(e){return t.Ur.get(e)||null}}),zh(t).start(),t.jr.Or()}function xh(t){return Ah(t)&&!zh(t).cr()&&t.Ur.size>0}function Ah(t){return 0===po(t).Qr.size}function kh(t){t.Gr=void 0}function Dh(t){return Object(ro.b)(this,void 0,void 0,function(){return Object(ro.d)(this,function(e){return t.Ur.forEach(function(e,n){Th(t,e)}),[2]})})}function jh(t,e){return Object(ro.b)(this,void 0,void 0,function(){return Object(ro.d)(this,function(n){return kh(t),xh(t)?(t.jr.Lr(e),Ch(t)):t.jr.set("Unknown"),[2]})})}function Nh(t,e,n){return Object(ro.b)(this,void 0,void 0,function(){var r,i,o;return Object(ro.d)(this,function(s){switch(s.label){case 0:if(t.jr.set("Online"),!(e instanceof Ja&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(ro.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(ro.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Ur.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Ur.delete(o),t.Gr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),ao("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Rh(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof $a?t.Gr.st(e):e instanceof Ya?t.Gr.ht(e):t.Gr.ot(e),n.isEqual(Bs.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Cl(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.Gr.dt(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Ur.get(r);i&&t.Ur.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.Ur.get(e);if(n){t.Ur.set(e,n.withResumeToken(No.EMPTY_BYTE_STRING,n.snapshotVersion)),Sh(t,e);var r=new bc(n.target,e,1,n.sequenceNumber);Th(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return ao("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Rh(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function Rh(t,e,n){return Object(ro.b)(this,void 0,void 0,function(){var r=this;return Object(ro.d)(this,function(i){switch(i.label){case 0:if(!lc(e))throw e;return t.Qr.add(1),[4,Eh(t)];case 1:return i.sent(),t.jr.set("Offline"),n||(n=function(){return Cl(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return Object(ro.b)(r,void 0,void 0,function(){return Object(ro.d)(this,function(e){switch(e.label){case 0:return ao("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Qr.delete(1),[4,_h(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function Ph(t,e){return e().catch(function(n){return Rh(t,n,e)})}function Lh(t){return Object(ro.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(ro.d)(this,function(s){switch(s.label){case 0:e=po(t),n=Gh(e),r=e.qr.length>0?e.qr[e.qr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Ah(t)&&t.qr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,kl(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.qr.length&&n.lr(),[3,7]):(r=i.batchId,function(t,e){t.qr.push(e);var n=Gh(t);n.ar()&&n.br&&n.vr(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Rh(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Mh(e)&&Fh(e),[2]}})})}function Mh(t){return Ah(t)&&!Gh(t).cr()&&t.qr.length>0}function Fh(t){Gh(t).start()}function Vh(t){return Object(ro.b)(this,void 0,void 0,function(){return Object(ro.d)(this,function(e){return Gh(t).Sr(),[2]})})}function qh(t){return Object(ro.b)(this,void 0,void 0,function(){var e,n,r;return Object(ro.d)(this,function(i){for(e=Gh(t),n=0,r=t.qr;n<r.length;n++)e.vr(r[n].mutations);return[2]})})}function Uh(t,e,n){return Object(ro.b)(this,void 0,void 0,function(){var r,i;return Object(ro.d)(this,function(o){switch(o.label){case 0:return r=t.qr.shift(),i=vc.from(r,e,n),[4,Ph(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,Lh(t)];case 2:return o.sent(),[2]}})})}function Bh(t,e){return Object(ro.b)(this,void 0,void 0,function(){return Object(ro.d)(this,function(n){switch(n.label){case 0:return e&&Gh(t).br?[4,function(t,e){return Object(ro.b)(this,void 0,void 0,function(){var n,r;return Object(ro.d)(this,function(i){switch(i.label){case 0:return Aa(r=e.code)&&r!==So.ABORTED?(n=t.qr.shift(),Gh(t).hr(),[4,Ph(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,Lh(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Mh(t)&&Fh(t),[2]}})})}function Hh(t,e){return Object(ro.b)(this,void 0,void 0,function(){var n;return Object(ro.d)(this,function(r){switch(r.label){case 0:return n=po(t),e?(n.Qr.delete(2),[4,_h(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Qr.add(2),[4,Eh(n)]);case 3:r.sent(),n.jr.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function zh(t){var e=this;return t.zr||(t.zr=function(t,e,n){var r=po(t);return r.Cr(),new mh(e,r.er,r.credentials,r.D,n)}(t.datastore,t.asyncQueue,{Vi:Dh.bind(null,t),Di:jh.bind(null,t),Tr:Nh.bind(null,t)}),t.Kr.push(function(n){return Object(ro.b)(e,void 0,void 0,function(){return Object(ro.d)(this,function(e){switch(e.label){case 0:return n?(t.zr.hr(),xh(t)?Ch(t):t.jr.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.zr.stop()];case 2:e.sent(),kh(t),e.label=3;case 3:return[2]}})})})),t.zr}function Gh(t){var e=this;return t.Hr||(t.Hr=function(t,e,n){var r=po(t);return r.Cr(),new gh(e,r.er,r.credentials,r.D,n)}(t.datastore,t.asyncQueue,{Vi:Vh.bind(null,t),Di:Bh.bind(null,t),Vr:qh.bind(null,t),Pr:Uh.bind(null,t)}),t.Kr.push(function(n){return Object(ro.b)(e,void 0,void 0,function(){return Object(ro.d)(this,function(e){switch(e.label){case 0:return n?(t.Hr.hr(),[4,Lh(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Hr.stop()];case 3:e.sent(),t.qr.length>0&&(ao("RemoteStore","Stopping write stream with "+t.qr.length+" pending writes"),t.qr=[]),e.label=4;case 4:return[2]}})})})),t.Hr}var Kh=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new ic,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Co(So.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Wh(t,e){if(uo("AsyncQueue",e+": "+t),lc(t))return new Co(So.UNAVAILABLE,e+": "+t);throw t}var Qh=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||jo.comparator(e.key,n.key)}:function(t,e){return jo.comparator(t.key,e.key)},this.keyedMap=qa(),this.sortedSet=new Da(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),$h=function(){function t(){this.Jr=new Da(jo.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Jr.get(e);n?0!==t.type&&3===n.type?this.Jr=this.Jr.insert(e,t):3===t.type&&1!==n.type?this.Jr=this.Jr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Jr=this.Jr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Jr=this.Jr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Jr=this.Jr.remove(e):1===t.type&&2===n.type?this.Jr=this.Jr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Jr=this.Jr.insert(e,{type:2,doc:t.doc}):ho():this.Jr=this.Jr.insert(e,t)},t.prototype.Yr=function(){var t=[];return this.Jr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Yh=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,Qh.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ls(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Jh=function(){this.Xr=void 0,this.listeners=[]},Xh=function(){this.queries=new ol(function(t){return Ms(t)},Ls),this.onlineState="Unknown",this.Zr=new Set};function Zh(t,e){return Object(ro.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(ro.d)(this,function(c){switch(c.label){case 0:if(n=po(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new Jh),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Xr=c.sent(),[3,4];case 3:return a=c.sent(),u=Wh(a,"Initialization of query '"+Fs(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.eo(n.onlineState),o.Xr&&e.no(o.Xr)&&rf(n),[2]}})})}function tf(t,e){return Object(ro.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(ro.d)(this,function(a){return n=po(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function ef(t,e){for(var n=po(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].no(s)&&(r=!0);a.Xr=s}}r&&rf(n)}function nf(t,e,n){var r=po(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function rf(t){t.Zr.forEach(function(t){t.next()})}var of=function(){function t(t,e,n){this.query=t,this.so=e,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.no=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Yh(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.io?this.oo(t)&&(this.so.next(t),o=!0):this.co(t,this.onlineState)&&(this.ao(t),o=!0),this.ro=t,o},t.prototype.onError=function(t){this.so.error(t)},t.prototype.eo=function(t){this.onlineState=t;var e=!1;return this.ro&&!this.io&&this.co(this.ro,t)&&(this.ao(this.ro),e=!0),e},t.prototype.co=function(t,e){return!t.fromCache||!(this.options.uo&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.oo=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.ao=function(t){t=Yh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.io=!0,this.so.next(t)},t}(),sf=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.ho=function(){return"metadata"in this.payload},t}(),af=function(){function t(t){this.D=t}return t.prototype.Gn=function(t){return fu(this.D,t)},t.prototype.zn=function(t){return t.metadata.exists?vu(this.D,t.document,!1):new rs(this.Gn(t.metadata.name),this.Hn(t.metadata.readTime))},t.prototype.Hn=function(t){return uu(t)},t}();!function(){function t(t,e,n){this.lo=t,this.localStore=e,this.D=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.fo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.wo=function(t){for(var e=new Map,n=new af(this.D),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.Gn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||za()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(ro.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(ro.d)(this,function(o){switch(o.label){case 0:return[4,Ml(this.localStore,new af(this.D),this.documents,this.lo.id)];case 1:t=o.sent(),e=this.wo(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,Fl(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new bl(Object.assign({},this.progress),t))]}})})}}();var uf=function(t){this.key=t},cf=function(t){this.key=t},lf=function(){function t(t,e){this.query=t,this._o=e,this.mo=null,this.current=!1,this.yo=za(),this.mutatedKeys=za(),this.po=qs(t),this.Eo=new Qh(this.po)}return Object.defineProperty(t.prototype,"To",{get:function(){return this._o},enumerable:!1,configurable:!0}),t.prototype.Io=function(t,e){var n=this,r=e?e.Ao:new $h,i=e?e.Eo:this.Eo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=xs(this.query)&&i.size===this.query.limit?i.last():null,c=As(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=e instanceof ns?e:null;h&&(h=Vs(n.query,h)?h:null);var f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Ro(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.po(h,u)>0||c&&n.po(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),xs(this.query)||As(this.query))for(;s.size>this.query.limit;){var l=xs(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{Eo:s,Ao:r,Mn:a,mutatedKeys:o}},t.prototype.Ro=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.Eo;this.Eo=t.Eo,this.mutatedKeys=t.mutatedKeys;var o=t.Ao.Yr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ho()}};return n(t)-n(e)}(t.type,e.type)||r.po(t.doc,e.doc)}),this.bo(n);var s=e?this.vo():[],a=0===this.yo.size&&this.current?1:0,u=a!==this.mo;return this.mo=a,0!==o.length||u?{snapshot:new Yh(this.query,t.Eo,i,o,t.mutatedKeys,0===a,u,!1),Po:s}:{Po:s}},t.prototype.eo=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new $h,mutatedKeys:this.mutatedKeys,Mn:!1},!1)):{Po:[]}},t.prototype.Vo=function(t){return!this._o.has(t)&&!!this.Eo.has(t)&&!this.Eo.get(t).hasLocalMutations},t.prototype.bo=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e._o=e._o.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e._o=e._o.delete(t)}),this.current=t.current)},t.prototype.vo=function(){var t=this;if(!this.current)return[];var e=this.yo;this.yo=za(),this.Eo.forEach(function(e){t.Vo(e.key)&&(t.yo=t.yo.add(e.key))});var n=[];return e.forEach(function(e){t.yo.has(e)||n.push(new cf(e))}),this.yo.forEach(function(t){e.has(t)||n.push(new uf(t))}),n},t.prototype.So=function(t){this._o=t.jn,this.yo=za();var e=this.Io(t.documents);return this.applyChanges(e,!0)},t.prototype.Do=function(){return Yh.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)},t}(),hf=function(t,e,n){this.query=t,this.targetId=e,this.view=n},ff=function(t){this.key=t,this.Co=!1},df=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.xo={},this.No=new ol(function(t){return Ms(t)},Ls),this.$o=new Map,this.Fo=new Set,this.Oo=new Da(jo.comparator),this.ko=new Map,this.Mo=new ql,this.Lo={},this.Bo=new Map,this.qo=Wc.ne(),this.onlineState="Unknown",this.Uo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Uo},enumerable:!1,configurable:!0}),t}();function pf(t,e){return Object(ro.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(ro.d)(this,function(a){switch(a.label){case 0:return n=Hf(t),(i=n.No.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Do(),[3,4]):[3,1];case 1:return[4,Dl(n.localStore,Rs(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,yf(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&Ih(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function yf(t,e,n,r){return Object(ro.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(ro.d)(this,function(l){switch(l.label){case 0:return t.Qo=function(e,n,r){return function(t,e,n,r){return Object(ro.b)(this,void 0,void 0,function(){var i,o,s;return Object(ro.d)(this,function(a){switch(a.label){case 0:return(i=e.view.Io(n)).Mn?[4,Nl(t.localStore,e.query,!1).then(function(t){return e.view.Io(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(xf(t,e.targetId,s.Po),s.snapshot)]}})})}(t,e,n,r)},[4,Nl(t.localStore,e,!0)];case 1:return i=l.sent(),o=new lf(e,i.jn),s=o.Io(i.documents),a=Qa.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),xf(t,n,u.Po),c=new hf(e,n,o),[2,(t.No.set(e,c),t.$o.has(n)?t.$o.get(n).push(e):t.$o.set(n,[e]),u.snapshot)]}})})}function mf(t,e){return Object(ro.b)(this,void 0,void 0,function(){var n,r,i;return Object(ro.d)(this,function(o){switch(o.label){case 0:return n=po(t),r=n.No.get(e),(i=n.$o.get(r.targetId)).length>1?[2,(n.$o.set(r.targetId,i.filter(function(t){return!Ls(t,e)})),void n.No.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,jl(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),Oh(n.remoteStore,r.targetId),Sf(n,r.targetId)}).catch(Xc)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Sf(n,r.targetId),[4,jl(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function gf(t,e,n){return Object(ro.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(ro.d)(this,function(a){switch(a.label){case 0:r=zf(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=po(t),i=Fo.now(),o=e.reduce(function(t,e){return t.add(e.key)},za());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Kn.bn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=ya(c,n.get(c.key));null!=l&&s.push(new ba(c.key,l,Ks(l.proto.mapValue),la.exists(!0)))}return r.Tn.addMutationBatch(t,i,s,e)})}).then(function(t){var e=t.applyToLocalDocumentSet(n);return{batchId:t.batchId,changes:e}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.Lo[t.currentUser.toKey()];r||(r=new Da(go)),r=r.insert(e,n),t.Lo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Df(r,i.changes)];case 3:return a.sent(),[4,Lh(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Wh(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function vf(t,e){return Object(ro.b)(this,void 0,void 0,function(){var n,r;return Object(ro.d)(this,function(i){switch(i.label){case 0:n=po(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,xl(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.ko.get(e);r&&(fo(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.Co=!0:t.modifiedDocuments.size>0?fo(r.Co):t.removedDocuments.size>0&&(fo(r.Co),r.Co=!1))}),[4,Df(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Xc(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function bf(t,e,n){var r=po(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.No.forEach(function(t,n){var r=n.view.eo(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=po(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].eo(e)&&(r=!0)}),r&&rf(n)}(r.eventManager,e),i.length&&r.xo.Tr(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function wf(t,e,n){return Object(ro.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(ro.d)(this,function(c){switch(c.label){case 0:return(r=po(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.ko.get(e),(o=i&&i.key)?(s=(s=new Da(jo.comparator)).insert(o,new rs(o,Bs.min())),a=za().add(o),u=new Wa(Bs.min(),new Map,new Ra(go),s,a),[4,vf(r,u)]):[3,2];case 1:return c.sent(),r.Oo=r.Oo.remove(o),r.ko.delete(e),kf(r),[3,4];case 2:return[4,jl(r.localStore,e,!1).then(function(){return Sf(r,e,n)}).catch(Xc)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function _f(t,e){return Object(ro.b)(this,void 0,void 0,function(){var n,r,i;return Object(ro.d)(this,function(o){switch(o.label){case 0:n=po(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Sl(n.localStore,e)];case 2:return i=o.sent(),Tf(n,r,null),Of(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Df(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Xc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Ef(t,e,n){return Object(ro.b)(this,void 0,void 0,function(){var r,i;return Object(ro.d)(this,function(o){switch(o.label){case 0:r=po(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=po(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n.Tn.lookupMutationBatch(t,e).next(function(e){return fo(null!==e),r=e.keys(),n.Tn.removeMutationBatch(t,e)}).next(function(){return n.Tn.performConsistencyCheck(t)}).next(function(){return n.Kn.bn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),Tf(r,e,n),Of(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Df(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Xc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function If(t,e){return Object(ro.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(ro.d)(this,function(a){switch(a.label){case 0:Ah((n=po(t)).remoteStore)||ao("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=po(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.Tn.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Bo.get(r)||[]).push(e),n.Bo.set(r,i),[3,4]);case 3:return o=a.sent(),s=Wh(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function Of(t,e){(t.Bo.get(e)||[]).forEach(function(t){t.resolve()}),t.Bo.delete(e)}function Tf(t,e,n){var r=po(t),i=r.Lo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Lo[r.currentUser.toKey()]=i}}function Sf(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.$o.get(e);r<i.length;r++){var o=i[r];t.No.delete(o),n&&t.xo.Ko(o,n)}t.$o.delete(e),t.isPrimaryClient&&t.Mo.os(e).forEach(function(e){t.Mo.containsKey(e)||Cf(t,e)})}function Cf(t,e){t.Fo.delete(e.path.canonicalString());var n=t.Oo.get(e);null!==n&&(Oh(t.remoteStore,n),t.Oo=t.Oo.remove(e),t.ko.delete(n),kf(t))}function xf(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof uf?(t.Mo.addReference(o.key,e),Af(t,o)):o instanceof cf?(ao("SyncEngine","Document no longer in limbo: "+o.key),t.Mo.removeReference(o.key,e),t.Mo.containsKey(o.key)||Cf(t,o.key)):ho()}}function Af(t,e){var n=e.key,r=n.path.canonicalString();t.Oo.get(n)||t.Fo.has(r)||(ao("SyncEngine","New document in limbo: "+n),t.Fo.add(r),kf(t))}function kf(t){for(;t.Fo.size>0&&t.Oo.size<t.maxConcurrentLimboResolutions;){var e=t.Fo.values().next().value;t.Fo.delete(e);var n=new jo(Ao.fromString(e)),r=t.qo.next();t.ko.set(r,new ff(n)),t.Oo=t.Oo.insert(n,r),Ih(t.remoteStore,new bc(Rs(Cs(n.path)),r,2,io.o))}}function Df(t,e,n){return Object(ro.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(ro.d)(this,function(a){switch(a.label){case 0:return r=po(t),i=[],o=[],s=[],r.No.isEmpty()?[3,3]:(r.No.forEach(function(t,a){s.push(r.Qo(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=_l.Nn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.xo.Tr(i),[4,function(t,e){return Object(ro.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(ro.d)(this,function(l){switch(l.label){case 0:n=po(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return oc.forEach(e,function(e){return oc.forEach(e.Cn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return oc.forEach(e.xn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!lc(r=l.sent()))throw r;return ao("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Bn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Bn=n.Bn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function jf(t,e){return Object(ro.b)(this,void 0,void 0,function(){var n,r;return Object(ro.d)(this,function(i){switch(i.label){case 0:return(n=po(t)).currentUser.isEqual(e)?[3,3]:(ao("SyncEngine","User change. New user:",e.toKey()),[4,Tl(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Bo.forEach(function(t){t.forEach(function(t){t.reject(new Co(So.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Bo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Df(n,r.Wn)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function Nf(t,e){var n=po(t),r=n.ko.get(e);if(r&&r.Co)return za().add(r.key);var i=za(),o=n.$o.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.No.get(a[s]);i=i.unionWith(u.view.To)}return i}function Rf(t,e){return Object(ro.b)(this,void 0,void 0,function(){var n,r,i;return Object(ro.d)(this,function(o){switch(o.label){case 0:return[4,Nl((n=po(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.So(r),[2,(n.isPrimaryClient&&xf(n,e.targetId,i.Po),i)]}})})}function Pf(t){return Object(ro.b)(this,void 0,void 0,function(){var e;return Object(ro.d)(this,function(n){return[2,Pl((e=po(t)).localStore).then(function(t){return Df(e,t)})]})})}function Lf(t,e,n,r){return Object(ro.b)(this,void 0,void 0,function(){var i,o;return Object(ro.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=po(t),r=po(n.Tn);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.Jt(t,e).next(function(e){return e?n.Kn.bn(t,e):oc.resolve(null)})})}((i=po(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Lh(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Tf(i,e,r||null),Of(i,e),function(t,e){po(po(t).Tn).Xt(e)}(i.localStore,e)):ho(),s.label=4;case 4:return[4,Df(i,o)];case 5:return s.sent(),[3,7];case 6:ao("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function Mf(t,e){return Object(ro.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(ro.d)(this,function(c){switch(c.label){case 0:return Hf(n=po(t)),zf(n),!0!==e||!0===n.Uo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Ff(n,r.toArray())]);case 1:return i=c.sent(),n.Uo=!0,[4,Hh(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)Ih(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.Uo?[3,7]:(a=[],u=Promise.resolve(),n.$o.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return Sf(n,e),jl(n.localStore,e,!0)}),Oh(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,Ff(n,a)];case 5:return c.sent(),function(t){var e=po(t);e.ko.forEach(function(t,n){Oh(e.remoteStore,n)}),e.Mo.cs(),e.ko=new Map,e.Oo=new Da(jo.comparator)}(n),n.Uo=!1,[4,Hh(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function Ff(t,e,n){return Object(ro.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return Object(ro.d)(this,function(y){switch(y.label){case 0:n=po(t),r=[],i=[],o=0,s=e,y.label=1;case 1:return o<s.length?(u=void 0,(c=n.$o.get(a=s[o]))&&0!==c.length?[4,Dl(n.localStore,Rs(c[0]))]:[3,7]):[3,13];case 2:u=y.sent(),l=0,h=c,y.label=3;case 3:return l<h.length?(f=n.No.get(h[l]),[4,Rf(n,f)]):[3,6];case 4:(d=y.sent()).snapshot&&i.push(d.snapshot),y.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Rl(n.localStore,a)];case 8:return p=y.sent(),[4,Dl(n.localStore,p)];case 9:return u=y.sent(),[4,yf(n,Vf(p),a,!1)];case 10:y.sent(),y.label=11;case 11:r.push(u),y.label=12;case 12:return o++,[3,1];case 13:return[2,(n.xo.Tr(i),r)]}})})}function Vf(t){return Ss(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function qf(t){var e=po(t);return po(po(e.localStore).persistence).gn()}function Uf(t,e,n,r){return Object(ro.b)(this,void 0,void 0,function(){var i,o,s;return Object(ro.d)(this,function(a){switch(a.label){case 0:return(i=po(t)).Uo?(ao("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.$o.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Pl(i.localStore)];case 3:return o=a.sent(),s=Wa.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Df(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,jl(i.localStore,e,!0)];case 6:return a.sent(),Sf(i,e,r),[3,8];case 7:ho(),a.label=8;case 8:return[2]}})})}function Bf(t,e,n){return Object(ro.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(ro.d)(this,function(f){switch(f.label){case 0:if(!(r=Hf(t)).Uo)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.$o.has(s=o[i])?(ao("SyncEngine","Adding an already active target "+s),[3,5]):[4,Rl(r.localStore,s)]:[3,6];case 2:return a=f.sent(),[4,Dl(r.localStore,a)];case 3:return u=f.sent(),[4,yf(r,Vf(a),u.targetId,!1)];case 4:f.sent(),Ih(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(ro.d)(this,function(e){switch(e.label){case 0:return r.$o.has(t)?[4,jl(r.localStore,t,!1).then(function(){Oh(r.remoteStore,t),Sf(r,t)}).catch(Xc)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function Hf(t){var e=po(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=vf.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Nf.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wf.bind(null,e),e.xo.Tr=ef.bind(null,e.eventManager),e.xo.Ko=nf.bind(null,e.eventManager),e}function zf(t){var e=po(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_f.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ef.bind(null,e),e}var Gf=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(ro.b)(this,void 0,void 0,function(){return Object(ro.d)(this,function(e){switch(e.label){case 0:return this.D=dh(t.databaseInfo.databaseId),this.sharedClientState=this.jo(t),this.persistence=this.Go(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.zo(t),this.localStore=this.Ho(t),[2]}})})},t.prototype.zo=function(t){return null},t.prototype.Ho=function(t){return Ol(this.persistence,new El,t.initialUser,this.D)},t.prototype.Go=function(t){return new Kl(Ql.Cs,this.D)},t.prototype.jo=function(t){return new oh},t.prototype.terminate=function(){return Object(ro.b)(this,void 0,void 0,function(){return Object(ro.d)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),Kf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Jo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(ro.c)(e,t),e.prototype.initialize=function(e){return Object(ro.b)(this,void 0,void 0,function(){return Object(ro.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Ll(this.localStore)];case 2:return n.sent(),[4,this.Jo.initialize(this,e)];case 3:return n.sent(),[4,zf(this.Jo.syncEngine)];case 4:return n.sent(),[4,Lh(this.Jo.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Ho=function(t){return Ol(this.persistence,new El,t.initialUser,this.D)},e.prototype.zo=function(t){return new el(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.Go=function(t){var e=vl(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Vc.withCacheSize(this.cacheSizeBytes):Vc.DEFAULT;return new yl(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,hh(),fh(),this.D,this.sharedClientState,!!this.forceOwnership)},e.prototype.jo=function(t){return new oh},e}(Gf),Wf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Jo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(ro.c)(e,t),e.prototype.initialize=function(e){return Object(ro.b)(this,void 0,void 0,function(){var n,r=this;return Object(ro.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Jo.syncEngine,this.sharedClientState instanceof ih?(this.sharedClientState.syncEngine={wi:Lf.bind(null,n),_i:Uf.bind(null,n),mi:Bf.bind(null,n),gn:qf.bind(null,n),di:Pf.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.en(function(t){return Object(ro.b)(r,void 0,void 0,function(){return Object(ro.d)(this,function(e){switch(e.label){case 0:return[4,Mf(this.Jo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.jo=function(t){var e=hh();if(!ih.At(e))throw new Co(So.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=vl(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new ih(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Kf),Qf=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(ro.b)(this,void 0,void 0,function(){var n=this;return Object(ro.d)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return bf(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=jf.bind(null,this.syncEngine),[4,Hh(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new Xh},t.prototype.createDatastore=function(t){var e=dh(t.databaseInfo.databaseId),n=new lh(t.databaseInfo);return function(t,e,n){return new vh(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return bf(s.syncEngine,t,0)},o=ah.At()?new ah:new sh,new wh(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new df(t,e,n,r,i,o);return s&&(a.Uo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(ro.b)(this,void 0,void 0,function(){var e;return Object(ro.d)(this,function(n){switch(n.label){case 0:return e=po(t),ao("RemoteStore","RemoteStore shutting down."),e.Qr.add(5),[4,Eh(e)];case 1:return n.sent(),e.Wr.shutdown(),e.jr.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),$f=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.Yo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.Yo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Xo=function(){this.muted=!0},t.prototype.Yo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Yf=(function(){function t(t,e){var n=this;this.Zo=t,this.D=e,this.metadata=new ic,this.buffer=new Uint8Array,this.tc=new TextDecoder("utf-8"),this.ec().then(function(t){t&&t.ho()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Zo.cancel()},t.prototype.getMetadata=function(){return Object(ro.b)(this,void 0,void 0,function(){return Object(ro.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Wo=function(){return Object(ro.b)(this,void 0,void 0,function(){return Object(ro.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.ec())]}})})},t.prototype.ec=function(){return Object(ro.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(ro.d)(this,function(i){switch(i.label){case 0:return[4,this.nc()];case 1:return null===(t=i.sent())?[2,null]:(e=this.tc.decode(t),n=Number(e),isNaN(n)&&this.sc("length string ("+e+") is not valid number"),[4,this.ic(n)]);case 2:return r=i.sent(),[2,new sf(JSON.parse(r),t.length+n)]}})})},t.prototype.rc=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.nc=function(){return Object(ro.b)(this,void 0,void 0,function(){var t,e;return Object(ro.d)(this,function(n){switch(n.label){case 0:return this.rc()<0?[4,this.oc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.rc())<0&&this.sc("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.ic=function(t){return Object(ro.b)(this,void 0,void 0,function(){var e;return Object(ro.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.oc()]:[3,3];case 1:n.sent()&&this.sc("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.tc.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.sc=function(t){throw this.Zo.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.oc=function(){return Object(ro.b)(this,void 0,void 0,function(){var t,e;return Object(ro.d)(this,function(n){switch(n.label){case 0:return[4,this.Zo.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(ro.b)(this,void 0,void 0,function(){var e,n=this;return Object(ro.d)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Co(So.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(ro.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(ro.d)(this,function(u){switch(u.label){case 0:return n=po(t),r=yu(n.D)+"/documents",i={documents:e.map(function(t){return hu(n.D,t)})},[4,n.Ui("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){fo(!!e.found);var n=fu(t,e.found.name),r=uu(e.found.updateTime),i=new zs({mapValue:{fields:e.found.fields}});return new ns(n,r,i,{})}(t,e):"missing"in e?function(t,e){fo(!!e.missing),fo(!!e.readTime);var n=fu(t,e.missing),r=uu(e.readTime);return new rs(n,r)}(t,e):ho()}(n.D,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());fo(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){t instanceof rs||t instanceof ns?n.recordVersion(t):ho()}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Sa(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(ro.b)(this,void 0,void 0,function(){var t,e=this;return Object(ro.d)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=jo.fromPath(n);e.mutations.push(new Ca(r,e.precondition(r)))}),[4,function(t,e){return Object(ro.b)(this,void 0,void 0,function(){var n,r,i;return Object(ro.d)(this,function(o){switch(o.label){case 0:return n=po(t),r=yu(n.D)+"/documents",i={writes:e.map(function(t){return bu(n.D,t)})},[4,n.Mi("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t instanceof ns)e=t.version;else{if(!(t instanceof rs))throw ho();e=Bs.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Co(So.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?la.updateTime(e):la.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Bs.min()))throw new Co(So.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return la.updateTime(e)}return la.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),Jf=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.cc=5,this.rr=new ph(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ac()},t.prototype.ac=function(){var t=this;this.rr.Yi(function(){return Object(ro.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(ro.d)(this,function(r){return t=new Yf(this.datastore),(e=this.uc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.hc(t)})})}).catch(function(t){n.hc(t)}),[2]})})})},t.prototype.uc=function(t){try{var e=this.updateFunction(t);return!Io(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.hc=function(t){var e=this;this.cc>0&&this.lc(t)?(this.cc-=1,this.asyncQueue.enqueueAndForget(function(){return e.ac(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.lc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Aa(e)}return!1},t}(),Xf=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=$l.UNAUTHENTICATED,this.clientId=mo.u(),this.credentialListener=function(){},this.receivedInitialUser=new ic,this.credentials.setChangeListener(function(t){ao("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()})}return t.prototype.getConfiguration=function(){return Object(ro.b)(this,void 0,void 0,function(){return Object(ro.d)(this,function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}})})},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then(function(){return e.credentialListener(e.user)})},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Co(So.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new ic;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return Object(ro.b)(t,void 0,void 0,function(){var t,n;return Object(ro.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Wh(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function Zf(t,e){return Object(ro.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(ro.d)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),ao("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable(function(){return Object(ro.b)(i,void 0,void 0,function(){return Object(ro.d)(this,function(t){switch(t.label){case 0:return[4,Tl(e.localStore,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function td(t,e){return Object(ro.b)(this,void 0,void 0,function(){var n,r;return Object(ro.d)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,ed(t)];case 1:return n=i.sent(),ao("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(n){return t.asyncQueue.enqueueRetryable(function(){return function(t,e){return Object(ro.b)(this,void 0,void 0,function(){var n,r;return Object(ro.d)(this,function(i){switch(i.label){case 0:return(n=po(t)).asyncQueue.verifyOperationInProgress(),ao("RemoteStore","RemoteStore received new credentials"),r=Ah(n),n.Qr.add(3),[4,Eh(n)];case 1:return i.sent(),r&&n.jr.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Qr.delete(3),[4,_h(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,n)})}),t.onlineComponents=e,[2]}})})}function ed(t){return Object(ro.b)(this,void 0,void 0,function(){return Object(ro.d)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(ao("FirestoreClient","Using default OfflineComponentProvider"),[4,Zf(t,new Gf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function nd(t){return Object(ro.b)(this,void 0,void 0,function(){return Object(ro.d)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(ao("FirestoreClient","Using default OnlineComponentProvider"),[4,td(t,new Qf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function rd(t){return ed(t).then(function(t){return t.persistence})}function id(t){return ed(t).then(function(t){return t.localStore})}function od(t){return nd(t).then(function(t){return t.remoteStore})}function sd(t){return nd(t).then(function(t){return t.syncEngine})}function ad(t){return Object(ro.b)(this,void 0,void 0,function(){var e,n;return Object(ro.d)(this,function(r){switch(r.label){case 0:return[4,nd(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=pf.bind(null,e.syncEngine),n.onUnlisten=mf.bind(null,e.syncEngine),n)]}})})}function ud(t,e,n){var r=this;void 0===n&&(n={});var i=new ic;return t.asyncQueue.enqueueAndForget(function(){return Object(ro.b)(r,void 0,void 0,function(){var r;return Object(ro.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new $f({next:function(o){e.enqueueAndForget(function(){return tf(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Co(So.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Co(So.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new of(Cs(n.path),o,{includeMetadataChanges:!0,uo:!0});return Zh(t,s)},[4,ad(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function cd(t,e,n){var r=this;void 0===n&&(n={});var i=new ic;return t.asyncQueue.enqueueAndForget(function(){return Object(ro.b)(r,void 0,void 0,function(){var r;return Object(ro.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new $f({next:function(n){e.enqueueAndForget(function(){return tf(t,s)}),n.fromCache&&"server"===r.source?i.reject(new Co(So.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new of(n,o,{includeMetadataChanges:!0,uo:!0});return Zh(t,s)},[4,ad(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var ld=function(t,e,n,r,i,o){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.autoDetectLongPolling=o},hd=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),fd=new Map,dd=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},pd=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t($l.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),yd=function(){function t(t){var e=this;this.fc=null,this.currentUser=$l.UNAUTHENTICATED,this.receivedInitialUser=!1,this.dc=0,this.changeListener=null,this.forceRefresh=!1,this.fc=function(){e.dc++,e.currentUser=e.wc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.dc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.fc):(this.fc(null),t.get().then(function(t){e.auth=t,e.fc&&e.auth.addAuthTokenListener(e.fc)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.dc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.dc!==e?(ao("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(fo("string"==typeof n.accessToken),new dd(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.fc),this.fc=null,this.changeListener=null},t.prototype.wc=function(){var t=this.auth&&this.auth.getUid();return fo(null===t||"string"==typeof t),new $l(t)},t}(),md=function(){function t(t,e){this._c=t,this.mc=e,this.type="FirstParty",this.user=$l.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.mc},e=this._c.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),gd=function(){function t(t,e){this._c=t,this.mc=e}return t.prototype.getToken=function(){return Promise.resolve(new md(this._c,this.mc))},t.prototype.setChangeListener=function(t){t($l.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function vd(t,e,n){if(!n)throw new Co(So.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function bd(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Co(So.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function wd(t,e,n,r){if(!0===e&&!0===r)throw new Co(So.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function _d(t){if(!jo.isDocumentKey(t))throw new Co(So.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Ed(t){if(jo.isDocumentKey(t))throw new Co(So.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Id(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":ho()}function Od(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Co(So.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Id(t);throw new Co(So.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Td(t,e){if(e<=0)throw new Co(So.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Sd=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Co(So.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Co(So.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,wd("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Cd=function(){function t(t,e){this._persistenceKey="(lite)",this._settings=new Sd({}),this._settingsFrozen=!1,t instanceof hd?(this._databaseId=t,this._credentials=new pd):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Co(So.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hd(t.options.projectId)}(t),this._credentials=new yd(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Co(So.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Co(So.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sd(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new pd;switch(t.type){case"gapi":var e=t.client;return fo(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new gd(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Co(So.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=fd.get(this))&&(ao("ComponentProvider","Removing Datastore"),fd.delete(this),t.terminate()),Promise.resolve();var t},t}(),xd=function(t){this._delegate=t},Ad=function(){function t(t,e,n){this._converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Dd(this.firestore,this._converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),kd=function(){function t(t,e,n){this._converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Dd=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Cs(r))||this).firestore=e,i._path=r,i.type="collection",i}return Object(ro.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Ad(this.firestore,null,new jo(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(kd);function jd(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof xd&&(t=t._delegate),vd("collection","path",e),t instanceof Cd)return Ed(n=Ao.fromString.apply(Ao,Object(ro.f)([e],r))),new Dd(t,null,n);if(!(t instanceof Ad||t instanceof Dd))throw new Co(So.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Ed(n=Ao.fromString.apply(Ao,Object(ro.f)([t.path],r)).child(Ao.fromString(e))),new Dd(t.firestore,null,n)}function Nd(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof xd&&(t=t._delegate),1===arguments.length&&(e=mo.u()),vd("doc","path",e),t instanceof Cd)return _d(n=Ao.fromString.apply(Ao,Object(ro.f)([e],r))),new Ad(t,null,new jo(n));if(!(t instanceof Ad||t instanceof Dd))throw new Co(So.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return _d(n=t._path.child(Ao.fromString.apply(Ao,Object(ro.f)([e],r)))),new Ad(t.firestore,t instanceof Dd?t._converter:null,new jo(n))}function Rd(t,e){return t instanceof xd&&(t=t._delegate),e instanceof xd&&(e=e._delegate),(t instanceof Ad||t instanceof Dd)&&(e instanceof Ad||e instanceof Dd)&&t.firestore===e.firestore&&t.path===e.path&&t._converter===e._converter}function Pd(t,e){return t instanceof xd&&(t=t._delegate),e instanceof xd&&(e=e._delegate),t instanceof kd&&e instanceof kd&&t.firestore===e.firestore&&Ls(t._query,e._query)&&t._converter===e._converter}var Ld=function(){function t(){var t=this;this.yc=Promise.resolve(),this.gc=[],this.Ec=!1,this.Tc=[],this.Ic=null,this.Ac=!1,this.Rc=[],this.rr=new ph(this,"async_queue_retry"),this.bc=function(){var e=fh();e&&ao("AsyncQueue","Visibility state changed to "+e.visibilityState),t.rr.Zi()};var e=fh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.bc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.Ec},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.vc(),this.Pc(t)},t.prototype.enterRestrictedMode=function(){if(!this.Ec){this.Ec=!0;var t=fh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.bc)}},t.prototype.enqueue=function(t){return this.vc(),this.Ec?new Promise(function(t){}):this.Pc(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.gc.push(t),e.Vc()})},t.prototype.Vc=function(){return Object(ro.b)(this,void 0,void 0,function(){var t,e=this;return Object(ro.d)(this,function(n){switch(n.label){case 0:if(0===this.gc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.gc[0]()];case 2:return n.sent(),this.gc.shift(),this.rr.reset(),[3,4];case 3:if(!lc(t=n.sent()))throw t;return ao("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.gc.length>0&&this.rr.Yi(function(){return e.Vc()}),n.label=5;case 5:return[2]}})})},t.prototype.Pc=function(t){var e=this,n=this.yc.then(function(){return e.Ac=!0,t().catch(function(t){throw e.Ic=t,e.Ac=!1,uo("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.Ac=!1,t})});return this.yc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.vc(),this.Rc.indexOf(t)>-1&&(e=0);var i=Kh.createAndSchedule(this,t,e,n,function(t){return r.Sc(t)});return this.Tc.push(i),i},t.prototype.vc=function(){this.Ic&&ho()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Dc=function(){return Object(ro.b)(this,void 0,void 0,function(){var t;return Object(ro.d)(this,function(e){switch(e.label){case 0:return[4,t=this.yc];case 1:e.sent(),e.label=2;case 2:if(t!==this.yc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Cc=function(t){for(var e=0,n=this.Tc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.xc=function(t){var e=this;return this.Dc().then(function(){e.Tc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.Tc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Dc()})},t.prototype.Nc=function(t){this.Rc.push(t)},t.prototype.Sc=function(t){var e=this.Tc.indexOf(t);this.Tc.splice(e,1)},t}();function Md(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new ic,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var Fd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._queue=new Ld,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(ro.c)(e,t),e.prototype._terminate=function(){return this._firestoreClient||qd(this),this._firestoreClient.terminate()},e}(Cd);function Vd(t){return t._firestoreClient||qd(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function qd(t){var e=t._freezeSettings(),n=function(t,e,n){return new ld(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t._databaseId,t._persistenceKey,e);t._firestoreClient=new Xf(t._credentials,t._queue,n)}function Ud(t,e,n){var r=this,i=new ic;return t.asyncQueue.enqueue(function(){return Object(ro.b)(r,void 0,void 0,function(){var r;return Object(ro.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Zf(t,n)];case 1:return o.sent(),[4,td(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===So.FAILED_PRECONDITION||t.code===So.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function Bd(t){if(t._initialized||t._terminated)throw new Co(So.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Hd=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Co(So.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Do(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),zd=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(No.fromBase64String(e))}catch(e){throw new Co(So.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(No.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Gd=function(t){this._methodName=t},Kd=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Co(So.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Co(So.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return go(this._lat,t._lat)||go(this._long,t._long)},t}(),Wd=/^__.*__$/,Qd=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new ba(t,this.data,this.fieldMask,e,this.fieldTransforms):new va(t,this.data,e,this.fieldTransforms)},t}(),$d=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new ba(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function Yd(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ho()}}var Jd=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.D=n,this.ignoreUndefinedProperties=r,void 0===i&&this.$c(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Fc",{get:function(){return this.settings.Fc},enumerable:!1,configurable:!0}),t.prototype.Oc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.D,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Oc({path:n,Mc:!1});return r.Lc(t),r},t.prototype.Bc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Oc({path:n,Mc:!1});return r.$c(),r},t.prototype.qc=function(t){return this.Oc({path:void 0,Mc:!0})},t.prototype.Uc=function(t){return gp(t,this.settings.methodName,this.settings.Qc||!1,this.path,this.settings.Kc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.$c=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Lc(this.path.get(t))},t.prototype.Lc=function(t){if(0===t.length)throw this.Uc("Document fields must not be empty");if(Yd(this.Fc)&&Wd.test(t))throw this.Uc('Document fields cannot begin and end with "__"')},t}(),Xd=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.D=n||dh(t)}return t.prototype.Wc=function(t,e,n,r){return void 0===r&&(r=!1),new Jd({Fc:t,methodName:e,Kc:n,path:Do.emptyPath(),Mc:!1,Qc:r},this.databaseId,this.D,this.ignoreUndefinedProperties)},t}();function Zd(t){var e=t._freezeSettings(),n=dh(t._databaseId);return new Xd(t._databaseId,!!e.ignoreUndefinedProperties,n)}function tp(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Wc(o.merge||o.mergeFields?2:0,e,n,i);dp("Data must be an object, but it was:",s,r);var a,u,c=hp(r,s);if(o.merge)a=new Hs(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=pp(e,f[h],n);if(!s.contains(d))throw new Co(So.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");vp(l,d)||l.push(d)}a=new Hs(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new Qd(new zs(c),a,u)}var ep=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ro.c)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Fc)throw t.Uc(1===t.Fc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Gd);function np(t,e,n){return new Jd({Fc:3,Kc:e.settings.Kc,methodName:t._methodName,Mc:n},e.databaseId,e.D,e.ignoreUndefinedProperties)}var rp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ro.c)(e,t),e.prototype._toFieldTransform=function(t){return new ua(t.path,new ta)},e.prototype.isEqual=function(t){return t instanceof e},e}(Gd),ip=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return Object(ro.c)(e,t),e.prototype._toFieldTransform=function(t){var e=np(this,t,!0),n=this.jc.map(function(t){return lp(t,e)}),r=new ea(n);return new ua(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Gd),op=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return Object(ro.c)(e,t),e.prototype._toFieldTransform=function(t){var e=np(this,t,!0),n=this.jc.map(function(t){return lp(t,e)}),r=new ra(n);return new ua(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Gd),sp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Gc=n,r}return Object(ro.c)(e,t),e.prototype._toFieldTransform=function(t){var e=new oa(t.D,$s(t.D,this.Gc));return new ua(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Gd);function ap(t,e,n,r){var i=t.Wc(1,e,n);dp("Data must be an object, but it was:",i,r);var o=[],s=new Gs;_o(r,function(t,r){var a=mp(e,t,n);r instanceof xd&&(r=r._delegate);var u=i.Bc(a);if(r instanceof ep)o.push(a);else{var c=lp(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new Hs(o);return new $d(s.v(),a,i.fieldTransforms)}function up(t,e,n,r,i,o){var s=t.Wc(1,e,n),a=[pp(e,r,n)],u=[i];if(o.length%2!=0)throw new Co(So.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(pp(e,o[c])),u.push(o[c+1]);for(var l=[],h=new Gs,f=a.length-1;f>=0;--f)if(!vp(l,a[f])){var d=a[f],p=u[f];p instanceof xd&&(p=p._delegate);var y=s.Bc(d);if(p instanceof ep)l.push(d);else{var m=lp(p,y);null!=m&&(l.push(d),h.set(d,m))}}var g=new Hs(l);return new $d(h.v(),g,s.fieldTransforms)}function cp(t,e,n,r){return void 0===r&&(r=!1),lp(n,t.Wc(r?4:3,e))}function lp(t,e){if(t instanceof xd&&(t=t._delegate),fp(t))return dp("Unsupported field value:",e,t),hp(t,e);if(t instanceof Gd)return function(t,e){if(!Yd(e.Fc))throw e.Uc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Uc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Mc&&4!==e.Fc)throw e.Uc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=lp(o[i],e.qc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof xd&&(t=t._delegate),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return $s(e.D,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Fo.fromDate(t);return{timestampValue:ou(e.D,n)}}if(t instanceof Fo)return n=new Fo(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:ou(e.D,n)};if(t instanceof Kd)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof zd)return{bytesValue:su(e.D,t._byteString)};if(t instanceof Ad){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Uc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:cu(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Uc("Unsupported field value: "+Id(t))}(t,e)}function hp(t,e){var n={};return Eo(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_o(t,function(t,r){var i=lp(r,e.kc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function fp(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Fo||t instanceof Kd||t instanceof zd||t instanceof Ad||t instanceof Gd)}function dp(t,e,n){if(!fp(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Id(n);throw e.Uc("an object"===r?t+" a custom object":t+" "+r)}}function pp(t,e,n){if(e instanceof xd&&(e=e._delegate),e instanceof Hd)return e._internalPath;if("string"==typeof e)return mp(t,e);throw gp("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var yp=new RegExp("[~\\*/\\[\\]]");function mp(t,e,n){if(e.search(yp)>=0)throw gp("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Hd.bind.apply(Hd,Object(ro.f)([void 0],e.split(".")))))._internalPath}catch(r){throw gp("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function gp(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Co(So.INVALID_ARGUMENT,(a+=". ")+t+u)}function vp(t,e){return t.some(function(t){return t.isEqual(e)})}var bp=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Ad(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new wp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data().field(_p("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),wp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ro.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(bp);function _p(t,e){return"string"==typeof e?mp(t,e):e instanceof xd?e._delegate._internalPath:e._internalPath}var Ep=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Ip=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(ro.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Op(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data().field(_p("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(bp),Op=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ro.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Ip),Tp=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Ep(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new Op(n._firestore,n._userDataWriter,r.key,r,new Ep(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query._converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Co(So.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new Op(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Ep(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new Op(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Ep(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Sp(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Sp(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ho()}}function Cp(t,e){return t instanceof Ip&&e instanceof Ip?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Tp&&e instanceof Tp&&t._firestore===e._firestore&&Pd(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function xp(t){if(As(t)&&0===t.explicitOrderBy.length)throw new Co(So.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ap=function(){};function kp(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Dp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).zc=e,i.Hc=n,i.Jc=r,i.type="where",i}return Object(ro.c)(e,t),e.prototype._apply=function(t){var e=Zd(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Co(So.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Fp(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(Mp(r,t,l[c]));a={arrayValue:{values:u}}}else a=Mp(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Fp(s,o),a=cp(n,"where",s,"in"===o||"not-in"===o);var h=ls.create(i,o,a);return function(t,e){if(e.g()){var n=Ds(t);if(null!==n&&!n.isEqual(e.field))throw new Co(So.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=ks(t);null!==r&&Vp(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Co(So.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.zc,this.Hc,this.Jc);return new kd(t.firestore,t._converter,function(t,e){var n=t.filters.concat([e]);return new Ts(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Ap),jp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).zc=e,r.Yc=n,r.type="orderBy",r}return Object(ro.c)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Co(So.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Co(So.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new _s(e,n);return function(t,e){if(null===ks(t)){var n=Ds(t);null!==n&&Vp(0,n,e.field)}}(t,r),r}(t._query,this.zc,this.Yc);return new kd(t.firestore,t._converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Ts(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Ap),Np=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Xc=n,i.Zc=r,i}return Object(ro.c)(e,t),e.prototype._apply=function(t){return new kd(t.firestore,t._converter,Ps(t._query,this.Xc,this.Zc))},e}(Ap),Rp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ta=n,i.ea=r,i}return Object(ro.c)(e,t),e.prototype._apply=function(t){var e=Lp(t,this.type,this.ta,this.ea);return new kd(t.firestore,t._converter,function(t,e){return new Ts(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Ap),Pp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ta=n,i.ea=r,i}return Object(ro.c)(e,t),e.prototype._apply=function(t){var e=Lp(t,this.type,this.ta,this.ea);return new kd(t.firestore,t._converter,function(t,e){return new Ts(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Ap);function Lp(t,e,n,r){if(n[0]instanceof xd&&(n[0]=n[0]._delegate),n[0]instanceof bp)return function(t,e,n,r,i){if(!r)throw new Co(So.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Ns(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push($o(e,r.key));else{var c=r.field(u.field);if(Vo(c))throw new Co(So.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Co(So.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new bs(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Zd(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new Co(So.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new Co(So.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!js(t)&&-1!==c.indexOf("/"))throw new Co(So.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Ao.fromString(c));if(!jo.isDocumentKey(l))throw new Co(So.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new jo(l);a.push($o(e,h))}else{var f=cp(n,r,c);a.push(f)}}return new bs(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Mp(t,e,n){if(n instanceof xd&&(n=n._delegate),"string"==typeof n){if(""===n)throw new Co(So.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!js(e)&&-1!==n.indexOf("/"))throw new Co(So.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Ao.fromString(n));if(!jo.isDocumentKey(r))throw new Co(So.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return $o(t,new jo(r))}if(n instanceof Ad)return $o(t,n._key);throw new Co(So.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Id(n)+".")}function Fp(t,e){if(!Array.isArray(t)||0===t.length)throw new Co(So.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Co(So.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Vp(t,e,n){if(!n.isEqual(e))throw new Co(So.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var qp=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Bo(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Lo(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Mo(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw ho()}},t.prototype.convertObject=function(t,e){var n=this,r={};return _o(t.fields||{},function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new Kd(Lo(t.latitude),Lo(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=qo(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Uo(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=Po(t);return new Fo(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Ao.fromString(t);fo(Ru(n));var r=new hd(n.get(1),n.get(3)),i=new jo(n.popFirst(5));return r.isEqual(e)||uo("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function Up(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Bp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(ro.c)(e,t),e.prototype.convertBytes=function(t){return new zd(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ad(this.firestore,null,e)},e}(qp),Hp=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Zd(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=zp(t,this._firestore),i=Up(r._converter,e,n),o=tp(this._dataReader,"WriteBatch.set",r._key,i,null!==r._converter,n);return this._mutations.push(o.toMutation(r._key,la.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=zp(t,this._firestore);return e instanceof xd&&(e=e._delegate),o="string"==typeof e||e instanceof Hd?up(this._dataReader,"WriteBatch.update",s._key,e,n,r):ap(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,la.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=zp(t,this._firestore);return this._mutations=this._mutations.concat(new Sa(e._key,la.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Co(So.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function zp(t,e){if(t instanceof xd&&(t=t._delegate),t.firestore!==e)throw new Co(So.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Gp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(ro.c)(e,t),e.prototype.convertBytes=function(t){return new zd(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ad(this.firestore,null,e)},e}(qp);function Kp(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Od(t,Ad);var o=Od(t.firestore,Fd),s=Zd(o);return e instanceof xd&&(e=e._delegate),Qp(o,[("string"==typeof e||e instanceof Hd?up(s,"updateDoc",t._key,e,n,r):ap(s,"updateDoc",t._key,e)).toMutation(t._key,la.exists(!0))])}function Wp(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof xd&&(t=t._delegate);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Md(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(Md(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Ad)c=Od(t.firestore,Fd),l=Cs(t._key.path),u={next:function(e){i[a]&&i[a]($p(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=Od(t,kd);c=Od(d.firestore,Fd),l=d._query;var p=new Gp(c);u={next:function(t){i[a]&&i[a](new Tp(c,p,d,t))},error:i[a+1],complete:i[a+2]},xp(t._query)}return function(t,e,n,r){var i=this,o=new $f(r),s=new of(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return Object(ro.b)(i,void 0,void 0,function(){var e;return Object(ro.d)(this,function(n){switch(n.label){case 0:return e=Zh,[4,ad(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Xo(),t.asyncQueue.enqueueAndForget(function(){return Object(ro.b)(i,void 0,void 0,function(){var e;return Object(ro.d)(this,function(n){switch(n.label){case 0:return e=tf,[4,ad(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(Vd(c),l,h,u)}function Qp(t,e){return function(t,e){var n=this,r=new ic;return t.asyncQueue.enqueueAndForget(function(){return Object(ro.b)(n,void 0,void 0,function(){var n;return Object(ro.d)(this,function(i){switch(i.label){case 0:return n=gf,[4,sd(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(Vd(t),e)}function $p(t,e,n){var r=n.docs.get(e._key),i=new Gp(t);return new Ip(t,i,e._key,r,new Ep(n.hasPendingWrites,n.fromCache),e._converter)}var Yp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(ro.c)(e,t),e.prototype.get=function(e){var n=this,r=zp(e,this._firestore),i=new Gp(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new Ip(n._firestore,i,r._key,t._document,new Ep(!1,!1),r._converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Zd(t)}return t.prototype.get=function(t){var e=this,n=zp(t,this._firestore),r=new Bp(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return ho();var i=t[0];if(i instanceof rs)return new bp(e._firestore,r,n._key,null,n._converter);if(i instanceof ns)return new bp(e._firestore,r,i.key,i,n._converter);throw ho()})},t.prototype.set=function(t,e,n){var r=zp(t,this._firestore),i=Up(r._converter,e,n),o=tp(this._dataReader,"Transaction.set",r._key,i,null!==r._converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=zp(t,this._firestore);return e instanceof xd&&(e=e._delegate),o="string"==typeof e||e instanceof Hd?up(this._dataReader,"Transaction.update",s._key,e,n,r):ap(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=zp(t,this._firestore);return this._transaction.delete(e._key),this},t}());function Jp(){if("undefined"==typeof Uint8Array)throw new Co(So.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Xp(){if("undefined"==typeof atob)throw new Co(So.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Zp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ro.c)(e,t),e.fromBase64String=function(t){return Xp(),new e(zd.fromBase64String(t))},e.fromUint8Array=function(t){return Jp(),new e(zd.fromUint8Array(t))},e.prototype.toBase64=function(){return Xp(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return Jp(),this._delegate.toUint8Array()},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(xd),ty=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Bd(t=Od(t,Fd));var n=Vd(t),r=t._freezeSettings(),i=new Qf;return Ud(n,i,new Kf(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Bd(t=Od(t,Fd));var e=Vd(t),n=t._freezeSettings(),r=new Qf;return Ud(e,r,new Wf(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Co(So.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new ic;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return Object(ro.b)(e,void 0,void 0,function(){var e;return Object(ro.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(ro.b)(this,void 0,void 0,function(){return Object(ro.d)(this,function(e){switch(e.label){case 0:return ac.At()?[4,ac.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(vl(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),ey=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).na=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof hd||(i.sa=e),i}return Object(ro.c)(e,t),Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=Od(t,Cd))._getSettings();"firestore.googleapis.com"!==r.host&&r.host!==e&&co("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._delegate,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(ro.b)(e,void 0,void 0,function(){var e,n;return Object(ro.d)(this,function(r){switch(r.label){case 0:return[4,rd(t)];case 1:return e=r.sent(),[4,od(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=po(t);return e.Qr.delete(0),_h(e)}(n))]}})})})}(Vd(Od(this._delegate,Fd)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(ro.b)(e,void 0,void 0,function(){var e,n;return Object(ro.d)(this,function(r){switch(r.label){case 0:return[4,rd(t)];case 1:return e=r.sent(),[4,od(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(ro.b)(this,void 0,void 0,function(){var e;return Object(ro.d)(this,function(n){switch(n.label){case 0:return(e=po(t)).Qr.add(0),[4,Eh(e)];case 1:return n.sent(),e.jr.set("Offline"),[2]}})})}(n))]}})})})}(Vd(Od(this._delegate,Fd)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&wd("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.na.enableMultiTabIndexedDbPersistence(this):this.na.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.na.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.sa&&(this.sa._removeServiceInstance("firestore"),this.sa._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new ic;return t.asyncQueue.enqueueAndForget(function(){return Object(ro.b)(e,void 0,void 0,function(){var e;return Object(ro.d)(this,function(r){switch(r.label){case 0:return e=If,[4,sd(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(Vd(Od(this._delegate,Fd)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new $f(e);return t.asyncQueue.enqueueAndForget(function(){return Object(ro.b)(n,void 0,void 0,function(){var e;return Object(ro.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){po(t).Zr.add(e),e.next()},[4,ad(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Xo(),t.asyncQueue.enqueueAndForget(function(){return Object(ro.b)(n,void 0,void 0,function(){var e;return Object(ro.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){po(t).Zr.delete(e)},[4,ad(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(Vd(t=Od(t,Fd)),Md(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.sa)throw new Co(So.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.sa},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new yy(this,jd(this._delegate,t))}catch(t){throw ay(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new sy(this,Nd(this._delegate,t))}catch(t){throw ay(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new fy(this,function(t,e){if(t=Od(t,Cd),vd("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Co(So.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new kd(t,null,function(t){return new Ts(Ao.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw ay(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new ic;return t.asyncQueue.enqueueAndForget(function(){return Object(ro.b)(n,void 0,void 0,function(){var n;return Object(ro.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return nd(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new Jf(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(Vd(t),function(n){return e(new Yp(t,n))})}(this._delegate,function(n){return t(new ry(e,n))})},e.prototype.batch=function(){var t=this;return Vd(this._delegate),new iy(new Hp(this._delegate,function(e){return Qp(t._delegate,e)}))},e.prototype.loadBundle=function(t){throw new Co(So.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new Co(So.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(xd),ny=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(ro.c)(e,t),e.prototype.convertBytes=function(t){return new Zp(new zd(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return sy.ia(e,this.firestore,null)},e}(qp),ry=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r._userDataWriter=new ny(e),r}return Object(ro.c)(e,t),e.prototype.get=function(t){var e=this,n=my(t);return this._delegate.get(n).then(function(t){return new ly(e._firestore,new Ip(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n._converter))})},e.prototype.set=function(t,e,n){var r=my(t);return n?(bd("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=my(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(ro.f)([s,e,n],i)),this},e.prototype.delete=function(t){var e=my(t);return this._delegate.delete(e),this},e}(xd),iy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ro.c)(e,t),e.prototype.set=function(t,e,n){var r=my(t);return n?(bd("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=my(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(ro.f)([s,e,n],i)),this},e.prototype.delete=function(t){var e=my(t);return this._delegate.delete(e),this},e.prototype.commit=function(){return this._delegate.commit()},e}(xd),oy=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this)._firestore=e,i._userDataWriter=n,i}return Object(ro.c)(e,t),e.prototype.fromFirestore=function(t,e){var n=new Op(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new hy(this._firestore,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},e.ra=function(t,n){var r=e.oa,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new ny(t),n),i.set(n,o)),o},e}(xd);oy.oa=new WeakMap;var sy=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r._userDataWriter=new ny(e),r}return Object(ro.c)(e,t),e.ca=function(t,n,r){if(t.length%2!=0)throw new Co(So.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(n,new Ad(n._delegate,r,new jo(t)))},e.ia=function(t,n,r){return new e(n,new Ad(n._delegate,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new yy(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new yy(this.firestore,jd(this._delegate,t))}catch(t){throw ay(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof xd&&(t=t._delegate),t instanceof Ad&&Rd(this._delegate,t)},e.prototype.set=function(t,e){e=bd("DocumentReference.set",e);try{return function(t,e,n){t=Od(t,Ad);var r=Od(t.firestore,Fd),i=Up(t._converter,e,n);return Qp(r,[tp(Zd(r),"setDoc",t._key,i,null!==t._converter,n).toMutation(t._key,la.none())])}(this._delegate,t,e)}catch(t){throw ay(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Kp(this._delegate,t):Kp.apply(void 0,Object(ro.f)([this._delegate,t,e],n))}catch(t){throw ay(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return Qp(Od((t=this._delegate).firestore,Fd),[new Sa(t._key,la.none())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=uy(e),i=cy(e,function(e){return new ly(t.firestore,new Ip(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate._converter))});return Wp(this._delegate,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Od(t,Ad);var e=Od(t.firestore,Fd),n=Vd(e),r=new Gp(e);return function(t,e){var n=this,r=new ic;return t.asyncQueue.enqueueAndForget(function(){return Object(ro.b)(n,void 0,void 0,function(){var n;return Object(ro.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(ro.b)(this,void 0,void 0,function(){var r,i;return Object(ro.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=po(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Kn.In(t,e)})}(t,e)];case 1:return(i=o.sent())instanceof ns?n.resolve(i):i instanceof rs?n.resolve(null):n.reject(new Co(So.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Wh(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,id(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new Ip(e,r,t._key,n,new Ep(n instanceof ns&&n.hasLocalMutations,!0),t._converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Od(t,Ad);var e=Od(t.firestore,Fd);return ud(Vd(e),t._key,{source:"server"}).then(function(n){return $p(e,t,n)})}(this._delegate):function(t){t=Od(t,Ad);var e=Od(t.firestore,Fd);return ud(Vd(e),t._key).then(function(n){return $p(e,t,n)})}(this._delegate)).then(function(t){return new ly(e.firestore,new Ip(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))})},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?oy.ra(this.firestore,t):null))},e}(xd);function ay(t,e,n){return t.message=t.message.replace(e,n),t}function uy(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Md(r))return r}return{}}function cy(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Md(t[0])?t[0]:Md(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var ly=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return Object(ro.c)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new sy(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._delegate.data(t)},e.prototype.get=function(t,e){return this._delegate.get(t,e)},e.prototype.isEqual=function(t){return Cp(this._delegate,t._delegate)},e}(xd),hy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ro.c)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(ly),fy=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r._userDataWriter=new ny(e),r}return Object(ro.c)(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,kp(this._delegate,function(t,e,n){var r=e,i=_p("where",t);return new Dp(i,r,n)}(t,n,r)))}catch(t){throw ay(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,kp(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=_p("orderBy",t);return new jp(r,n)}(t,n)))}catch(t){throw ay(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,kp(this._delegate,function(t){return Td("limit",t),new Np("limit",t,"F")}(t)))}catch(t){throw ay(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,kp(this._delegate,function(t){return Td("limitToLast",t),new Np("limitToLast",t,"L")}(t)))}catch(t){throw ay(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,kp(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Rp("startAt",t,!0)}).apply(void 0,t)))}catch(t){throw ay(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,kp(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Rp("startAfter",t,!1)}).apply(void 0,t)))}catch(t){throw ay(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,kp(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Pp("endBefore",t,!0)}).apply(void 0,t)))}catch(t){throw ay(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,kp(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Pp("endAt",t,!1)}).apply(void 0,t)))}catch(t){throw ay(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return Pd(this._delegate,t._delegate)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Od(t,kd);var e=Od(t.firestore,Fd),n=Vd(e),r=new Gp(e);return function(t,e){var n=this,r=new ic;return t.asyncQueue.enqueueAndForget(function(){return Object(ro.b)(n,void 0,void 0,function(){var n;return Object(ro.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(ro.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(ro.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Nl(t,e,!0)];case 1:return a=u.sent(),r=new lf(e,a.jn),i=r.Io(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=Wh(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,id(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new Tp(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Od(t,kd);var e=Od(t.firestore,Fd),n=Vd(e),r=new Gp(e);return cd(n,t._query,{source:"server"}).then(function(n){return new Tp(e,r,t,n)})}(this._delegate):function(t){t=Od(t,kd);var e=Od(t.firestore,Fd),n=Vd(e),r=new Gp(e);return xp(t._query),cd(n,t._query).then(function(n){return new Tp(e,r,t,n)})}(this._delegate)).then(function(t){return new py(e.firestore,new Tp(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=uy(e),i=cy(e,function(e){return new py(t.firestore,new Tp(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return Wp(this._delegate,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?oy.ra(this.firestore,t):null))},e}(xd),dy=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return Object(ro.c)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new hy(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(xd),py=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return Object(ro.c)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new fy(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new hy(t._firestore,e)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new dy(e._firestore,t)})},e.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new hy(n._firestore,r))})},e.prototype.isEqual=function(t){return Cp(this._delegate,t._delegate)},e}(xd),yy=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(ro.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new sy(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new sy(this.firestore,void 0===t?Nd(this._delegate):Nd(this._delegate,t))}catch(t){throw ay(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Od(t.firestore,Fd),r=Nd(t),i=Up(t._converter,e);return Qp(n,[tp(Zd(t.firestore),"addDoc",r._key,i,null!==t._converter,{}).toMutation(r._key,la.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new sy(e.firestore,t)})},e.prototype.isEqual=function(t){return Rd(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?oy.ra(this.firestore,t):null))},e}(fy);function my(t){return t instanceof xd&&(t=t._delegate),Od(t,Ad)}var gy,vy=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(Hd.bind.apply(Hd,Object(ro.f)([void 0],e))))||this}return Object(ro.c)(e,t),e.documentId=function(){return new e(Do.keyField().canonicalString())},e.prototype.isEqual=function(t){return t instanceof xd&&(t=t._delegate),t instanceof Hd&&this._delegate._internalPath.isEqual(t._internalPath)},e}(xd),by=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ro.c)(e,t),e.serverTimestamp=function(){var t=new rp("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new ep("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ip("arrayUnion",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new op("arrayRemove",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new sp("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e}(xd),wy=n("/6Yf"),_y={Firestore:ey,GeoPoint:Kd,Timestamp:Fo,Blob:Zp,Transaction:ry,WriteBatch:iy,DocumentReference:sy,DocumentSnapshot:ly,Query:fy,QueryDocumentSnapshot:hy,QuerySnapshot:py,CollectionReference:yy,FieldPath:vy,FieldValue:by,setLogLevel:function(t){oo.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new wy.a("firestore",function(t){return function(t,e){return new ey(t,new Fd(t,e),new ty)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},_y)))})(gy=Xt.a),gy.registerVersion("@firebase/firestore","2.2.1");var Ey=n("XNiG"),Iy=n("VRyK"),Oy=n("zx2A");function Ty(t,e){return"function"==typeof e?n=>n.pipe(Ty((n,r)=>Object(Lt.a)(t(n,r)).pipe(Object(nt.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new Sy(t))}class Sy{constructor(t){this.project=t}call(t,e){return e.subscribe(new Cy(t,this.project))}}class Cy extends Oy.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new Oy.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(Oy.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}var xy=n("qgXg"),Ay=n("quSY"),ky=n("9ppp"),Dy=n("Ylt2");class jy extends Ey.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new Ny(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new ky.a;if(this.isStopped||this.hasError?o=Ay.a.EMPTY:(this.observers.push(t),o=new Dy.a(this,t)),r&&t.add(t=new $t.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||xy.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class Ny{constructor(t,e){this.time=t,this.value=e}}function Ry(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new jy(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}const Py=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})(),Ly=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();var My=n("EY2u");function Fy(t){return e=>0===t?Object(My.b)():e.lift(new Vy(t))}class Vy{constructor(t){if(this.total=t,this.total<0)throw new Ly}call(t,e){return e.subscribe(new qy(t,this.total))}}class qy extends X.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Uy(t=null){return e=>e.lift(new By(t))}class By{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Hy(t,this.defaultValue))}}class Hy extends X.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function zy(t=Wy){return e=>e.lift(new Gy(t))}class Gy{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Ky(t,this.errorFactory))}}class Ky extends X.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(gy){t=gy}this.destination.error(t)}}}function Wy(){return new Py}var Qy=n("SpAZ");function $y(t,e){return e?Ty(()=>t,e):Ty(()=>t)}var Yy=n("tf+s");const Jy=new r.m("angularfire2.auth.use-emulator"),Xy=new r.m("angularfire2.auth.settings"),Zy=new r.m("angularfire2.auth.tenant-id"),tm=new r.m("angularfire2.auth.langugage-code"),em=new r.m("angularfire2.auth.use-device-language"),nm=new r.m("angularfire.auth.persistence");let rm=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new Yt.d(i),f=Object(Yt.h)(h),d=new Ey.a,p=Object(Y.a)(void 0).pipe(Object($t.b)(h.outsideAngular),Ty(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),Object(nt.a)(()=>Object(Yt.g)(t,i,e)),Object(nt.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(Yt.f)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),Ry({bufferSize:1,refCount:!1}));if(b(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(Y.a)(null);else{p.pipe(function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Z((e,n)=>t(e,n,r)):Qy.a,Fy(1),n?Uy(e):zy(()=>new Py))}()).subscribe();const t=p.pipe(Ty(t=>t.getRedirectResult().then(t=>t,()=>null)),f,Ry({bufferSize:1,refCount:!1})),e=t=>new $.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(Ty(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(Ty(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe($y(n),Object(Yy.a)(h.outsideAngular),Object($t.b)(h.insideAngular)),this.user=t.pipe($y(r),Object(Yy.a)(h.outsideAngular),Object($t.b)(h.insideAngular)),this.idToken=this.user.pipe(Ty(t=>t?Object(Lt.a)(t.getIdToken()):Object(Y.a)(null))),this.idTokenResult=this.user.pipe(Ty(t=>t?Object(Lt.a)(t.getIdTokenResult()):Object(Y.a)(null))),this.credential=Object(Iy.a)(t,d,this.authState.pipe(Z(t=>!t))).pipe(Object(nt.a)(t=>(null==t?void 0:t.user)?t:null),Object(Yy.a)(h.outsideAngular),Object($t.b)(h.insideAngular))}return Object(Yt.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>d.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(Yt.c),r.Ob(Yt.b,8),r.Ob(r.v),r.Ob(r.t),r.Ob(Jy,8),r.Ob(Xy,8),r.Ob(Zy,8),r.Ob(tm,8),r.Ob(em,8),r.Ob(nm,8))},t.\u0275prov=Object(r.yb)({factory:function(){return new t(Object(r.Ob)(Yt.c),Object(r.Ob)(Yt.b,8),Object(r.Ob)(r.v),Object(r.Ob)(r.t),Object(r.Ob)(Jy,8),Object(r.Ob)(Xy,8),Object(r.Ob)(Zy,8),Object(r.Ob)(tm,8),Object(r.Ob)(em,8),Object(r.Ob)(nm,8))},token:t,providedIn:"any"}),t})();function im(t,e){return function(t,e=Pt.b){return new $.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function om(t,e){return im(t,e).pipe(Object(nt.a)(t=>({payload:t,type:"query"})))}function sm(t,e){return om(t,e).pipe(qt(void 0),Ut(),Object(nt.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function am(t,e,n){return sm(t,n).pipe(zt((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return um(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return um(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return um(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),t=>t.lift(new Wt(undefined,undefined)),Object(nt.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function um(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function cm(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}Object(Yt.e)(rm,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);class lm{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=sm(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(nt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(qt(void 0),Ut(),Z(([t,e])=>e.length>0||!t),Object(nt.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(zt((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=cm(t);return am(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return om(this.query,this.afs.schedulers.outsideAngular).pipe(Object(nt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(Lt.a)(this.query.get(t)).pipe(Object($t.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new hm(this.ref.doc(t),this.afs)}}class hm{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=gm(n,e);return new lm(r,i,this.afs)}snapshotChanges(){return im(this.ref,this.afs.schedulers.outsideAngular).pipe(qt(void 0),Ut(),Object(nt.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(nt.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(Lt.a)(this.ref.get(t)).pipe(Object($t.b)(this.afs.schedulers.insideAngular))}}class fm{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?sm(this.query,this.afs.schedulers.outsideAngular).pipe(Object(nt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Z(t=>t.length>0),this.afs.keepUnstableUntilFirst):sm(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(zt((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=cm(t);return am(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return om(this.query,this.afs.schedulers.outsideAngular).pipe(Object(nt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(Lt.a)(this.query.get(t)).pipe(Object($t.b)(this.afs.schedulers.insideAngular))}}const dm=new r.m("angularfire2.enableFirestorePersistence"),pm=new r.m("angularfire2.firestore.persistenceSettings"),ym=new r.m("angularfire2.firestore.settings"),mm=new r.m("angularfire2.firestore.use-emulator");function gm(t,e=(t=>t)){return{query:e(t),ref:t}}let vm=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new Yt.d(o),this.keepUnstableUntilFirst=Object(Yt.h)(this.schedulers);const c=Object(Yt.g)(t,o,e);!Jt.a.auth&&u&&Object(Yt.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(Yt.f)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!b(i)){const e=()=>{try{return Object(Lt.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(gy){return"undefined"!=typeof console&&console.warn(gy),Object(Y.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(Y.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=gm(n,e),o=this.schedulers.ngZone.run(()=>r);return new lm(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new fm(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new hm(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(Yt.c),r.Ob(Yt.b,8),r.Ob(dm,8),r.Ob(ym,8),r.Ob(r.v),r.Ob(r.t),r.Ob(pm,8),r.Ob(mm,8),r.Ob(Jy,8))},t.\u0275prov=Object(r.yb)({factory:function(){return new t(Object(r.Ob)(Yt.c),Object(r.Ob)(Yt.b,8),Object(r.Ob)(dm,8),Object(r.Ob)(ym,8),Object(r.Ob)(r.v),Object(r.Ob)(r.t),Object(r.Ob)(pm,8),Object(r.Ob)(mm,8),Object(r.Ob)(Jy,8))},token:t,providedIn:"any"}),t})(),bm=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:dm,useValue:!0},{provide:pm,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ab({type:t}),t.\u0275inj=r.zb({providers:[vm]}),t})(),wm=(()=>{class t{constructor(t,e){this._http=t,this._afs=e,this.carsDataCollection=e.collection("cars_data")}getCarData(){return this.carsData=this.carsDataCollection.valueChanges({idField:"id"}),this.carsData.subscribe(t=>console.log("getCarsData:"+JSON.stringify(t))),this.carsData}addCarData(t){this.carsDataCollection.add(JSON.parse(JSON.stringify(t)))}delCarData(t){this.carsDataCollection.doc(t).delete()}handleError(t){return console.log("CarApiService: "+t.message),$.a.throw(t.message)}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(bt),r.Ob(vm))},t.\u0275prov=r.yb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class _m{constructor(t,e,n,r){this.make=t,this.model=e,this.year=n,this.imageURL=r}}let Em=(()=>{class t{constructor(t){this._carAPIService=t,this.carImageWidth=300}ngOnInit(){}deleteCar(t){console.log(t),this._carAPIService.delCarData(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Cb(wm))},t.\u0275cmp=r.wb({type:t,selectors:[["app-car"]],inputs:{carData:"carData"},features:[r.pb([wm])],decls:12,vars:6,consts:[[1,"container"],[1,"row","border"],[1,"col-3"],[3,"click"],[1,"col-2"],[1,"col-4"],[3,"src"]],template:function(t,e){1&t&&(r.Hb(0,"div",0),r.Hb(1,"div",1),r.Hb(2,"div",2),r.Hb(3,"button",3),r.Rb("click",function(){return e.deleteCar(e.carData.id)}),r.mc(4,"Delete"),r.Gb(),r.mc(5),r.Gb(),r.Hb(6,"div",2),r.mc(7),r.Gb(),r.Hb(8,"div",4),r.mc(9),r.Gb(),r.Hb(10,"div",5),r.Db(11,"img",6),r.Gb(),r.Gb(),r.Gb()),2&t&&(r.qb(5),r.oc(" ",e.carData.make," "),r.qb(2),r.oc(" ",e.carData.model," "),r.qb(2),r.oc(" ",e.carData.year," "),r.qb(2),r.jc("width",e.carImageWidth,"px"),r.Zb("src",e.carData.imageURL,r.hc))},styles:[""]}),t})();function Im(t,e){if(1&t){const t=r.Ib();r.Hb(0,"div"),r.Hb(1,"form"),r.Hb(2,"label"),r.mc(3,"Make"),r.Gb(),r.Db(4,"input",4,5),r.Hb(6,"label"),r.mc(7,"Model"),r.Gb(),r.Db(8,"input",6,7),r.Hb(10,"label"),r.mc(11,"Year"),r.Gb(),r.Db(12,"input",8,9),r.Hb(14,"label"),r.mc(15,"Image"),r.Gb(),r.Db(16,"input",10,11),r.Hb(18,"button",12),r.Rb("click",function(){r.gc(t);const e=r.fc(5),n=r.fc(9),i=r.fc(13),o=r.fc(17);return r.Tb().addTheCar(e.value,n.value,i.value,o.value)}),r.mc(19,"Add the Car"),r.Gb(),r.Gb(),r.Gb()}}function Om(t,e){1&t&&r.Db(0,"app-car",13),2&t&&r.Yb("carData",e.$implicit)}let Tm=(()=>{class t{constructor(t){this._carAPIService=t,this.show=!0}ngOnInit(){this._carAPIService.getCarData().subscribe(t=>{this.carsData=t})}addTheCar(t,e,n,r){let i;return i=new _m(t,e,n,r),this._carAPIService.addCarData(i),!1}}return t.\u0275fac=function(e){return new(e||t)(r.Cb(wm))},t.\u0275cmp=r.wb({type:t,selectors:[["app-carlist"]],features:[r.pb([wm])],decls:5,vars:3,consts:[[1,"btn","btn-primary",3,"click"],[4,"ngIf"],[1,"container"],[3,"carData",4,"ngFor","ngForOf"],["type","text","name","make","placeholder","Enter Make"],["make",""],["type","text","name","model","placeholder","Enter Model"],["model",""],["type","text","name","year","placeholder","Enter year"],["year",""],["type","text","name","imageURL","placeholder","Enter Link to Image"],["imageURL",""],["type","submit",1,"btn","btn-primary",3,"click"],[3,"carData"]],template:function(t,e){1&t&&(r.Hb(0,"button",0),r.Rb("click",function(){return e.show=!e.show}),r.mc(1),r.Gb(),r.kc(2,Im,20,0,"div",1),r.Hb(3,"div",2),r.kc(4,Om,1,1,"app-car",3),r.Gb()),2&t&&(r.qb(1),r.nc(e.show?"Hide":"Add a Car"),r.qb(1),r.Yb("ngIf",e.show),r.qb(2),r.Yb("ngForOf",e.carsData))},directives:[y,d,Em],styles:[""]}),t})(),Sm=(()=>{class t{constructor(){this.title="carsales-nosql"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.wb({type:t,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"container"]],template:function(t,e){1&t&&(r.Hb(0,"div",0),r.Hb(1,"h1"),r.mc(2,"Car Sales Application - S00199608 - Quentin Quaile"),r.Gb(),r.Db(3,"app-carlist"),r.Gb())},directives:[Tm],styles:[""]}),t})();const Cm={apiKey:"AIzaSyAfdrbsFVk8RBTV5i9tNxLr-97zrp4KWlE",authDomain:"ca4-carsales-s00199608.firebaseapp.com",projectId:"ca4-carsales-s00199608",storageBucket:"ca4-carsales-s00199608.appspot.com",messagingSenderId:"969757360876",appId:"1:969757360876:web:130c163bb52b3fcb849bc9",measurementId:"G-YJLVWXNLS6"};var xm=n("DH7j"),Am=n("n6bG");function km(t,e,n,r){return Object(Am.a)(n)&&(r=n,n=void 0),r?km(t,e,n).pipe(Object(nt.a)(t=>Object(xm.a)(t)?r(...t):r(t))):new $.a(r=>{Dm(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}function Dm(t,e,n,r,i){let o;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const r=t;t.addEventListener(e,n,i),o=()=>r.removeEventListener(e,n,i)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const r=t;t.on(e,n),o=()=>r.off(e,n)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const r=t;t.addListener(e,n),o=()=>r.removeListener(e,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let o=0,s=t.length;o<s;o++)Dm(t[o],e,n,r,i)}r.add(o)}var jm=n("Y7HM");function Nm(t){const{index:e,period:n,subscriber:r}=t;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}var Rm=n("yCtX");class Pm extends X.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Lm extends X.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Mm=n("SeVD");function Fm(t,e,n,r,i=new Lm(t,n,r)){if(!i.closed)return e instanceof $.a?e.subscribe(i):Object(Mm.a)(e)(i)}class Vm{call(t,e){return e.subscribe(new qm(t))}}class qm extends Pm{constructor(t){super(t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(t){this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(let n=0;n<e&&!this.hasFirst;n++){const e=Fm(this,t[n],void 0,n);this.subscriptions&&this.subscriptions.push(e),this.add(e)}this.observables=null}}notifyNext(t,e,n){if(!this.hasFirst){this.hasFirst=!0;for(let t=0;t<this.subscriptions.length;t++)if(t!==n){let e=this.subscriptions[t];e.unsubscribe(),this.remove(e)}this.subscriptions=null}this.destination.next(e)}}n("KqfI");var Um=n("Lhse");function Bm(...t){const e=t[t.length-1];return"function"==typeof e&&t.pop(),Object(Rm.a)(t,void 0).lift(new Hm(e))}class Hm{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new zm(t,this.resultSelector))}}class zm extends X.a{constructor(t,e,n=Object.create(null)){super(t),this.resultSelector=e,this.iterators=[],this.active=0,this.resultSelector="function"==typeof e?e:void 0}_next(t){const e=this.iterators;Object(xm.a)(t)?e.push(new Km(t)):e.push("function"==typeof t[Um.a]?new Gm(t[Um.a]()):new Wm(this.destination,this,t))}_complete(){const t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(let n=0;n<e;n++){let e=t[n];e.stillUnsubscribed?this.destination.add(e.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const t=this.iterators,e=t.length,n=this.destination;for(let o=0;o<e;o++){let e=t[o];if("function"==typeof e.hasValue&&!e.hasValue())return}let r=!1;const i=[];for(let o=0;o<e;o++){let e=t[o],s=e.next();if(e.hasCompleted()&&(r=!0),s.done)return void n.complete();i.push(s.value)}this.resultSelector?this._tryresultSelector(i):n.next(i),r&&n.complete()}_tryresultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class Gm{constructor(t){this.iterator=t,this.nextResult=t.next()}hasValue(){return!0}next(){const t=this.nextResult;return this.nextResult=this.iterator.next(),t}hasCompleted(){const t=this.nextResult;return Boolean(t&&t.done)}}class Km{constructor(t){this.array=t,this.index=0,this.length=0,this.length=t.length}[Um.a](){return this}next(t){const e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class Wm extends Oy.b{constructor(t,e,n){super(t),this.parent=e,this.observable=n,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[Um.a](){return this}next(){const t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(t){this.buffer.push(t),this.parent.checkIterators()}subscribe(){return Object(Oy.c)(this.observable,new Oy.a(this))}}function Qm(t){return e=>e.lift(new $m(t))}class $m{constructor(t){this.notifier=t}call(t,e){const n=new Ym(t),r=Object(Oy.c)(this.notifier,new Oy.a(n));return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}class Ym extends Oy.b{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}var Jm=n("vkgz");function Xm(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new Zm(t,n))}}class Zm{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new tg(t,this.observables,this.project))}}class tg extends Pm{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(Fm(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}n("WMd4"),n("w1tV"),n("XoHu");let eg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ab({type:t}),t.\u0275inj=r.zb({}),t})(),ng=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ab({type:t}),t.\u0275inj=r.zb({imports:[[eg]]}),t})(),rg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ab({type:t}),t.\u0275inj=r.zb({imports:[ng]}),t})();const ig=["*"],og=["dialog"];function sg(t){return null!=t}function ag(t){return(t||document.body).getBoundingClientRect()}"undefined"==typeof Element||Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(t){let e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});const ug={animation:!0,transitionTimerDelayMs:5};let cg=(()=>{class t{constructor(){this.animation=ug.animation}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.yb)({factory:function(){return new t},token:t,providedIn:"root"}),t})();const lg=()=>{},{transitionTimerDelayMs:hg}=ug,fg=new Map,dg=(t,e,n,r)=>{let i=r.context||{};const o=fg.get(e);if(o)switch(r.runningTransition){case"continue":return My.a;case"stop":t.run(()=>o.transition$.complete()),i=Object.assign(o.context,i),fg.delete(e)}const s=n(e,r.animation,i)||lg;if(!r.animation||"none"===window.getComputedStyle(e).transitionProperty)return t.run(()=>s()),Object(Y.a)(void 0).pipe(function(t){return e=>new $.a(n=>e.subscribe(e=>t.run(()=>n.next(e)),e=>t.run(()=>n.error(e)),()=>t.run(()=>n.complete())))}(t));const a=new Ey.a,u=new Ey.a,c=a.pipe(function(...t){return e=>Ft(e,Object(Y.a)(...t))}(!0));fg.set(e,{transition$:a,complete:()=>{u.next(),u.complete()},context:i});const l=function(t){const{transitionDelay:e,transitionDuration:n}=window.getComputedStyle(t);return 1e3*(parseFloat(e)+parseFloat(n))}(e);return t.runOutsideAngular(()=>{const n=km(e,"transitionend").pipe(Qm(c),Z(({target:t})=>t===e));(function(...t){if(1===t.length){if(!Object(xm.a)(t[0]))return t[0];t=t[0]}return Object(Rm.a)(t,void 0).lift(new Vm)})(function(t=0,e,n){let r=-1;return Object(jm.a)(e)?r=Number(e)<1?1:Number(e):Object(Vt.a)(e)&&(n=e),Object(Vt.a)(n)||(n=Pt.a),new $.a(e=>{const i=Object(jm.a)(t)?t:+t-n.now();return n.schedule(Nm,i,{index:0,period:r,subscriber:e})})}(l+hg).pipe(Qm(c)),n,u).pipe(Qm(c)).subscribe(()=>{fg.delete(e),t.run(()=>{s(),a.next(),a.complete()})})}),a.asObservable()};let pg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ab({type:t}),t.\u0275inj=r.zb({imports:[[v]]}),t})(),yg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ab({type:t}),t.\u0275inj=r.zb({imports:[[v]]}),t})(),mg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ab({type:t}),t.\u0275inj=r.zb({}),t})(),gg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ab({type:t}),t.\u0275inj=r.zb({imports:[[v]]}),t})(),vg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ab({type:t}),t.\u0275inj=r.zb({}),t})();var bg=function(t){return t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",t}({});"undefined"!=typeof navigator&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const wg=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function _g(t){const e=Array.from(t.querySelectorAll(wg)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}new class{getAllStyles(t){return window.getComputedStyle(t)}getStyle(t,e){return this.getAllStyles(t)[e]}isStaticPositioned(t){return"static"===(this.getStyle(t,"position")||"static")}offsetParent(t){let e=t.offsetParent||document.documentElement;for(;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement}position(t,e=!0){let n,r={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(t,"position"))n=t.getBoundingClientRect(),n={top:n.top,bottom:n.bottom,left:n.left,right:n.right,height:n.height,width:n.width};else{const e=this.offsetParent(t);n=this.offset(t,!1),e!==document.documentElement&&(r=this.offset(e,!1)),r.top+=e.clientTop,r.left+=e.clientLeft}return n.top-=r.top,n.bottom-=r.top,n.left-=r.left,n.right-=r.left,e&&(n.top=Math.round(n.top),n.bottom=Math.round(n.bottom),n.left=Math.round(n.left),n.right=Math.round(n.right)),n}offset(t,e=!0){const n=t.getBoundingClientRect(),r=window.pageYOffset-document.documentElement.clientTop,i=window.pageXOffset-document.documentElement.clientLeft;let o={height:n.height||t.offsetHeight,width:n.width||t.offsetWidth,top:n.top+r,bottom:n.bottom+r,left:n.left+i,right:n.right+i};return e&&(o.height=Math.round(o.height),o.width=Math.round(o.width),o.top=Math.round(o.top),o.bottom=Math.round(o.bottom),o.left=Math.round(o.left),o.right=Math.round(o.right)),o}positionElements(t,e,n,r){const[i="top",o="center"]=n.split("-"),s=r?this.offset(t,!1):this.position(t,!1),a=this.getAllStyles(e),u=parseFloat(a.marginTop),c=parseFloat(a.marginBottom),l=parseFloat(a.marginLeft),h=parseFloat(a.marginRight);let f=0,d=0;switch(i){case"top":f=s.top-(e.offsetHeight+u+c);break;case"bottom":f=s.top+s.height;break;case"left":d=s.left-(e.offsetWidth+l+h);break;case"right":d=s.left+s.width}switch(o){case"top":f=s.top;break;case"bottom":f=s.top+s.height-e.offsetHeight;break;case"left":d=s.left;break;case"right":d=s.left+s.width-e.offsetWidth;break;case"center":"top"===i||"bottom"===i?d=s.left+s.width/2-e.offsetWidth/2:f=s.top+s.height/2-e.offsetHeight/2}e.style.transform=`translate(${Math.round(d)}px, ${Math.round(f)}px)`;const p=e.getBoundingClientRect(),y=document.documentElement,m=window.innerHeight||y.clientHeight,g=window.innerWidth||y.clientWidth;return p.left>=0&&p.top>=0&&p.right<=g&&p.bottom<=m}},new Date(1882,10,12),new Date(2174,10,25);let Eg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ab({type:t}),t.\u0275inj=r.zb({imports:[[v,rg]]}),t})(),Ig=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ab({type:t}),t.\u0275inj=r.zb({}),t})(),Og=(()=>{class t{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(cg))},t.\u0275prov=Object(r.yb)({factory:function(){return new t(Object(r.Ob)(cg))},token:t,providedIn:"root"}),t})();class Tg{constructor(t,e,n){this.nodes=t,this.viewRef=e,this.componentRef=n}}const Sg=()=>{};let Cg=(()=>{class t{constructor(t){this._document=t}compensate(){const t=this._getWidth();return this._isPresent(t)?this._adjustBody(t):Sg}_adjustBody(t){const e=this._document.body,n=e.style.paddingRight,r=parseFloat(window.getComputedStyle(e)["padding-right"]);return e.style["padding-right"]=`${r+t}px`,()=>e.style["padding-right"]=n}_isPresent(t){const e=this._document.body.getBoundingClientRect();return window.innerWidth-(e.left+e.right)>=t-.1*t}_getWidth(){const t=this._document.createElement("div");t.className="modal-scrollbar-measure";const e=this._document.body;e.appendChild(t);const n=t.getBoundingClientRect().width-t.clientWidth;return e.removeChild(t),n}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(s))},t.\u0275prov=Object(r.yb)({factory:function(){return new t(Object(r.Ob)(s))},token:t,providedIn:"root"}),t})(),xg=(()=>{class t{constructor(t,e){this._el=t,this._zone=e}ngOnInit(){this._zone.onStable.asObservable().pipe(Fy(1)).subscribe(()=>{dg(this._zone,this._el.nativeElement,(t,e)=>{e&&ag(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return dg(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return t.\u0275fac=function(e){return new(e||t)(r.Cb(r.i),r.Cb(r.t))},t.\u0275cmp=r.wb({type:t,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:6,hostBindings:function(t,e){2&t&&(r.sb("modal-backdrop"+(e.backdropClass?" "+e.backdropClass:"")),r.ub("show",!e.animation)("fade",e.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})();class Ag{close(t){}dismiss(t){}}class kg{constructor(t,e,n,r){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=n,this._beforeDismiss=r,this._closed=new Ey.a,this._dismissed=new Ey.a,this._hidden=new Ey.a,t.instance.dismissEvent.subscribe(t=>{this.dismiss(t)}),this.result=new Promise((t,e)=>{this._resolve=t,this._reject=e}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Qm(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Qm(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();e&&e.then?e.then(e=>{!1!==e&&this._dismiss(t)},()=>{}):!1!==e&&this._dismiss(t)}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Object(Y.a)(void 0);t.subscribe(()=>{const{nativeElement:t}=this._windowCmptRef.location;t.parentNode.removeChild(t),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:t}=this._backdropCmptRef.location;t.parentNode.removeChild(t),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Bm(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var Dg=function(t){return t[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",t}({});let jg=(()=>{class t{constructor(t,e,n){this._document=t,this._elRef=e,this._zone=n,this._closed$=new Ey.a,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new r.k,this.shown=new Ey.a,this.hidden=new Ey.a}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement}ngAfterViewInit(){this._show()}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,e={animation:this.animation,runningTransition:"stop"},n=Bm(dg(this._zone,t,()=>t.classList.remove("show"),e),dg(this._zone,this._dialogEl.nativeElement,()=>{},e));return n.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),n}_show(){const t={animation:this.animation,runningTransition:"continue"};Bm(dg(this._zone,this._elRef.nativeElement,(t,e)=>{e&&ag(t),t.classList.add("show")},t),dg(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{km(t,"keydown").pipe(Qm(this._closed$),Z(t=>t.which===bg.Escape)).subscribe(t=>{this.keyboard?requestAnimationFrame(()=>{t.defaultPrevented||this._zone.run(()=>this.dismiss(Dg.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let e=!1;km(this._dialogEl.nativeElement,"mousedown").pipe(Qm(this._closed$),Object(Jm.a)(()=>e=!1),Ty(()=>km(t,"mouseup").pipe(Qm(this._closed$),Fy(1))),Z(({target:e})=>t===e)).subscribe(()=>{e=!0}),km(t,"click").pipe(Qm(this._closed$)).subscribe(({target:n})=>{t===n&&("static"===this.backdrop?this._bumpBackdrop():!0!==this.backdrop||e||this._zone.run(()=>this.dismiss(Dg.BACKDROP_CLICK))),e=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const e=t.querySelector("[ngbAutofocus]"),n=_g(t)[0];(e||n||t).focus()}}_restoreFocus(){const t=this._document.body,e=this._elWithFocus;let n;n=e&&e.focus&&t.contains(e)?e:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>n.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&dg(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return t.\u0275fac=function(e){return new(e||t)(r.Cb(s),r.Cb(r.i),r.Cb(r.t))},t.\u0275cmp=r.wb({type:t,selectors:[["ngb-modal-window"]],viewQuery:function(t,e){if(1&t&&r.qc(og,3),2&t){let t;r.ec(t=r.Sb())&&(e._dialogEl=t.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,e){2&t&&(r.rb("aria-modal",!0)("aria-labelledby",e.ariaLabelledBy)("aria-describedby",e.ariaDescribedBy),r.sb("modal d-block"+(e.windowClass?" "+e.windowClass:"")),r.ub("fade",e.animation))},inputs:{backdrop:"backdrop",keyboard:"keyboard",animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:ig,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,e){1&t&&(r.Xb(),r.Hb(0,"div",0,1),r.Hb(2,"div",2),r.Wb(3),r.Gb(),r.Gb()),2&t&&r.sb("modal-dialog"+(e.size?" modal-"+e.size:"")+(e.centered?" modal-dialog-centered":"")+(e.scrollable?" modal-dialog-scrollable":"")+(e.modalDialogClass?" "+e.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}"],encapsulation:2}),t})(),Ng=(()=>{class t{constructor(t,e,n,i,o,s){this._applicationRef=t,this._injector=e,this._document=n,this._scrollBar=i,this._rendererFactory=o,this._ngZone=s,this._activeWindowCmptHasChanged=new Ey.a,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass"],this._windowCmpts=[],this._activeInstances=new r.k,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const t=this._windowCmpts[this._windowCmpts.length-1];((t,e,n,r=!1)=>{this._ngZone.runOutsideAngular(()=>{const t=km(e,"focusin").pipe(Qm(n),Object(nt.a)(t=>t.target));km(e,"keydown").pipe(Qm(n),Z(t=>t.which===bg.Tab),Xm(t)).subscribe(([t,n])=>{const[r,i]=_g(e);n!==r&&n!==e||!t.shiftKey||(i.focus(),t.preventDefault()),n!==i||t.shiftKey||(r.focus(),t.preventDefault())}),r&&km(e,"click").pipe(Qm(n),Xm(t),Object(nt.a)(t=>t[1])).subscribe(t=>t.focus())})})(0,t.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(t.location.nativeElement)}})}open(t,e,n,r){const i=r.container instanceof HTMLElement?r.container:sg(r.container)?this._document.querySelector(r.container):this._document.body,o=this._rendererFactory.createRenderer(null,null),s=this._scrollBar.compensate(),a=()=>{this._modalRefs.length||(o.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!i)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);const u=new Ag,c=this._getContentRef(t,r.injector||e,n,u,r);let l=!1!==r.backdrop?this._attachBackdrop(t,i):void 0,h=this._attachWindowComponent(t,i,c),f=new kg(h,c,l,r.beforeDismiss);return this._registerModalRef(f),this._registerWindowCmpt(h),f.result.then(s,s),f.result.then(a,a),u.close=t=>{f.close(t)},u.dismiss=t=>{f.dismiss(t)},this._applyWindowOptions(h.instance,r),1===this._modalRefs.length&&o.addClass(this._document.body,"modal-open"),l&&l.instance&&this._applyBackdropOptions(l.instance,r),f}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(e=>e.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t,e){let n=t.resolveComponentFactory(xg).create(this._injector);return this._applicationRef.attachView(n.hostView),e.appendChild(n.location.nativeElement),n}_attachWindowComponent(t,e,n){let r=t.resolveComponentFactory(jg).create(this._injector,n.nodes);return this._applicationRef.attachView(r.hostView),e.appendChild(r.location.nativeElement),r}_applyWindowOptions(t,e){this._windowAttributes.forEach(n=>{sg(e[n])&&(t[n]=e[n])})}_applyBackdropOptions(t,e){this._backdropAttributes.forEach(n=>{sg(e[n])&&(t[n]=e[n])})}_getContentRef(t,e,n,i,o){return n?n instanceof r.C?this._createFromTemplateRef(n,i):"string"==typeof n?this._createFromString(n):this._createFromComponent(t,e,n,i,o):new Tg([])}_createFromTemplateRef(t,e){const n=t.createEmbeddedView({$implicit:e,close(t){e.close(t)},dismiss(t){e.dismiss(t)}});return this._applicationRef.attachView(n),new Tg([n.rootNodes],n)}_createFromString(t){const e=this._document.createTextNode(`${t}`);return new Tg([[e]])}_createFromComponent(t,e,n,i,o){const s=t.resolveComponentFactory(n),a=r.n.create({providers:[{provide:Ag,useValue:i}],parent:e}),u=s.create(a),c=u.location.nativeElement;return o.scrollable&&c.classList.add("component-host-scrollable"),this._applicationRef.attachView(u.hostView),new Tg([[c]],u.hostView,u)}_setAriaHidden(t){const e=t.parentElement;e&&t!==this._document.body&&(Array.from(e.children).forEach(e=>{e!==t&&"SCRIPT"!==e.nodeName&&(this._ariaHiddenValues.set(e,e.getAttribute("aria-hidden")),e.setAttribute("aria-hidden","true"))}),this._setAriaHidden(e))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,e)=>{t?e.setAttribute("aria-hidden",t):e.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const e=()=>{const e=this._modalRefs.indexOf(t);e>-1&&(this._modalRefs.splice(e,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(e,e)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const e=this._windowCmpts.indexOf(t);e>-1&&(this._windowCmpts.splice(e,1),this._activeWindowCmptHasChanged.next())})}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(r.e),r.Ob(r.n),r.Ob(s),r.Ob(Cg),r.Ob(r.y),r.Ob(r.t))},t.\u0275prov=Object(r.yb)({factory:function(){return new t(Object(r.Ob)(r.e),Object(r.Ob)(r.l),Object(r.Ob)(s),Object(r.Ob)(Cg),Object(r.Ob)(r.y),Object(r.Ob)(r.t))},token:t,providedIn:"root"}),t})(),Rg=(()=>{class t{constructor(t,e,n,r){this._moduleCFR=t,this._injector=e,this._modalStack=n,this._config=r}open(t,e={}){const n=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),e);return this._modalStack.open(this._moduleCFR,this._injector,t,n)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(r.g),r.Ob(r.n),r.Ob(Ng),r.Ob(Og))},t.\u0275prov=Object(r.yb)({factory:function(){return new t(Object(r.Ob)(r.g),Object(r.Ob)(r.l),Object(r.Ob)(Ng),Object(r.Ob)(Og))},token:t,providedIn:"root"}),t})(),Pg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ab({type:t}),t.\u0275inj=r.zb({providers:[Rg]}),t})(),Lg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ab({type:t}),t.\u0275inj=r.zb({imports:[[v]]}),t})(),Mg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ab({type:t}),t.\u0275inj=r.zb({imports:[[v]]}),t})(),Fg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ab({type:t}),t.\u0275inj=r.zb({imports:[[v]]}),t})(),Vg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ab({type:t}),t.\u0275inj=r.zb({imports:[[v]]}),t})(),qg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ab({type:t}),t.\u0275inj=r.zb({imports:[[v]]}),t})(),Ug=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ab({type:t}),t.\u0275inj=r.zb({imports:[[v]]}),t})(),Bg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ab({type:t}),t.\u0275inj=r.zb({imports:[[v]]}),t})(),Hg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ab({type:t}),t.\u0275inj=r.zb({}),t})();new r.m("live announcer delay",{providedIn:"root",factory:function(){return 100}});let zg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ab({type:t}),t.\u0275inj=r.zb({imports:[[v]]}),t})();const Gg=[pg,yg,mg,gg,vg,Eg,Ig,Pg,Lg,Mg,Fg,Vg,qg,Ug,Bg,Hg,zg];let Kg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ab({type:t}),t.\u0275inj=r.zb({imports:[Gg,pg,yg,mg,gg,vg,Eg,Ig,Pg,Lg,Mg,Fg,Vg,qg,Ug,Bg,Hg,zg]}),t})(),Wg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ab({type:t,bootstrap:[Sm]}),t.\u0275inj=r.zb({providers:[],imports:[[Q,Rt,Yt.a.initializeApp(Cm),bm,Kg]]}),t})();Object(r.J)(),K().bootstrapModule(Wg).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.a)return t.subscribe(e);let n;try{n=Object(o.a)(t)(e)}catch(r){e.error(r)}return n}}},[[0,0]]]);